/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

(function(){var _1=null;if((_1||(typeof djConfig!="undefined"&&djConfig.scopeMap))&&(typeof window!="undefined")){var _2="",_3="",_4="",_5={},_6={};_1=_1||djConfig.scopeMap;for(var i=0;i<_1.length;i++){var _7=_1[i];_2+="var "+_7[0]+" = {}; "+_7[1]+" = "+_7[0]+";"+_7[1]+"._scopeName = '"+_7[1]+"';";_3+=(i==0?"":",")+_7[0];_4+=(i==0?"":",")+_7[1];_5[_7[0]]=_7[1];_6[_7[1]]=_7[0];}eval(_2+"dojo._scopeArgs = ["+_4+"];");dojo._scopePrefixArgs=_3;dojo._scopePrefix="(function("+_3+"){";dojo._scopeSuffix="})("+_4+")";dojo._scopeMap=_5;dojo._scopeMapRev=_6;}(function(){if(typeof this["loadFirebugConsole"]=="function"){this["loadFirebugConsole"]();}else{this.console=this.console||{};var cn=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];var i=0,tn;while((tn=cn[i++])){if(!console[tn]){(function(){var _8=tn+"";console[_8]=("log" in console)?function(){var a=Array.apply({},arguments);a.unshift(_8+":");console["log"](a.join(" "));}:function(){};console[_8]._fake=true;})();}}}if(typeof dojo=="undefined"){dojo={_scopeName:"dojo",_scopePrefix:"",_scopePrefixArgs:"",_scopeSuffix:"",_scopeMap:{},_scopeMapRev:{}};}var d=dojo;if(typeof dijit=="undefined"){dijit={_scopeName:"dijit"};}if(typeof dojox=="undefined"){dojox={_scopeName:"dojox"};}if(!d._scopeArgs){d._scopeArgs=[dojo,dijit,dojox];}d.global=this;d.config={isDebug:false,debugAtAllCosts:false};var _9=typeof djConfig!="undefined"?djConfig:typeof dojoConfig!="undefined"?dojoConfig:null;if(_9){for(var c in _9){d.config[c]=_9[c];}}dojo.locale=d.config.locale;var _a="$Rev: 24595 $".match(/\d+/);dojo.version={major:0,minor:0,patch:0,flag:"dev",revision:_a?+_a[0]:NaN,toString:function(){with(d.version){return major+"."+minor+"."+patch+flag+" ("+revision+")";}}};if(typeof OpenAjax!="undefined"){OpenAjax.hub.registerLibrary(dojo._scopeName,"http://dojotoolkit.org",d.version.toString());}var _b,_c,_d={};for(var i in {toString:1}){_b=[];break;}dojo._extraNames=_b=_b||["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];_c=_b.length;dojo._mixin=function(_e,_f){var _10,s,i;for(_10 in _f){s=_f[_10];if(!(_10 in _e)||(_e[_10]!==s&&(!(_10 in _d)||_d[_10]!==s))){_e[_10]=s;}}if(_c&&_f){for(i=0;i<_c;++i){_10=_b[i];s=_f[_10];if(!(_10 in _e)||(_e[_10]!==s&&(!(_10 in _d)||_d[_10]!==s))){_e[_10]=s;}}}return _e;};dojo.mixin=function(obj,_11){if(!obj){obj={};}for(var i=1,l=arguments.length;i<l;i++){d._mixin(obj,arguments[i]);}return obj;};dojo._getProp=function(_12,_13,_14){var obj=_14||d.global;for(var i=0,p;obj&&(p=_12[i]);i++){if(i==0&&d._scopeMap[p]){p=d._scopeMap[p];}obj=(p in obj?obj[p]:(_13?obj[p]={}:undefined));}return obj;};dojo.setObject=function(_15,_16,_17){var _18=_15.split("."),p=_18.pop(),obj=d._getProp(_18,true,_17);return obj&&p?(obj[p]=_16):undefined;};dojo.getObject=function(_19,_1a,_1b){return d._getProp(_19.split("."),_1a,_1b);};dojo.exists=function(_1c,obj){return d.getObject(_1c,false,obj)!==undefined;};dojo["eval"]=function(_1d){return d.global.eval?d.global.eval(_1d):eval(_1d);};d.deprecated=d.experimental=function(){};})();(function(){var d=dojo,_1e;d.mixin(d,{_loadedModules:{},_inFlightCount:0,_hasResource:{},_modulePrefixes:{dojo:{name:"dojo",value:"."},doh:{name:"doh",value:"../util/doh"},tests:{name:"tests",value:"tests"}},_moduleHasPrefix:function(_1f){var mp=d._modulePrefixes;return !!(mp[_1f]&&mp[_1f].value);},_getModulePrefix:function(_20){var mp=d._modulePrefixes;if(d._moduleHasPrefix(_20)){return mp[_20].value;}return _20;},_loadedUrls:[],_postLoad:false,_loaders:[],_unloaders:[],_loadNotifying:false});dojo._loadPath=function(_21,_22,cb){var uri=((_21.charAt(0)=="/"||_21.match(/^\w+:/))?"":d.baseUrl)+_21;try{_1e=_22;return !_22?d._loadUri(uri,cb):d._loadUriAndCheck(uri,_22,cb);}catch(e){console.error(e);return false;}finally{_1e=null;}};dojo._loadUri=function(uri,cb){if(d._loadedUrls[uri]){return true;}d._inFlightCount++;var _23=d._getText(uri,true);if(_23){d._loadedUrls[uri]=true;d._loadedUrls.push(uri);if(cb){_23=/^define\(/.test(_23)?_23:"("+_23+")";}else{_23=d._scopePrefix+_23+d._scopeSuffix;}if(!d.isIE){_23+="\r\n//@ sourceURL="+uri;}var _24=d["eval"](_23);if(cb){cb(_24);}}if(--d._inFlightCount==0&&d._postLoad&&d._loaders.length){setTimeout(function(){if(d._inFlightCount==0){d._callLoaded();}},0);}return !!_23;};dojo._loadUriAndCheck=function(uri,_25,cb){var ok=false;try{ok=d._loadUri(uri,cb);}catch(e){console.error("failed loading "+uri+" with error: "+e);}return !!(ok&&d._loadedModules[_25]);};dojo.loaded=function(){d._loadNotifying=true;d._postLoad=true;var mll=d._loaders;d._loaders=[];for(var x=0;x<mll.length;x++){mll[x]();}d._loadNotifying=false;if(d._postLoad&&d._inFlightCount==0&&mll.length){d._callLoaded();}};dojo.unloaded=function(){var mll=d._unloaders;while(mll.length){(mll.pop())();}};d._onto=function(arr,obj,fn){if(!fn){arr.push(obj);}else{if(fn){var _26=(typeof fn=="string")?obj[fn]:fn;arr.push(function(){_26.call(obj);});}}};dojo.ready=dojo.addOnLoad=function(obj,_27){d._onto(d._loaders,obj,_27);if(d._postLoad&&d._inFlightCount==0&&!d._loadNotifying){d._callLoaded();}};var dca=d.config.addOnLoad;if(dca){d.addOnLoad[(dca instanceof Array?"apply":"call")](d,dca);}dojo._modulesLoaded=function(){if(d._postLoad){return;}if(d._inFlightCount>0){console.warn("files still in flight!");return;}d._callLoaded();};dojo._callLoaded=function(){if(typeof setTimeout=="object"||(d.config.useXDomain&&d.isOpera)){setTimeout(d.isAIR?function(){d.loaded();}:d._scopeName+".loaded();",0);}else{d.loaded();}};dojo._getModuleSymbols=function(_28){var _29=_28.split(".");for(var i=_29.length;i>0;i--){var _2a=_29.slice(0,i).join(".");if(i==1&&!d._moduleHasPrefix(_2a)){_29[0]="../"+_29[0];}else{var _2b=d._getModulePrefix(_2a);if(_2b!=_2a){_29.splice(0,i,_2b);break;}}}return _29;};dojo._global_omit_module_check=false;dojo.loadInit=function(_2c){_2c();};dojo._loadModule=dojo.require=function(_2d,_2e){_2e=d._global_omit_module_check||_2e;var _2f=d._loadedModules[_2d];if(_2f){return _2f;}var _30=d._getModuleSymbols(_2d).join("/")+".js";var _31=!_2e?_2d:null;var ok=d._loadPath(_30,_31);if(!ok&&!_2e){throw new Error("Could not load '"+_2d+"'; last tried '"+_30+"'");}if(!_2e&&!d._isXDomain){_2f=d._loadedModules[_2d];if(!_2f){throw new Error("symbol '"+_2d+"' is not defined after loading '"+_30+"'");}}return _2f;};dojo.provide=function(_32){_32=_32+"";return (d._loadedModules[_32]=d.getObject(_32,true));};dojo.platformRequire=function(_33){var _34=_33.common||[];var _35=_34.concat(_33[d._name]||_33["default"]||[]);for(var x=0;x<_35.length;x++){var _36=_35[x];if(_36.constructor==Array){d._loadModule.apply(d,_36);}else{d._loadModule(_36);}}};dojo.requireIf=function(_37,_38){if(_37===true){var _39=[];for(var i=1;i<arguments.length;i++){_39.push(arguments[i]);}d.require.apply(d,_39);}};dojo.requireAfterIf=d.requireIf;dojo.registerModulePath=function(_3a,_3b){d._modulePrefixes[_3a]={name:_3a,value:_3b};};dojo.requireLocalization=function(_3c,_3d,_3e,_3f){d.require("dojo.i18n");d.i18n._requireLocalization.apply(d.hostenv,arguments);};var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");dojo._Url=function(){var n=null,_40=arguments,uri=[_40[0]];for(var i=1;i<_40.length;i++){if(!_40[i]){continue;}var _41=new d._Url(_40[i]+""),_42=new d._Url(uri[0]+"");if(_41.path==""&&!_41.scheme&&!_41.authority&&!_41.query){if(_41.fragment!=n){_42.fragment=_41.fragment;}_41=_42;}else{if(!_41.scheme){_41.scheme=_42.scheme;if(!_41.authority){_41.authority=_42.authority;if(_41.path.charAt(0)!="/"){var _43=_42.path.substring(0,_42.path.lastIndexOf("/")+1)+_41.path;var _44=_43.split("/");for(var j=0;j<_44.length;j++){if(_44[j]=="."){if(j==_44.length-1){_44[j]="";}else{_44.splice(j,1);j--;}}else{if(j>0&&!(j==1&&_44[0]=="")&&_44[j]==".."&&_44[j-1]!=".."){if(j==(_44.length-1)){_44.splice(j,1);_44[j-1]="";}else{_44.splice(j-1,2);j-=2;}}}}_41.path=_44.join("/");}}}}uri=[];if(_41.scheme){uri.push(_41.scheme,":");}if(_41.authority){uri.push("//",_41.authority);}uri.push(_41.path);if(_41.query){uri.push("?",_41.query);}if(_41.fragment){uri.push("#",_41.fragment);}}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n;}};dojo._Url.prototype.toString=function(){return this.uri;};dojo.moduleUrl=function(_45,url){var loc=d._getModuleSymbols(_45).join("/");if(!loc){return null;}if(loc.lastIndexOf("/")!=loc.length-1){loc+="/";}var _46=loc.indexOf(":");if(loc.charAt(0)!="/"&&(_46==-1||_46>loc.indexOf("/"))){loc=d.baseUrl+loc;}return new d._Url(loc,url);};})();if(dojo.config["baseUrl"]){dojo.baseUrl=dojo.config["baseUrl"];}else{dojo.baseUrl="./";}dojo.locale=dojo.locale||String(java.util.Locale.getDefault().toString().replace("_","-").toLowerCase());dojo._name="rhino";dojo.isRhino=true;if(typeof print=="function"){console.debug=print;}if(!("byId" in dojo)){dojo.byId=function(id,doc){if(id&&(typeof id=="string"||id instanceof String)){if(!doc){doc=document;}return doc.getElementById(id);}return id;};}dojo._isLocalUrl=function(uri){var _47=(new java.io.File(uri)).exists();if(!_47){var _48;try{_48=(new java.net.URL(uri)).openStream();_48.close();}finally{if(_48&&_48.close){_48.close();}}}return _47;};dojo._loadUri=function(uri,cb){if(dojo._loadedUrls[uri]){return true;}try{var _49;try{_49=dojo._isLocalUrl(uri);}catch(e){return false;}dojo._loadedUrls[uri]=true;if(cb){var _4a=(_49?_4b:_4c)(uri,"UTF-8");if(!eval("'‏'").length){_4a=String(_4a).replace(/[\u200E\u200F\u202A-\u202E]/g,function(_4d){return "\\u"+_4d.charCodeAt(0).toString(16);});}_4a=/^define\(/.test(_4a)?_4a:"("+_4a+")";cb(eval(_4a));}else{load(uri);}dojo._loadedUrls.push(uri);return true;}catch(e){dojo._loadedUrls[uri]=false;console.debug("rhino load('"+uri+"') failed. Exception: "+e);return false;}};dojo.exit=function(_4e){quit(_4e);};function _4b(_4f,_50){_50=_50||"utf-8";var jf=new java.io.File(_4f);var is=new java.io.FileInputStream(jf);return _51(is,_50);};function _4c(uri,_52){var _53=(new java.net.URL(uri)).openConnection();_52=_52||_53.getContentEncoding()||"utf-8";var is=_53.getInputStream();return _51(is,_52);};function _51(is,_54){var _55=new java.io.BufferedReader(new java.io.InputStreamReader(is,_54));try{var sb=new java.lang.StringBuffer();var _56="";while((_56=_55.readLine())!==null){sb.append(_56);sb.append(java.lang.System.getProperty("line.separator"));}return sb.toString();}finally{_55.close();}};dojo._getText=function(uri,_57){try{var _58=dojo._isLocalUrl(uri);var _59=(_58?_4b:_4c)(uri,"UTF-8");if(_59!==null){_59+="";}return _59;}catch(e){if(_57){return null;}else{throw e;}}};dojo.doc=typeof document!="undefined"?document:null;dojo.body=function(){return document.body;};if(typeof setTimeout=="undefined"||typeof clearTimeout=="undefined"){dojo._timeouts=[];clearTimeout=function(idx){if(!dojo._timeouts[idx]){return;}dojo._timeouts[idx].stop();};setTimeout=function(_5a,_5b){var def={sleepTime:_5b,hasSlept:false,run:function(){if(!this.hasSlept){this.hasSlept=true;java.lang.Thread.currentThread().sleep(this.sleepTime);}try{_5a();}catch(e){console.debug("Error running setTimeout thread:"+e);}}};var _5c=new java.lang.Runnable(def);var _5d=new java.lang.Thread(_5c);_5d.start();return dojo._timeouts.push(_5d)-1;};}if(dojo.config["modulePaths"]){for(var _5e in dojo.config["modulePaths"]){dojo.registerModulePath(_5e,dojo.config["modulePaths"][_5e]);}}if(!dojo._hasResource["dojo._base.lang"]){dojo._hasResource["dojo._base.lang"]=true;dojo.provide("dojo._base.lang");(function(){var d=dojo,_5f=Object.prototype.toString;dojo.isString=function(it){return (typeof it=="string"||it instanceof String);};dojo.isArray=function(it){return it&&(it instanceof Array||typeof it=="array");};dojo.isFunction=function(it){return _5f.call(it)==="[object Function]";};dojo.isObject=function(it){return it!==undefined&&(it===null||typeof it=="object"||d.isArray(it)||d.isFunction(it));};dojo.isArrayLike=function(it){return it&&it!==undefined&&!d.isString(it)&&!d.isFunction(it)&&!(it.tagName&&it.tagName.toLowerCase()=="form")&&(d.isArray(it)||isFinite(it.length));};dojo.isAlien=function(it){return it&&!d.isFunction(it)&&/\{\s*\[native code\]\s*\}/.test(String(it));};dojo.extend=function(_60,_61){for(var i=1,l=arguments.length;i<l;i++){d._mixin(_60.prototype,arguments[i]);}return _60;};dojo._hitchArgs=function(_62,_63){var _64=d._toArray(arguments,2);var _65=d.isString(_63);return function(){var _66=d._toArray(arguments);var f=_65?(_62||d.global)[_63]:_63;return f&&f.apply(_62||this,_64.concat(_66));};};dojo.hitch=function(_67,_68){if(arguments.length>2){return d._hitchArgs.apply(d,arguments);}if(!_68){_68=_67;_67=null;}if(d.isString(_68)){_67=_67||d.global;if(!_67[_68]){throw (["dojo.hitch: scope[\"",_68,"\"] is null (scope=\"",_67,"\")"].join(""));}return function(){return _67[_68].apply(_67,arguments||[]);};}return !_67?_68:function(){return _68.apply(_67,arguments||[]);};};dojo.delegate=dojo._delegate=(function(){function _69(){};return function(_6a,_6b){_69.prototype=_6a;var _6c=new _69();_69.prototype=null;if(_6b){d._mixin(_6c,_6b);}return _6c;};})();var _6d=function(obj,_6e,_6f){return (_6f||[]).concat(Array.prototype.slice.call(obj,_6e||0));};var _70=function(obj,_71,_72){var arr=_72||[];for(var x=_71||0;x<obj.length;x++){arr.push(obj[x]);}return arr;};dojo._toArray=d.isIE?function(obj){return ((obj.item)?_70:_6d).apply(this,arguments);}:_6d;dojo.partial=function(_73){var arr=[null];return d.hitch.apply(d,arr.concat(d._toArray(arguments)));};var _74=d._extraNames,_75=_74.length,_76={};dojo.clone=function(o){if(!o||typeof o!="object"||d.isFunction(o)){return o;}if(o.nodeType&&"cloneNode" in o){return o.cloneNode(true);}if(o instanceof Date){return new Date(o.getTime());}if(o instanceof RegExp){return new RegExp(o);}var r,i,l,s,_77;if(d.isArray(o)){r=[];for(i=0,l=o.length;i<l;++i){if(i in o){r.push(d.clone(o[i]));}}}else{r=o.constructor?new o.constructor():{};}for(_77 in o){s=o[_77];if(!(_77 in r)||(r[_77]!==s&&(!(_77 in _76)||_76[_77]!==s))){r[_77]=d.clone(s);}}if(_75){for(i=0;i<_75;++i){_77=_74[i];s=o[_77];if(!(_77 in r)||(r[_77]!==s&&(!(_77 in _76)||_76[_77]!==s))){r[_77]=s;}}}return r;};dojo.trim=String.prototype.trim?function(str){return str.trim();}:function(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"");};var _78=/\{([^\}]+)\}/g;dojo.replace=function(_79,map,_7a){return _79.replace(_7a||_78,d.isFunction(map)?map:function(_7b,k){return d.getObject(k,false,map);});};})();}if(!dojo._hasResource["dojo._base.array"]){dojo._hasResource["dojo._base.array"]=true;dojo.provide("dojo._base.array");(function(){var _7c=function(_7d,_7e,cb){return [(typeof _7d=="string")?_7d.split(""):_7d,_7e||dojo.global,(typeof cb=="string")?new Function("item","index","array",cb):cb];};var _7f=function(_80,_81,_82,_83){var _84=_7c(_81,_83,_82);_81=_84[0];for(var i=0,l=_81.length;i<l;++i){var _85=!!_84[2].call(_84[1],_81[i],i,_81);if(_80^_85){return _85;}}return _80;};dojo.mixin(dojo,{indexOf:function(_86,_87,_88,_89){var _8a=1,end=_86.length||0,i=0;if(_89){i=end-1;_8a=end=-1;}if(_88!=undefined){i=_88;}if((_89&&i>end)||i<end){for(;i!=end;i+=_8a){if(_86[i]==_87){return i;}}}return -1;},lastIndexOf:function(_8b,_8c,_8d){return dojo.indexOf(_8b,_8c,_8d,true);},forEach:function(arr,_8e,_8f){if(!arr||!arr.length){return;}var _90=_7c(arr,_8f,_8e);arr=_90[0];for(var i=0,l=arr.length;i<l;++i){_90[2].call(_90[1],arr[i],i,arr);}},every:function(arr,_91,_92){return _7f(true,arr,_91,_92);},some:function(arr,_93,_94){return _7f(false,arr,_93,_94);},map:function(arr,_95,_96){var _97=_7c(arr,_96,_95);arr=_97[0];var _98=(arguments[3]?(new arguments[3]()):[]);for(var i=0,l=arr.length;i<l;++i){_98.push(_97[2].call(_97[1],arr[i],i,arr));}return _98;},filter:function(arr,_99,_9a){var _9b=_7c(arr,_9a,_99);arr=_9b[0];var _9c=[];for(var i=0,l=arr.length;i<l;++i){if(_9b[2].call(_9b[1],arr[i],i,arr)){_9c.push(arr[i]);}}return _9c;}});})();}if(!dojo._hasResource["dojo._base.declare"]){dojo._hasResource["dojo._base.declare"]=true;dojo.provide("dojo._base.declare");(function(){var d=dojo,_9d=d._mixin,op=Object.prototype,_9e=op.toString,_9f=new Function,_a0=0,_a1="constructor";function _a2(_a3,_a4){throw new Error("declare"+(_a4?" "+_a4:"")+": "+_a3);};function _a5(_a6,_a7){var _a8=[],_a9=[{cls:0,refs:[]}],_aa={},_ab=1,l=_a6.length,i=0,j,lin,_ac,top,_ad,rec,_ae,_af;for(;i<l;++i){_ac=_a6[i];if(!_ac){_a2("mixin #"+i+" is unknown. Did you use dojo.require to pull it in?",_a7);}else{if(_9e.call(_ac)!="[object Function]"){_a2("mixin #"+i+" is not a callable constructor.",_a7);}}lin=_ac._meta?_ac._meta.bases:[_ac];top=0;for(j=lin.length-1;j>=0;--j){_ad=lin[j].prototype;if(!_ad.hasOwnProperty("declaredClass")){_ad.declaredClass="uniqName_"+(_a0++);}_ae=_ad.declaredClass;if(!_aa.hasOwnProperty(_ae)){_aa[_ae]={count:0,refs:[],cls:lin[j]};++_ab;}rec=_aa[_ae];if(top&&top!==rec){rec.refs.push(top);++top.count;}top=rec;}++top.count;_a9[0].refs.push(top);}while(_a9.length){top=_a9.pop();_a8.push(top.cls);--_ab;while(_af=top.refs,_af.length==1){top=_af[0];if(!top||--top.count){top=0;break;}_a8.push(top.cls);--_ab;}if(top){for(i=0,l=_af.length;i<l;++i){top=_af[i];if(!--top.count){_a9.push(top);}}}}if(_ab){_a2("can't build consistent linearization",_a7);}_ac=_a6[0];_a8[0]=_ac?_ac._meta&&_ac===_a8[_a8.length-_ac._meta.bases.length]?_ac._meta.bases.length:1:0;return _a8;};function _b0(_b1,a,f){var _b2,_b3,_b4,_b5,_b6,_b7,_b8,opf,pos,_b9=this._inherited=this._inherited||{};if(typeof _b1=="string"){_b2=_b1;_b1=a;a=f;}f=0;_b5=_b1.callee;_b2=_b2||_b5.nom;if(!_b2){_a2("can't deduce a name to call inherited()",this.declaredClass);}_b6=this.constructor._meta;_b4=_b6.bases;pos=_b9.p;if(_b2!=_a1){if(_b9.c!==_b5){pos=0;_b7=_b4[0];_b6=_b7._meta;if(_b6.hidden[_b2]!==_b5){_b3=_b6.chains;if(_b3&&typeof _b3[_b2]=="string"){_a2("calling chained method with inherited: "+_b2,this.declaredClass);}do{_b6=_b7._meta;_b8=_b7.prototype;if(_b6&&(_b8[_b2]===_b5&&_b8.hasOwnProperty(_b2)||_b6.hidden[_b2]===_b5)){break;}}while(_b7=_b4[++pos]);pos=_b7?pos:-1;}}_b7=_b4[++pos];if(_b7){_b8=_b7.prototype;if(_b7._meta&&_b8.hasOwnProperty(_b2)){f=_b8[_b2];}else{opf=op[_b2];do{_b8=_b7.prototype;f=_b8[_b2];if(f&&(_b7._meta?_b8.hasOwnProperty(_b2):f!==opf)){break;}}while(_b7=_b4[++pos]);}}f=_b7&&f||op[_b2];}else{if(_b9.c!==_b5){pos=0;_b6=_b4[0]._meta;if(_b6&&_b6.ctor!==_b5){_b3=_b6.chains;if(!_b3||_b3.constructor!=="manual"){_a2("calling chained constructor with inherited",this.declaredClass);}while(_b7=_b4[++pos]){_b6=_b7._meta;if(_b6&&_b6.ctor===_b5){break;}}pos=_b7?pos:-1;}}while(_b7=_b4[++pos]){_b6=_b7._meta;f=_b6?_b6.ctor:_b7;if(f){break;}}f=_b7&&f;}_b9.c=f;_b9.p=pos;if(f){return a===true?f:f.apply(this,a||_b1);}};function _ba(_bb,_bc){if(typeof _bb=="string"){return this.inherited(_bb,_bc,true);}return this.inherited(_bb,true);};function _bd(cls){var _be=this.constructor._meta.bases;for(var i=0,l=_be.length;i<l;++i){if(_be[i]===cls){return true;}}return this instanceof cls;};function _bf(_c0,_c1){var _c2,i=0,l=d._extraNames.length;for(_c2 in _c1){if(_c2!=_a1&&_c1.hasOwnProperty(_c2)){_c0[_c2]=_c1[_c2];}}for(;i<l;++i){_c2=d._extraNames[i];if(_c2!=_a1&&_c1.hasOwnProperty(_c2)){_c0[_c2]=_c1[_c2];}}};function _c3(_c4,_c5){var _c6,t,i=0,l=d._extraNames.length;for(_c6 in _c5){t=_c5[_c6];if((t!==op[_c6]||!(_c6 in op))&&_c6!=_a1){if(_9e.call(t)=="[object Function]"){t.nom=_c6;}_c4[_c6]=t;}}for(;i<l;++i){_c6=d._extraNames[i];t=_c5[_c6];if((t!==op[_c6]||!(_c6 in op))&&_c6!=_a1){if(_9e.call(t)=="[object Function]"){t.nom=_c6;}_c4[_c6]=t;}}return _c4;};function _c7(_c8){_c3(this.prototype,_c8);return this;};function _c9(_ca,_cb){return function(){var a=arguments,_cc=a,a0=a[0],f,i,m,l=_ca.length,_cd;if(!(this instanceof a.callee)){return _ce(a);}if(_cb&&(a0&&a0.preamble||this.preamble)){_cd=new Array(_ca.length);_cd[0]=a;for(i=0;;){a0=a[0];if(a0){f=a0.preamble;if(f){a=f.apply(this,a)||a;}}f=_ca[i].prototype;f=f.hasOwnProperty("preamble")&&f.preamble;if(f){a=f.apply(this,a)||a;}if(++i==l){break;}_cd[i]=a;}}for(i=l-1;i>=0;--i){f=_ca[i];m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,_cd?_cd[i]:a);}}f=this.postscript;if(f){f.apply(this,_cc);}};};function _cf(_d0,_d1){return function(){var a=arguments,t=a,a0=a[0],f;if(!(this instanceof a.callee)){return _ce(a);}if(_d1){if(a0){f=a0.preamble;if(f){t=f.apply(this,t)||t;}}f=this.preamble;if(f){f.apply(this,t);}}if(_d0){_d0.apply(this,a);}f=this.postscript;if(f){f.apply(this,a);}};};function _d2(_d3){return function(){var a=arguments,i=0,f,m;if(!(this instanceof a.callee)){return _ce(a);}for(;f=_d3[i];++i){m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,a);break;}}f=this.postscript;if(f){f.apply(this,a);}};};function _d4(_d5,_d6,_d7){return function(){var b,m,f,i=0,_d8=1;if(_d7){i=_d6.length-1;_d8=-1;}for(;b=_d6[i];i+=_d8){m=b._meta;f=(m?m.hidden:b.prototype)[_d5];if(f){f.apply(this,arguments);}}};};function _d9(_da){_9f.prototype=_da.prototype;var t=new _9f;_9f.prototype=null;return t;};function _ce(_db){var _dc=_db.callee,t=_d9(_dc);_dc.apply(t,_db);return t;};d.declare=function(_dd,_de,_df){if(typeof _dd!="string"){_df=_de;_de=_dd;_dd="";}_df=_df||{};var _e0,i,t,_e1,_e2,_e3,_e4,_e5=1,_e6=_de;if(_9e.call(_de)=="[object Array]"){_e3=_a5(_de,_dd);t=_e3[0];_e5=_e3.length-t;_de=_e3[_e5];}else{_e3=[0];if(_de){if(_9e.call(_de)=="[object Function]"){t=_de._meta;_e3=_e3.concat(t?t.bases:_de);}else{_a2("base class is not a callable constructor.",_dd);}}else{if(_de!==null){_a2("unknown base class. Did you use dojo.require to pull it in?",_dd);}}}if(_de){for(i=_e5-1;;--i){_e0=_d9(_de);if(!i){break;}t=_e3[i];(t._meta?_bf:_9d)(_e0,t.prototype);_e1=new Function;_e1.superclass=_de;_e1.prototype=_e0;_de=_e0.constructor=_e1;}}else{_e0={};}_c3(_e0,_df);t=_df.constructor;if(t!==op.constructor){t.nom=_a1;_e0.constructor=t;}for(i=_e5-1;i;--i){t=_e3[i]._meta;if(t&&t.chains){_e4=_9d(_e4||{},t.chains);}}if(_e0["-chains-"]){_e4=_9d(_e4||{},_e0["-chains-"]);}t=!_e4||!_e4.hasOwnProperty(_a1);_e3[0]=_e1=(_e4&&_e4.constructor==="manual")?_d2(_e3):(_e3.length==1?_cf(_df.constructor,t):_c9(_e3,t));_e1._meta={bases:_e3,hidden:_df,chains:_e4,parents:_e6,ctor:_df.constructor};_e1.superclass=_de&&_de.prototype;_e1.extend=_c7;_e1.prototype=_e0;_e0.constructor=_e1;_e0.getInherited=_ba;_e0.inherited=_b0;_e0.isInstanceOf=_bd;if(_dd){_e0.declaredClass=_dd;d.setObject(_dd,_e1);}if(_e4){for(_e2 in _e4){if(_e0[_e2]&&typeof _e4[_e2]=="string"&&_e2!=_a1){t=_e0[_e2]=_d4(_e2,_e3,_e4[_e2]==="after");t.nom=_e2;}}}return _e1;};d.safeMixin=_c3;})();}if(!dojo._hasResource["dojo._base.connect"]){dojo._hasResource["dojo._base.connect"]=true;dojo.provide("dojo._base.connect");dojo._listener={getDispatcher:function(){return function(){var ap=Array.prototype,c=arguments.callee,ls=c._listeners,t=c.target,r=t&&t.apply(this,arguments),i,_e7=[].concat(ls);for(i in _e7){if(!(i in ap)){_e7[i].apply(this,arguments);}}return r;};},add:function(_e8,_e9,_ea){_e8=_e8||dojo.global;var f=_e8[_e9];if(!f||!f._listeners){var d=dojo._listener.getDispatcher();d.target=f;d._listeners=[];f=_e8[_e9]=d;}return f._listeners.push(_ea);},remove:function(_eb,_ec,_ed){var f=(_eb||dojo.global)[_ec];if(f&&f._listeners&&_ed--){delete f._listeners[_ed];}}};dojo.connect=function(_ee,_ef,_f0,_f1,_f2){var a=arguments,_f3=[],i=0;_f3.push(dojo.isString(a[0])?null:a[i++],a[i++]);var a1=a[i+1];_f3.push(dojo.isString(a1)||dojo.isFunction(a1)?a[i++]:null,a[i++]);for(var l=a.length;i<l;i++){_f3.push(a[i]);}return dojo._connect.apply(this,_f3);};dojo._connect=function(_f4,_f5,_f6,_f7){var l=dojo._listener,h=l.add(_f4,_f5,dojo.hitch(_f6,_f7));return [_f4,_f5,h,l];};dojo.disconnect=function(_f8){if(_f8&&_f8[0]!==undefined){dojo._disconnect.apply(this,_f8);delete _f8[0];}};dojo._disconnect=function(obj,_f9,_fa,_fb){_fb.remove(obj,_f9,_fa);};dojo._topics={};dojo.subscribe=function(_fc,_fd,_fe){return [_fc,dojo._listener.add(dojo._topics,_fc,dojo.hitch(_fd,_fe))];};dojo.unsubscribe=function(_ff){if(_ff){dojo._listener.remove(dojo._topics,_ff[0],_ff[1]);}};dojo.publish=function(_100,_101){var f=dojo._topics[_100];if(f){f.apply(this,_101||[]);}};dojo.connectPublisher=function(_102,obj,_103){var pf=function(){dojo.publish(_102,arguments);};return _103?dojo.connect(obj,_103,pf):dojo.connect(obj,pf);};}if(!dojo._hasResource["dojo._base.Deferred"]){dojo._hasResource["dojo._base.Deferred"]=true;dojo.provide("dojo._base.Deferred");(function(){var _104=function(){};var _105=Object.freeze||function(){};dojo.Deferred=function(_106){var _107,_108,_109,_10a,_10b;var _10c=(this.promise={});function _10d(_10e){if(_108){throw new Error("This deferred has already been resolved");}_107=_10e;_108=true;_10f();};function _10f(){var _110;while(!_110&&_10b){var _111=_10b;_10b=_10b.next;if((_110=(_111.progress==_104))){_108=false;}var _112=(_109?_111.error:_111.resolved);if(_112){try{var _113=_112(_107);if(_113&&typeof _113.then==="function"){_113.then(dojo.hitch(_111.deferred,"resolve"),dojo.hitch(_111.deferred,"reject"));continue;}var _114=_110&&_113===undefined;if(_110&&!_114){_109=_113 instanceof Error;}_111.deferred[_114&&_109?"reject":"resolve"](_114?_107:_113);}catch(e){_111.deferred.reject(e);}}else{if(_109){_111.deferred.reject(_107);}else{_111.deferred.resolve(_107);}}}};this.resolve=this.callback=function(_115){this.fired=0;this.results=[_115,null];_10d(_115);};this.reject=this.errback=function(_116){_109=true;this.fired=1;_10d(_116);this.results=[null,_116];if(!_116||_116.log!==false){(dojo.config.deferredOnError||function(x){console.error(x);})(_116);}};this.progress=function(_117){var _118=_10b;while(_118){var _119=_118.progress;_119&&_119(_117);_118=_118.next;}};this.addCallbacks=function(_11a,_11b){this.then(_11a,_11b,_104);return this;};this.then=_10c.then=function(_11c,_11d,_11e){var _11f=_11e==_104?this:new dojo.Deferred(_10c.cancel);var _120={resolved:_11c,error:_11d,progress:_11e,deferred:_11f};if(_10b){_10a=_10a.next=_120;}else{_10b=_10a=_120;}if(_108){_10f();}return _11f.promise;};var _121=this;this.cancel=_10c.cancel=function(){if(!_108){var _122=_106&&_106(_121);if(!_108){if(!(_122 instanceof Error)){_122=new Error(_122);}_122.log=false;_121.reject(_122);}}};_105(_10c);};dojo.extend(dojo.Deferred,{addCallback:function(_123){return this.addCallbacks(dojo.hitch.apply(dojo,arguments));},addErrback:function(_124){return this.addCallbacks(null,dojo.hitch.apply(dojo,arguments));},addBoth:function(_125){var _126=dojo.hitch.apply(dojo,arguments);return this.addCallbacks(_126,_126);},fired:-1});})();dojo.when=function(_127,_128,_129,_12a){if(_127&&typeof _127.then==="function"){return _127.then(_128,_129,_12a);}return _128(_127);};}if(!dojo._hasResource["dojo._base.json"]){dojo._hasResource["dojo._base.json"]=true;dojo.provide("dojo._base.json");dojo.fromJson=function(_12b){return eval("("+_12b+")");};dojo._escapeString=function(_12c){return ("\""+_12c.replace(/(["\\])/g,"\\$1")+"\"").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r");};dojo.toJsonIndentStr="\t";dojo.toJson=function(it,_12d,_12e){if(it===undefined){return "undefined";}var _12f=typeof it;if(_12f=="number"||_12f=="boolean"){return it+"";}if(it===null){return "null";}if(dojo.isString(it)){return dojo._escapeString(it);}var _130=arguments.callee;var _131;_12e=_12e||"";var _132=_12d?_12e+dojo.toJsonIndentStr:"";var tf=it.__json__||it.json;if(dojo.isFunction(tf)){_131=tf.call(it);if(it!==_131){return _130(_131,_12d,_132);}}if(it.nodeType&&it.cloneNode){throw new Error("Can't serialize DOM nodes");}var _133=_12d?" ":"";var _134=_12d?"\n":"";if(dojo.isArray(it)){var _135=dojo.map(it,function(_136){var _137=_130(_136,_12d,_132);if(typeof _137!="string"){_137="undefined";}return _134+_132+_137;});return "["+_135.join(","+_133)+_134+_12e+"]";}if(_12f=="function"){return null;}var _138=[],_139;for(_139 in it){var _13a,val;if(typeof _139=="number"){_13a="\""+_139+"\"";}else{if(typeof _139=="string"){_13a=dojo._escapeString(_139);}else{continue;}}val=_130(it[_139],_12d,_132);if(typeof val!="string"){continue;}_138.push(_134+_132+_13a+":"+_133+val);}return "{"+_138.join(","+_133)+_134+_12e+"}";};}if(!dojo._hasResource["dojo._base.Color"]){dojo._hasResource["dojo._base.Color"]=true;dojo.provide("dojo._base.Color");(function(){var d=dojo;dojo.Color=function(_13b){if(_13b){this.setColor(_13b);}};dojo.Color.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:d.config.transparentColor||[255,255,255]};dojo.extend(dojo.Color,{r:255,g:255,b:255,a:1,_set:function(r,g,b,a){var t=this;t.r=r;t.g=g;t.b=b;t.a=a;},setColor:function(_13c){if(d.isString(_13c)){d.colorFromString(_13c,this);}else{if(d.isArray(_13c)){d.colorFromArray(_13c,this);}else{this._set(_13c.r,_13c.g,_13c.b,_13c.a);if(!(_13c instanceof d.Color)){this.sanitize();}}}return this;},sanitize:function(){return this;},toRgb:function(){var t=this;return [t.r,t.g,t.b];},toRgba:function(){var t=this;return [t.r,t.g,t.b,t.a];},toHex:function(){var _13d=d.map(["r","g","b"],function(x){var s=this[x].toString(16);return s.length<2?"0"+s:s;},this);return "#"+_13d.join("");},toCss:function(_13e){var t=this,_13f=t.r+", "+t.g+", "+t.b;return (_13e?"rgba("+_13f+", "+t.a:"rgb("+_13f)+")";},toString:function(){return this.toCss(true);}});dojo.blendColors=function(_140,_141,_142,_143){var t=_143||new d.Color();d.forEach(["r","g","b","a"],function(x){t[x]=_140[x]+(_141[x]-_140[x])*_142;if(x!="a"){t[x]=Math.round(t[x]);}});return t.sanitize();};dojo.colorFromRgb=function(_144,_145){var m=_144.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return m&&dojo.colorFromArray(m[1].split(/\s*,\s*/),_145);};dojo.colorFromHex=function(_146,_147){var t=_147||new d.Color(),_148=(_146.length==4)?4:8,_149=(1<<_148)-1;_146=Number("0x"+_146.substr(1));if(isNaN(_146)){return null;}d.forEach(["b","g","r"],function(x){var c=_146&_149;_146>>=_148;t[x]=_148==4?17*c:c;});t.a=1;return t;};dojo.colorFromArray=function(a,obj){var t=obj||new d.Color();t._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));if(isNaN(t.a)){t.a=1;}return t.sanitize();};dojo.colorFromString=function(str,obj){var a=d.Color.named[str];return a&&d.colorFromArray(a,obj)||d.colorFromRgb(str,obj)||d.colorFromHex(str,obj);};})();}if(!dojo._hasResource["dojo._base"]){dojo._hasResource["dojo._base"]=true;dojo.provide("dojo._base");}if(!dojo._hasResource["dojox.jtlc.CHT.scanner"]){dojo._hasResource["dojox.jtlc.CHT.scanner"]=true;dojo.provide("dojox.jtlc.CHT.scanner");dojox.jtlc._beginsWith=function(a,b){return a.substr(0,b.length)==b;};dojox.jtlc._hasPrefix=function(s,_14a,_14b){for(var i=0;i<_14a.length;++i){if(dojox.jtlc._beginsWith(s,_14b?_14b(_14a[i]):_14a[i])){return _14a[i];}}return null;};dojox.jtlc._tokenizeCHT=function(_14c){var dj=dojox.jtlc,_14d=[{prefix:"<!--",suffix:"-->",allow:["-->"],extra:"￼"},{prefix:"<?",suffix:"?>",allow:["\"","'","?>","<!--"],markup:true,extra:"￿"},{prefix:"<",suffix:">",allow:["\"","'","{{",">","<!--"],extra:"￾"},{prefix:"{{",suffix:"}}",allow:["\"","'","(","[","{","}}"],substitution:true,extra:"�"},{prefix:"{",suffix:"}",allow:["\"","'","(","[","{","}"]},{prefix:"(",suffix:")",allow:["\"","'","(","[","{",")"]},{prefix:"[",suffix:"]",allow:["\"","'","(","[","{","]"]},{prefix:"\"",suffix:"\"",allow:["\"","\\"],inSubstitution:true},{prefix:"\"",suffix:"\"",allow:["\"","\\","{{"],inSubstitution:false},{prefix:"'",suffix:"'",allow:["'","\\"],inSubstitution:true},{prefix:"'",suffix:"'",allow:["'","\\","{{"],inSubstitution:false},{prefix:"\\",escape:true}],_14e={suffix:"</script",allow:["\"","'","{{","</script"]},_14f=[{allow:["<!--","<?","<","{{"]}],_150=0,_151="",_152=false,_153=_14c.replace(/(?:<(?:[?]\s*)?\/?[a-z_]\w*|<!--|-->|[?]?>|[{][{]?|[}][}]?|["'\[\]()\\\ufeff])/ig,function(s,_154,_155){if(s===String.fromCharCode(65279)){return "";}if(_14f[0].escape){_14f.shift();if(_154==lp+1){return s;}}var _156=dj._hasPrefix(s.toLowerCase(),_14f[0].allow),lp=_150;_150=_154+s.length;if(_156){if(_156==_14f[0].suffix){var _157=_14f.shift();if(_157.substitution){_152=false;}if(_157!==_14e){if(!_157.markup&&s.charAt(s.length-1)==">"&&_151=="script"){_14f.unshift(_14e);return s;}return (_157.substitution?"":s)+(_157.extra||"");}}if(_156=dj._hasPrefix(_156,_14d,function(b){if("inSubstitution" in b&&b.inSubstitution!=_152){return "￿";}else{return b.prefix;}})){if(_156.escape){return s;}if(s.charAt(0)=="<"){_151=/^<(\/?[a-z_]*)/i.exec(s)[1].toLowerCase();}_14f.unshift(_156);if(_156.substitution){_152=true;}return (_151!="/script"&&_156.extra||"")+(_156.substitution?"":s);}}return s;}).split(/(?:\ufffc[\s\S]*?\ufffc|\ufffe|\s*\uffff\s*)/);if(_14f.length>1){throw Error("Unbalanced delimiters -- expected "+dj.stringLiteral(_14f[0].suffix));}return _153;};dojox.jtlc._CHTElement=function(_158){this.text=_158;if(/^<[?]\s*\/([a-z_]\w*(?:\s*[.]\s*[a-z_]\w*)*)[\s\S]*?[?]>$/i.exec(_158)){this.closeTag=RegExp.$1.split(/\s*[.]\s*/).join(".");}else{if(/^<[?]\s*([a-z_]\w*(?:\s*[.]\s*[a-z_]\w*)*)([\s\S]*?)\s*[?]>$/i.exec(_158)){var _159=RegExp.$2;this.openTag=RegExp.$1.split(/\s*[.]\s*/).join(".");this.kwarg={};if(/^\s+(?![a-z]\w*=)(["']?)((?:\\.|[^\\])*?)\1(?=\s|$)/i.exec(_159)){this.arg=RegExp.$2;_159=_159.substr(RegExp.lastMatch.length);}while(_159.length&&/^\s+([a-z_]\w*)=/i.exec(_159)){_159=_159.substr(RegExp.lastMatch.length);var _15a=RegExp.$1;if(!/^(["']?)((?:\\.|[^\\])*?)\1(?=\s|$)/.exec(_159)){break;}_159=_159.substr(RegExp.lastMatch.length);this.kwarg[_15a]=RegExp.$2;}if(_159.length){throw Error("Invalid CHT tag: "+_158);}}else{throw Error("Invalid CHT tag: "+_158);}}};}if(!dojo._hasResource["dojox.json.query"]){dojo._hasResource["dojox.json.query"]=true;dojo.provide("dojox.json.query");(function(){dojox.json._slice=function(_15b,_15c,_15d,_15e){var _15f=_15b.length,_160=[];_15d=_15d||_15f;_15c=(_15c<0)?Math.max(0,_15c+_15f):Math.min(_15f,_15c);_15d=(_15d<0)?Math.max(0,_15d+_15f):Math.min(_15f,_15d);for(var i=_15c;i<_15d;i+=_15e){_160.push(_15b[i]);}return _160;};dojox.json._find=function e(_161,_162){var _163=[];function _164(_165){if(_162){if(_162===true&&!(_165 instanceof Array)){_163.push(_165);}else{if(_165[_162]){_163.push(_165[_162]);}}}for(var i in _165){var _166=_165[i];if(!_162){_163.push(_166);}else{if(_166&&typeof _166=="object"){_164(_166);}}}};if(_162 instanceof Array){if(_162.length==1){return _161[_162[0]];}for(var i=0;i<_162.length;i++){_163.push(_161[_162[i]]);}}else{_164(_161);}return _163;};dojox.json._distinctFilter=function(_167,_168){var _169=[];var _16a={};for(var i=0,l=_167.length;i<l;++i){var _16b=_167[i];if(_168(_16b,i,_167)){if((typeof _16b=="object")&&_16b){if(!_16b.__included){_16b.__included=true;_169.push(_16b);}}else{if(!_16a[_16b+typeof _16b]){_16a[_16b+typeof _16b]=true;_169.push(_16b);}}}}for(i=0,l=_169.length;i<l;++i){if(_169[i]){delete _169[i].__included;}}return _169;};dojox.json.query=function(_16c,obj){var _16d=0;var str=[];_16c=_16c.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(t){_16d+=t=="["?1:t=="]"?-1:0;return (t=="]"&&_16d>0)?"`]":(t.charAt(0)=="\""||t.charAt(0)=="'")?"`"+(str.push(t)-1):t;});var _16e="";function _16f(_170){_16e=_170+"("+_16e;};function _171(t,a,b,c,d,e,f,g){return str[g].match(/[\*\?]/)||f=="~"?"/^"+str[g].substring(1,str[g].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+(f=="~"?"$/i":"$/")+".test("+a+")":t;};_16c.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw new Error("Unsafe function call");});_16c=_16c.replace(/([^=]=)([^=])/g,"$1=$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(t){return t.charAt(0)=="."?t:t=="@"?"$obj":(t.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+t;}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(t,a,b){var _172=t.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/);if(_172){var _173="";if(t.match(/^\./)){_16f("dojox.json._find");_173=",true)";}_16f(_172[1].match(/\=/)?"dojo.map":_172[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter");return _173+",function($obj){return "+_172[2]+"})";}_172=t.match(/^\[\s*([\/\\].*)\]/);if(_172){return ".concat().sort(function(a,b){"+_172[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(t,a,b){return "var av= "+b.replace(/\$obj/,"a")+",bv= "+b.replace(/\$obj/,"b")+";if(av>bv||bv==null){return "+(a=="/"?1:-1)+";}\n"+"if(bv>av||av==null){return "+(a=="/"?-1:1)+";}\n";})+"return 0;})";}_172=t.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/);if(_172){_16f("dojox.json._slice");return ","+(_172[1]||0)+","+(_172[2]||0)+","+(_172[3]||1)+")";}if(t.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)){_16f("dojox.json._find");return (t.charAt(1)=="."?",'"+b+"'":t.match(/,/)?","+t:"")+")";}return t;}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,_171).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(t,a,b,c,d,e,f,g){return _171(t,c,d,e,f,g,b,a);});_16c=_16e+(_16c.charAt(0)=="$"?"":"$")+_16c.replace(/`([0-9]+|\])/g,function(t,a){return a=="]"?"]":str[a];});var _174=eval("1&&function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj=$;return "+_16c+"}");for(var i=0;i<arguments.length-1;i++){arguments[i]=arguments[i+1];}return obj?_174.apply(this,arguments):_174;};})();}if(!dojo._hasResource["dojox.jtlc.prettyPrint"]){dojo._hasResource["dojox.jtlc.prettyPrint"]=true;dojo.provide("dojox.jtlc.prettyPrint");dojox.jtlc.prettyPrint=function(js){var _175={"/*":{suffix:"*/",allow:"|*/"},"//":{suffix:"\n",allow:"|\n"},"\"":{suffix:"\"",allow:"|\""},"'":{suffix:"'",allow:"|'"},"for(":{suffix:")",allow:"|(|)"},"(":{suffix:")",allow:"|(|)"}},_176=[{allow:"|/*|*/|//|\"|'|;|{|}|\n|for("}],_177="\t";return ("\n"+js).replace(/(?:\/\*|\*\/|\/\/|[;{}]\s*|["')\n]|\\.|(?:for)?\()/g,function(_178,_179,_17a){var _17b=_179+_178.length,_17c=/\s+$/.exec(_178);if(_17c&&_17c[0]!=_178){_178=_178.substr(_178,_178.length-_17c[0].length);}if(_178.substr(0,1)=="\\"||_176[0].allow.indexOf("|"+_178)<0){return _17a.substring(_179,_17b);}if(_176[0].suffix===_178){_176.shift();}else{if(_178 in _175){_176.unshift(_175[_178]);}}if(_178=="\n"){return _178+_177;}if("{};".indexOf(_178)<0){return _178;}var _17d="",_17e="\n"+_177;if(_178=="{"){_177+="\t";_17e+="\t";}else{if(_178=="}"){_177=_177.substr(0,_177.length-1);if("};".indexOf(_17a.substr(_179-1,1))<0){_17d="\n"+_177+"\t";}if(");,".indexOf(_17a.substr(_17b,1))>=0){_17e="";}else{_17e="\n"+_177;}}}return _17d+_178+_17e;}).replace(/\t(\}|$)/g,"$1");};}if(!dojo._hasResource["dojox.jtlc.compile"]){dojo._hasResource["dojox.jtlc.compile"]=true;dojo.provide("dojox.jtlc.compile");if(dojo.config.isDebug||dojo.config.jtlcIsReadable){}dojox.jtlc._varNameLetters="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";dojox.jtlc._varName=function(n){var r=dojox.jtlc._varNameLetters.charAt(n%52);n=Math.floor(n/52);while(n>0){r+=dojox.jtlc._varNameLetters.charAt(n%62);n=Math.floor(n/62);}return r;};dojox.jtlc.stringLiteral=function(s){return "\""+s.toString().replace(/[\\"\r\n\t]/g,function(x){return {"\\":"\\\\","\"":"\\\"","\n":"\\n","\t":"\\t","\r":""}[x];})+"\"";};dojox.jtlc.arrayAppend=function(_17f,_180){_180.unshift(0);_180.unshift(_17f.length);_17f.splice.apply(_17f,_180);};dojox.jtlc._replaceWithinJavascriptAll=function(s,_181,_182){return s.replace(/((?:.|[\r\n])*?)((["']).*?[^\\]?\2|$)/g,function(_183,_184,_185){return _184.replace(_181,_182)+_185;});};dojox.jtlc._replaceWithinJavascriptOnce=function(s,_186,_187){var _188=false;return s.replace(/((?:.|[\r\n])*?)((["']).*?[^\\]?\2|$)/g,function(_189,_18a,_18b){if(_188){return _18a+_18b;}var v=_18a.replace(_186,_187);if(v!=_18a){_188=true;}return v+_18b;});};dojox.jtlc.replaceWithinJavascript=function(s,_18c,_18d){return _18c instanceof RegExp&&_18c.global?dojox.jtlc._replaceWithinJavascriptAll(s,_18c,_18d):dojox.jtlc._replaceWithinJavascriptOnce(s,_18c,_18d);};dojox.jtlc._eval=function(x){return eval(x);};dojox.jtlc._optimizeExtraBrackets=function(_18e){var _18f;while((_18f=dojox.jtlc.replaceWithinJavascript(_18e,/([^a-z0-9_]|^)\(((?:_|[a-z])[a-z0-9]*)\)/ig,"$1$2"))!=_18e){_18e=_18f;}return _18e;};dojox.jtlc.compile=function(tpl,_190,_191){var _192={globals:{names:[],values:[]},locals:[],max_local:0,code:["var $=arguments"],expressions:[],optimizers:dojo.config.isDebug||dojo.config.jtlcIsReadable?{"_optimizeExtraBrackets":dojox.jtlc._optimizeExtraBrackets}:{}};if(_191){_192=dojo.mixin({},_191,_192);}_192=dojo.delegate(_190,_192);_192.compileArguments={language:_190,options:_191};_192.compileBody(tpl);while(_192.locals.length<_192.max_local){_192.addLocal();}if(_192.max_local){_192.code[0]+=","+_192.locals.join(",");}_192.code[0]+=";";_192.code.push("return "+_192.popExpression()+";");var _193=_192.code.join("");_193=_192.optimize(_193);if((dojo.config.isDebug||dojo.config.jtlcIsReadable)&&!dojo.isIE){_193=dojox.jtlc.prettyPrint(_193);}return _192.decorate(_192.makeClosure(_193).apply(null,_192.globals.values));};dojo.declare("dojox.jtlc.Language",null,{singletonQuery:{failOnNoResults:false,failOnManyResults:false},elideNulls:false,failOnDuplicateKeys:false,constructor:function(_194){if(_194){dojo.mixin(this,_194);for(var i in _194){if(_194.hasOwnProperty(i)&&i in this.constructor.prototype){this[i]=dojo.mixin({},this.constructor.prototype[i],this[i]);}}}},compileBody:function(tpl){return this.compile(tpl);},compile:function(tpl){var t=typeof (tpl);if(t in this){this[t](tpl);}else{throw Error("Unexpected "+t+" value in template: "+tpl.toString());}},optimize:function(_195){for(var i in this.optimizers){_195=this.optimizers[i].call(this,_195);}return _195;},addGlobal:function(_196){for(var i=0;i<this.globals.values.length;++i){if(this.globals.values[i]===_196){return this.globals.names[i];}}var _197="_"+dojox.jtlc._varName(this.globals.names.length);this.globals.names.push(_197);this.globals.values.push(_196);return _197;},addLocal:function(){var _198=dojox.jtlc._varName(this.locals.length);this.locals.push(_198);if(this.locals.length>this.max_local){this.max_local=this.locals.length;}return _198;},popExpression:function(){var _199=this.expressions.pop();if(this.locals.length&&this.locals[this.locals.length-1]===_199){this.locals.pop();}return _199;},decorate:function(f){return f;},makeClosure:dojo.isIE?function(_19a){return new Function(this.globals.names,"function $self(){"+_19a+"} return $self;");}:new Function("inner_body","return dojox.jtlc._eval( \"(function(\" + this.globals.names.join(\",\") + \"){function $self(){\" + inner_body + \"} return $self;})\" +\t\t\t\t\t\t  (this.sourceUrl ? \"\\r\\n//@ sourceURL=\" + this.sourceUrl : \"\") );"),current_input:"$[0]",accumulated:function(_19b,_19c,_19d,_19e){var _19f=this.sink,_1a0=this.loop;if(_19f!==_19c){this.sink=_19c;if(_19b){this.code.push(this.sink.accumulator+_19b);}}if(_19d!==_1a0){if(_19d){this.loop=_19d;}else{delete this.loop;}}var _1a1=this.hasOwnProperty("current_input")?this.current_input:null;if(_1a0&&_19d!==_1a0&&_1a0.lockedItem){this.current_input="("+_1a0.item()+")";}_19e.call(this);if(_1a1!==(this.hasOwnProperty("current_input")?this.current_input:null)){if(_1a1){this.current_input=_1a1;}else{delete this.current_input;}}if(_19d!==_1a0){if(_1a0){this.loop=_1a0;}else{delete this.loop;}}if(_19f!==_19c){this.expressions.push(this.sink.accumulator);if(_19f){this.sink=_19f;}else{delete this.sink;}}},nonAccumulated:function(_1a2,_1a3){var _1a4=this.loop;if(this.loop){delete this.loop;}var _1a5=this.hasOwnProperty("current_input")?this.current_input:null;if(_1a3){this.current_input=_1a3;}else{if(_1a4&&_1a4.lockedItem){this.current_input="("+_1a4.item()+")";}}_1a2.call(this);if(_1a5!==(this.hasOwnProperty("current_input")?this.current_input:null)){if(_1a5){this.current_input=_1a5;}else{delete this.current_input;}}if(_1a4){this.loop=_1a4;}},generator:function(_1a6){if(!_1a6){_1a6=this.current_input;}if(this.loop){if(!this.loop.started()){this.loop.begin(_1a6);}this.expressions.push(this.loop.item());}else{this.expressions.push(_1a6);}},object:function(tpl){if(tpl===null){this.nullValue();}else{if("compile" in tpl){tpl.compile.call(this,tpl);}else{if(tpl.constructor===Array){this.array(tpl);}else{if(tpl.constructor!==Object){this.unknownObject(tpl);}else{this.dictionary(tpl);}}}}},dictionary:function(tpl){this.accumulated("={};",new dojox.jtlc._DictionarySink(this),null,function(){for(var i in tpl){if(tpl.hasOwnProperty(i)){this.sink.key=dojox.jtlc.stringLiteral(i);this.compile(tpl[i]);this.sink.append();}}});},array:function(tpl){this.accumulated("=[];",new dojox.jtlc._ArraySink(this),new dojox.jtlc._Loop(this),function(){for(var i=0;i<tpl.length;++i){if(tpl.hasOwnProperty(i)){this.compile(tpl[i]);this.sink.append();}}});},unknownObject:function(tpl){throw Error("Unexpected object in the template: "+tpl.toString());},nullValue:function(){throw Error("Unexpected null value in the template");}});dojo.declare("dojox.jtlc._Sink",null,{constructor:function(_1a7){this.compiler=_1a7;this.loops_to_close=[];},closeLoops:function(){while(this.loops_to_close.length>0){this.loops_to_close.pop().end();}}});dojo.declare("dojox.jtlc._DictionarySink",dojox.jtlc._Sink,{constructor:function(){this.accumulator=this.compiler.addLocal();},append:function(){if(this.compiler.elideNulls||this.compiler.failOnDuplicateKeys){this.compiler._dictionaryAppend=this.compiler._dictionaryAppend||this.compiler.addGlobal(new Function("d","k","v",(this.compiler.failOnDuplicateKeys?"if( k in d ) throw Error( 'Duplicate key ' + dojox.jtlc.stringLiteral(k) );":"")+(this.compiler.elideNulls?"if( v !== null )":"")+"d[k]=v;"));this.compiler.code.push(this.compiler._dictionaryAppend+"("+this.accumulator+","+this.key+","+this.compiler.popExpression()+");");}else{this.compiler.code.push(this.accumulator+"["+this.key+"]="+this.compiler.popExpression()+";");}this.closeLoops();}});dojo.declare("dojox.jtlc._ArraySink",dojox.jtlc._Sink,{constructor:function(){this.accumulator=this.compiler.addLocal();},append:function(){if(!("_arrayOptimizer" in this.compiler.optimizers)){this.compiler.optimizers._arrayOptimizer=this.optimize;}if(this.compiler.elideNulls){this.compiler._arrayAppend=this.compiler._arrayAppend||this.compiler.addGlobal(function(a,v){if(v){a.push(v);}});this.compiler.code.push(this.compiler._arrayAppend+"("+this.accumulator+","+this.compiler.popExpression()+");");}else{this.compiler.code.push(this.accumulator+".push("+this.compiler.popExpression()+");");}this.closeLoops();},optimize:function(_1a8){var _1a9=this;return dojox.jtlc.replaceWithinJavascript(_1a8,/for\(([a-zA-Z][a-zA-Z0-9]*)=0;\1<([a-zA-Z][a-zA-Z0-9]*).length;\+\+\1\){([a-zA-Z][a-zA-Z0-9]*)\.push\(\2\[\1\]\);}/g,function(_1aa,_1ab,src,dst){var g=_1a9.addGlobal(dojox.jtlc.arrayAppend);return g+"("+dst+","+src+")";});}});dojo.declare("dojox.jtlc._Loop",null,{constructor:function(_1ac){this.compiler=_1ac;},begin:function(_1ad){if(this._items){throw Error("Internal error: loop initialized twice");}this._items=this.compiler.addLocal();this._i=this.compiler.addLocal();this.compiler.code.push((_1ad===this._items?"":this._items+"="+_1ad+";")+"for("+this._i+"=0;"+this._i+"<"+this._items+".length;++"+this._i+"){");if(this.compiler.sink){this.compiler.sink.loops_to_close.push(this);}},item:function(){if(!this._items){throw Error("Internal error: loop not initialized");}return this.lockedItem||this._items+"["+this._i+"]";},lockItem:function(_1ae){if(!this._items){throw Error("_Loop.lockItem() called out of sequence");}var _1af=this.item();if(_1ae!=_1af&&"("+_1ae+")"!=_1af){this.lockedItemVar=this.lockedItemVar||this.compiler.addLocal();if(this.lockedItemVar!=_1ae){this.compiler.code.push(this.lockedItemVar+"="+_1ae+";");}this.lockedItem="("+this.lockedItemVar+")";}else{this.lockedItem=_1ae;}},count:function(){if(!this._items){throw Error("Internal error: loop not initialized");}return "("+this._i+")";},end:function(){if(!this._items){throw Error("Internal error: loop not initialized");}delete this._items;delete this._i;this.compiler.code.push("}");if(this.lockedItemVar){this.compiler.locals.pop();}this.compiler.locals.pop();this.compiler.locals.pop();},started:function(){return !!this._items;}});}if(!dojo._hasResource["dojox.jtlc.tags"]){dojo._hasResource["dojox.jtlc.tags"]=true;dojo.provide("dojox.jtlc.tags");dojox.jtlc._copyArguments=function(_1b0,_1b1){return Array.prototype.slice.call(_1b0,_1b1||0);};dojox.jtlc.tags={};dojox.jtlc._declareTag=function(_1b2,_1b3,_1b4){var _1b5=typeof _1b3==="function"?_1b3:dojo.declare(null,_1b3);this.tags["_"+_1b2]=_1b5;this.tags[_1b2]=_1b4?_1b4(_1b5):function(){var t=dojo.delegate(_1b5.prototype);_1b5.apply(t,arguments);return t;};};dojox.jtlc._declareTag("many",{constructor:function(_1b6){if(arguments.length!=1){throw Error("many() requires exactly one argument");}this.template=_1b6;},compile:function(_1b7){if(!this.sink){throw Error("Cannot use many() outside the context of an array or an object literal");}if(this.loop){this.compile(_1b7.template);}else{this.accumulated(null,this.sink,new dojox.jtlc._Loop(this),function(){this.compile(_1b7.template);});}}});dojox.jtlc._declareTag("one",{constructor:function(_1b8){if(arguments.length!=1){throw Error("one() requires exactly one argument");}this.template=_1b8;},compile:function(_1b9){if(!this.loop){this.compile(_1b9.template);}else{this.nonAccumulated(function(){this.compile(_1b9.template);});}}});dojox.jtlc._declareTag("quote",{constructor:function(_1ba){if(arguments.length!=1){throw Error("quote() requires exactly one argument");}this.value=_1ba;},compile:function(_1bb){switch(typeof _1bb.value){case "boolean":case "number":this.expressions.push(_1bb.value);break;case "string":this.expressions.push(dojox.jtlc.stringLiteral(_1bb.value.toString()));break;default:this.expressions.push(this.addGlobal(_1bb.value));}}});dojox.jtlc._declareTag("current",{compile:function(){this.generator();}});dojox.jtlc._declareTag("arg",{constructor:function(_1bc){if(arguments.length!=1){throw Error("arg() requires exactly one argument");}this.index=_1bc;},compile:function(_1bd){this.expressions.push("$["+_1bd.index.toString()+"]");}});dojox.jtlc._declareTag("acc",{constructor:function(_1be){if(arguments.length!=1){throw Error("tpl() requires exactly one argument");}this.arg=_1be;},compile:function(_1bf){this.compile(_1bf.arg);var _1c0=this.popExpression(),t=this.addLocal();if(t!=_1c0){this.code.push(t+"="+_1c0+";");}this.expressions.push(t);}});dojox.jtlc._declareTag("replace",{constructor:function(_1c1,arg){if(typeof _1c1!=="string"){throw Error("replace() expects formatting string, not "+_1c1.toString());}this.format=_1c1;if(arg){this.arg=arg;}},compile:function(_1c2){this._replaceFunction=this._replaceFunction||this.addGlobal(this.replaceLanguage);if(_1c2.arg){this.compile(_1c2.arg);}else{this.generator();}this.expressions.push(this._replaceFunction+"("+dojox.jtlc.stringLiteral(_1c2.format)+","+this.popExpression()+")");}});dojox.jtlc._declareTag("each",{constructor:function(_1c3,_1c4){this.inner=_1c3;this.outer=_1c4;},compile:function(_1c5){if(!this.loop){throw Error("each() is never a singleton, wrap it in many() or []");}if(this.loop.started()){throw Error("each() used in a wrong context");}this.compile(_1c5.outer);if(!this.loop.started()){throw Error("All arguments of each() must be generators");}this.loop.lockItem(this.popExpression());this.accumulated(null,this.sink,new dojox.jtlc._Loop(this),function(){this.compile(_1c5.inner);});}},function(cls){return function(){if(arguments.length==0){throw Error("each() requires at least one argument");}else{if(arguments.length==1){return new cls(arguments[0],dojox.jtlc.tags.current());}else{var _1c6=arguments[arguments.length-1];for(var i=arguments.length-2;i>=0;--i){_1c6=new cls(arguments[i],_1c6);}return _1c6;}}};});dojo.declare("dojox.jtlc._MultiArgTag",null,{constructor:function(){if(arguments.length>1){this.args=dojox.jtlc._copyArguments(arguments,1);}else{this.args=[dojox.jtlc.tags.current()];}},argumentList:function(_1c7){var n=_1c7.args.length,r=[];while(n--){r.push(this.popExpression());}return r.join(",");},compileArgs:function(_1c8,_1c9){this.nonAccumulated(function(){for(var i=_1c8.args.length-1;i>=(_1c9?1:0);--i){this.compile(_1c8.args[i]);}});if(_1c9){this.compile(_1c8.args[0]);}}});dojox.jtlc._declareTag("expr",dojo.declare(dojox.jtlc._MultiArgTag,{constructor:function(_1ca){if(typeof _1ca!=="string"){throw Error("expr() expects a string, not "+_1ca.toString());}this.expr=dojo.trim(_1ca);if(this.expr==dojox.jtlc.replaceWithinJavascript(this.expr,/\$/g,"")&&/^[a-z_]/.test(this.expr)){this.expr="$."+this.expr;}},saveExpression:function(_1cb,_1cc,i){var _1cd=this.expressions[this.expressions.length-1];_1cc[i]=_1cd.length>4?"("+_1cd+")":_1cd;},compile:function(_1ce){var _1cf={},_1d0=false,_1d1=_1ce.expr;dojox.jtlc.replaceWithinJavascript(_1ce.expr,/\$[0-9#]?/g,function(s){if(!(s in _1cf)){_1cf[s]=1;}else{++_1cf[s];}_1d0=_1d0||s in {"$":1,"$#":1};});if(!_1d0&&this.loop&&!this.loop.started()){throw Error("Expression "+dojox.jtlc.stringLiteral(_1ce.expr)+" cannot be used as a generator");}if("$#" in _1cf&&!this.loop){throw Error("$# cannot be used in singleton expressions");}var _1d2=this.expressions.length;if("$0" in _1cf){_1cf["$0"]=this.current_input;}this.nonAccumulated(function(){for(var i in _1cf){if(!(i in {"$":1,"$#":1,"$0":1})){var n=parseInt(i.charAt(1));if(_1ce.args.length<=parseInt(n)){throw Error("Expression "+dojox.jtlc.stringLiteral(_1ce.expr)+" refers to argument "+i+" that was not supplied");}this.compile(_1ce.args[n]);_1ce.saveExpression.call(this,_1ce,_1cf,i);}}});if(this.loop&&!this.loop.started()||"$" in _1cf){this.compile(_1ce.args[0]);if(!("$" in _1cf)){this.popExpression();}else{_1ce.saveExpression.call(this,_1ce,_1cf,"$");}}if("$#" in _1cf){_1cf["$#"]=this.loop.count();}while(this.expressions.length>_1d2){this.popExpression();}this.expressions.push(dojox.jtlc.replaceWithinJavascript(_1ce.expr,/\$[0-9#]?/g,function(s){return _1cf[s];}));}}));dojo.declare("dojox.jtlc._ArrayOrGenerator",null,{constructor:function(tpl){this.template=tpl||dojox.jtlc.tags.current();},compileImpl:function(_1d3,_1d4){var _1d5=false;if(this.loop&&!this.loop.started()){var _1d6=this.loop;this.loop=dojo.delegate(this.loop,{begin:function(_1d7){_1d6.begin(_1d4+"("+_1d7+")");}});_1d5=true;}this.nonAccumulated(function(){this.compile(_1d3.template);});if(_1d5){this.generator(this.popExpression());}else{this.expressions.push(_1d4+"("+this.popExpression()+")");}}});dojox.jtlc._getValues=function(d){if(d instanceof Array){return d;}var res=[];for(var i in d){if(d.hasOwnProperty(i)){res.push(d[i]);}}return res;};dojox.jtlc._declareTag("from",dojo.declare(dojox.jtlc._ArrayOrGenerator,{compile:function(_1d8){_1d8.compileImpl.call(this,_1d8,this._valueGenerator=this._valueGenerator||this.addGlobal(dojox.jtlc._getValues));}}));dojox.jtlc._getDictionaryKeys=function(d){var res=[];for(var i in d){if(d.hasOwnProperty(i)){res.push(i);}}return res;};dojox.jtlc._declareTag("keys",dojo.declare(dojox.jtlc._ArrayOrGenerator,{compile:function(_1d9){_1d9.compileImpl.call(this,_1d9,this._keyGenerator=this._keyGenerator||this.addGlobal(dojox.jtlc._getDictionaryKeys));}}));dojox.jtlc._declareTag("setkey",{constructor:function(key,arg){if(typeof key==="undefined"){throw Error("setkey() requires at least one argument");}this.key=key;this.arg=arg||dojox.jtlc.tags.current();},compile:function(_1da){this.compile(_1da.arg);if(!this.sink||!this.sink.key){throw Error("setkey() should only be used within an object literal");}var _1db=this.popExpression(),t=this.addLocal();if(t!=_1db){this.code.push(t+"="+_1db+";");}this.nonAccumulated(function(){this.compile(_1da.key);},t);this.sink.key=this.popExpression();this.expressions.push(t);}});dojox.jtlc._declareTag("bind",dojo.declare(dojox.jtlc._MultiArgTag,{constructor:function(fn){if(typeof fn!=="function"){throw Error("First argument of bind() must be a function");}this.fn=fn;},compile:function(_1dc){var fn=this.addGlobal(_1dc.fn);_1dc.compileArgs.call(this,_1dc,true);this.expressions.push(fn+"("+_1dc.argumentList.call(this,_1dc)+")");}}));dojo.declare("dojox.jtlc._LastSink",dojox.jtlc._Sink,{constructor:function(){this.accumulator=this.compiler.addLocal();},append:function(){this.compiler.code.push(this.accumulator+"="+this.compiler.popExpression()+";");this.closeLoops();}});dojox.jtlc._declareTag("last",{constructor:function(tpl){this.arg=tpl||dojox.jtlc.tags.current();},compile:function(_1dd){this.accumulated(null,new dojox.jtlc._LastSink(this),new dojox.jtlc._Loop(this),function(){this.compile(_1dd.arg);this.sink.append();});}});dojox.jtlc._declareTag("defined",{constructor:function(tpl){this.arg=tpl||dojox.jtlc.tags.current();},compile:function(_1de){if(!this.loop||this.loop.started()){throw Error("defined() is never a singleton, wrap it in many() or []");}this.compile(_1de.arg);var _1df=this.popExpression(),t=this.addLocal();if(t!=_1df){this.code.push(t+"="+_1df+";");}this.code.push("if(typeof "+t+"===\"undefined\""+")continue;");this.expressions.push(t);}});dojox.jtlc._declareTag("query",dojo.declare(dojox.jtlc._MultiArgTag,{constructor:function(_1e0){if(arguments.length<1){throw Error("query() requires at least 1 argument");}this.query=_1e0;},callQuery:function(_1e1){return this.addGlobal(this.queryLanguage(_1e1.query))+"("+_1e1.argumentList.call(this,_1e1)+")";},compile:function(_1e2){_1e2.compileArgs.call(this,_1e2);if(this.loop&&!this.loop.started()){this.generator(_1e2.callQuery.call(this,_1e2));}else{this.expressions.push(_1e2.callQuery.call(this,_1e2));}}}));dojo.declare("dojox.jtlc._GroupLoop",dojox.jtlc._Loop,{"-chains-":{begin:"after",end:"before"},constructor:function(_1e3,key,_1e4){this.key=typeof key==="object"&&key.constructor===Array?key:[key];this.nextItem=false;this.first_in_group=_1e4;},item:function(){if(!this._items){throw Error("Internal error: loop not initialized");}return this.lockedItem||this._items+"["+this._i+(this.nextItem?"+1":"")+"]";},count:function(){return "("+(this.lockedItem?this.first_in_group:this._i+(this.nextItem?"+1":""))+")";},begin:function(){this.compiler.code.push("if("+this._i+"<"+this._items+".length-1){");for(var i=this.key.length-1;i>=0;--i){this.compiler.compile(this.key[i]);this.nextItem=true;this.compiler.compile(this.key[i]);this.nextItem=false;}this.compiler.code.push("if(");for(var i=0;i<this.key.length;++i){if(i){this.compiler.code.push("&&");}this.compiler.code.push(this.compiler.popExpression()+"=="+this.compiler.popExpression());}this.compiler.code.push(") continue;}");},end:function(){this.compiler.code.push(this.first_in_group+"="+this._i+"+1;");},lockItem:function(_1e5){if(_1e5!=this.item()){var _1e6=this.addLocal();this.compiler.code.push(_1e6+"="+this._i+";");this.compiler.code.push("for("+this._i+"="+this.first_in_group+";"+this._i+"<="+_1e6+";++"+this._i+")");this.compiler.code.push(this.item()+"="+_1e5+";");this.compiler.code.push(this._i+"="+_1e6+";");this.locals.pop();}this.inherited(arguments,[this._items+".slice("+this.first_in_group+","+this._i+"+1)"]);}});dojox.jtlc._declareTag("group",{constructor:function(key,_1e7,_1e8){this.key=key;this.body=_1e7;if(_1e8){this.query=_1e8;}},compile:function(_1e9){if(!("_groupOptimizer" in this.optimizers)){this.optimizers._groupOptimizer=_1e9.optimize;}if(!this.loop){throw Error("group() is never a singleton, wrap it in many() or []");}var _1ea=this.addLocal();this.code.push(_1ea+"=0;");this.loop=new dojox.jtlc._GroupLoop(this,_1e9.key,_1ea);if(_1e9.query){this.compile(_1e9.query);}else{this.generator();}this.loop.lockItem(this.popExpression());this.compile(_1e9.body);},optimize:function(_1eb){return dojox.jtlc.replaceWithinJavascript(_1eb,/\(([a-z][a-z0-9]*)\.slice\(([a-z][a-z0-9]*),([a-z][a-z0-9]*)\+1\)\)(\.length|\[0\])/ig,function(_1ec,a,_1ed,to,op){return op==".length"?"("+to+"-"+_1ed+"+1)":a+"["+_1ed+"]";});}});dojo.declare("dojox.jtlc._IotaLoop",dojox.jtlc._Loop,{"-chains-":{end:"after"},constructor:function(_1ee,_1ef){this._localVarCount=0;this._setParameter(_1ef.start,"_i",true);this._setParameter(_1ef.step,"_step");this._setParameter(_1ef.stop,"_stop");},_setParameter:function(to,_1f0,_1f1){if(_1f1||typeof to==="string"&&to.length>4){this[_1f0]=this.compiler.addLocal();this._localVarCount++;if(this[_1f0]!==to){this.compiler.code.push(this[_1f0]+"="+to+";");}}else{this[_1f0]=to;}},_stopCondition:function(){return typeof this._step==="string"?"("+this._step+"<0?"+this._i+">"+this._stop+":"+this._i+"<"+this._stop+")":this._step<0?this._i+">"+this._stop:this._i+"<"+this._stop;},begin:function(){if(this._items){throw Error("Internal error: loop initialized twice");}this._items=true;this._count=this.compiler.addLocal();this.compiler.code.push("for("+this._count+"=0;"+this._stopCondition()+";++"+this._count+","+this._i+"+="+this._step+"){");if(this.compiler.sink){this.compiler.sink.loops_to_close.push(this);}},item:function(){if(!this._items){throw Error("Internal error: loop not initialized");}return "("+(this.lockedItem||this._i)+")";},count:function(){if(!this._items){throw Error("Internal error: loop not initialized");}return "("+this._count+")";},end:function(){while(--this._localVarCount){this.compiler.locals.pop();}}});dojox.jtlc._declareTag("iota",{constructor:function(){if(arguments.length==0||arguments.length>3){throw Error("iota() expects at least one and at most three arguments");}this.stop=arguments[arguments.length-1];if(arguments.length>1){this.start=arguments[0];}if(arguments.length>2){this.step=arguments[1];}},defaultParams:{start:0,step:1},iotaParams:function(_1f2){var _1f3=dojo.delegate(_1f2.defaultParams),_1f4=this;function _1f5(_1f6){switch(typeof _1f2[_1f6]){case "number":_1f3[_1f6]=_1f2[_1f6];case "undefined":return false;}_1f4.compile(_1f2[_1f6]);return true;};this.nonAccumulated(function(){var _1f7=_1f5("start"),_1f8=_1f5("step"),_1f9=_1f5("stop");if(_1f9){_1f3.stop=this.popExpression();}if(_1f8){_1f3.step=this.popExpression();}if(_1f7){_1f3.start=this.popExpression();}});return _1f3;},compile:function(_1fa){if(!this.loop){this.compile([_1fa]);return;}if(this.loop.started()){throw Error("iota() used in a wrong context");}this.loop=new dojox.jtlc._IotaLoop(this,_1fa.iotaParams.call(this,_1fa));this.generator();}});}if(!dojo._hasResource["dojox.jtlc.JXL"]){dojo._hasResource["dojox.jtlc.JXL"]=true;dojo.provide("dojox.jtlc.JXL");dojo.declare("dojox.jtlc.JXL",dojox.jtlc.Language,{replaceLanguage:dojo.replace,queryLanguage:dojox.json.query,string:function(_1fb){this.compile(this.loop&&!this.loop.started()?dojox.jtlc.tags.query(_1fb):dojox.jtlc.tags.expr(_1fb));},number:function(_1fc){this.compile(dojox.jtlc.tags.quote(_1fc));},"boolean":function(_1fd){this.compile(dojox.jtlc.tags.quote(_1fd));},"function":function(fn){this.compile(dojox.jtlc.tags.bind(fn));},unknownObject:function(_1fe){this.compile(dojox.jtlc.tags.quote(_1fe));},nullObject:function(_1ff){this.expressions.push("null");}});}if(!dojo._hasResource["dojox.jtlc.qplus"]){dojo._hasResource["dojox.jtlc.qplus"]=true;dojo.provide("dojox.jtlc.qplus");(function(){var dj=dojox.jtlc,d=dojo;function _200(_201){if(/^\s*-?\d+(\.\d*)?([eE]-?\d+)?\s*$/.exec(_201)){return RegExp.$2||RegExp.$3?parseFloat(_201):parseInt(_201);}if(/^\s*(true|false)\s*$/.exec(_201)){return RegExp.$1==="true";}return _201;};d.declare("dojox.jtlc.qplus",dj.JXL,{string:function(_202){this.compile(this.loop&&!this.loop.started()?this.tags.query(_202):this.tags.expr(_202));},_exprBrackets:{"[":{close:"]",allow:"[]({\"'"},"(":{close:")",allow:"[(){\"'"},"{":{close:"}",allow:"[({}\"'"},"\"":{close:"\"",allow:"\""},"'":{close:"'",allow:"'"}},_singleScanRegex:/(?:[\[\](){}"']|\\.|\|\|?)/g,_multipleScanRegex:/(?:[\[\](){}"',]|\\.|\|\|?)/g,_initScanStack:{close:"",allow:"[](){}\"'|,"},parse:function(_203,_204){var _205={",":"￿","|":"￾"},_206=[this._initScanStack],_207=this._exprBrackets,_208=_203.replace(_204?this._multipleScanRegex:this._singleScanRegex,function(c){if(c[0]=="\\"){return c[1];}if(_206[0].allow.indexOf(c)>=0){if(c==_206[0].close){_206.shift();}else{if(c in _207){_206.unshift(_207[c]);}else{if(c in _205){return _205[c];}}}}return c;});if(_206.length>1){throw Error("Unbalanced delimiters -- expected "+dj.stringLiteral(_206[0].close));}if(_204){return d.map(_208.split(_205[","]),function(p){return this._parseList(p.split(_205["|"]));},this);}else{return this._parseList(_208.split(_205["|"]));}},_parseList:function(_209){var _20a;while(_209.length){var _20b=_209.shift();if(/^\s*([a-z_]\w*(?:\s*[.]\s*[a-z_]\w*)*)\s*([:](?:.|[\r\n])*)?$/i.exec(_20b)&&(_20a||RegExp.$2)){_20a=RegExp.$2?this._makeTag(RegExp.$1,this._parseOwnArg(RegExp.$2.substr(1)),_20a):this._makeTag(RegExp.$1,_20a);}else{if(_20a){throw Error("Tag is not specified in '"+_20b+"'");}else{_20a=_20b;}}}return _20a;},_parseOwnArg:function(_20c){if(/^\[\s*(.*?)\s*\]$/.exec(_20c)){try{var _20d={",":"￿"},_20e=[this._initScanStack],_20f=this._exprBrackets,_210=RegExp.$1.replace(this._multipleScanRegex,function(c){if(c[0]=="\\"){return c[1];}if(_20e[0].allow.indexOf(c)>=0){if(c==_20e[0].close){_20e.shift();}else{if(c in _20f){_20e.unshift(_20f[c]);}else{if(c in _20d){return _20d[c];}else{if(_20e.length==1&&c=="]"){throw true;}}}}}return c;}),_211=_210.split(/\s*\uffff\s*/);if(_20e.length==1){return d.map(_211,_200);}}catch(e){if(e instanceof Error){throw e;}}}else{return _200(_20c);}return _20c;},_makeTag:function(tag,_212,_213){var _214=[],_215=true;if(_212){if(_213){_214.push(_213);}_214.push(_212);}if(_214[_214.length-1] instanceof Array){if(_214.length>1){throw Error(tag+":["+_214[1]+"] can only be used as the leftmost element");}_215=false;_214=_214[0];}tag=tag.split(/\s*[.]\s*/);if(tag.length==1){var t;if((t=this.tags[tag[0]])||(t=dj.tags[tag[0]])){if(_215){_214.reverse();}return t.apply(null,_214);}else{if(t=this.filters[tag[0]]){_214.unshift(t);if(typeof t==="function"){return dojox.jtlc.tags.bind.apply(null,_214);}else{if(typeof t==="string"){return dj.tags.expr.apply(null,_214);}else{throw Error("Filter '"+tag[0]+"' is neither string nor function");}}}}}var _216=dojo.getObject(tag.join("."));if(typeof _216==="function"){var _217=tag.length>1&&dojo.getObject(tag.slice(0,tag.length-1).join("."));if(typeof _217==="function"){if(_217===String){_214.unshift("$.toString()."+tag[tag.length-1]);}else{if(_217===Array||_217===Object){_214.unshift("$."+tag[tag.length-1]);}else{_214.unshift(tag.slice(0,tag.length-1).join(".")+"($)."+tag[tag.length-1]);}}}else{_214.unshift(tag.join(".")+"($)");}return dojox.jtlc.tags.expr.apply(null,_214);}throw Error("Unknown filter or tag: '"+tag.join(".")+"'");},tags:{dict:function(arg){return {_:dj.tags.many(arg)};},array:function(arg){return [arg];}},_declareTag:dj._declareTag,filters:{lower:"$.toString().toLowerCase()",upper:"$.toString().toUpperCase()"}});})();(function(_218){var dj=dojox.jtlc;_218._declareTag("expr",dojo.declare(dj.tags._expr,{constructor:function(){for(var i=Math.max(1,arguments.length-1);i<10;++i){this.args.push(dojox.jtlc.tags.arg(i));}}}));_218._declareTag("do",dojo.declare(_218.tags._expr,{constructor:function(){if(/^\{((?:.|[\r\n])*?);?\s*\}$/.exec(this.expr)){this.expr=RegExp.$1;}this.expr="(function(){"+this.expr+";return $;})()";this.simplify=arguments.length<=1?this._simplify:this._cant_simplify;},_simplify:function(){this.expr=this.expr.replace(/;return \$;\}\)\(\)$/,"})()");},_cant_simplify:function(){}}));_218._declareTag("query",dojo.declare(dj.tags._query,{constructor:function(){if(arguments.length<=2&&this.query.match(/[$][1-9]/)){this.dynamicArgs=true;}},callQuery:function(_219){if(!_219.dynamicArgs){return dj.tags._query.prototype.callQuery.call(this,_219);}if(this.loop){this.nonAccumulated(function(){this.compile(_219.args[0]);});}else{this.compile(_219.args[0]);}var v=this.popExpression(),t=this.addLocal();this.code.push(t+"="+this.addGlobal(dj._copyArguments)+"($);");this.code.push(t+"[0]="+v+";");return this.addGlobal(this.queryLanguage(_219.query))+".apply(null,"+t+")";}}));})(dojox.jtlc.qplus.prototype);}if(!dojo._hasResource["dojox.jtlc.CHT"]){dojo._hasResource["dojox.jtlc.CHT"]=true;dojo.provide("dojox.jtlc.CHT");(function(){var dj=dojox.jtlc;dojo.declare("dojox.jtlc._NullSink",dj._Sink,{append:function(){this.closeLoops();}});dj._copyArgumentsReplaceFirst=function(_21a,_21b){_21a=dj._copyArguments(_21a);_21a[0]=_21b;return _21a;};var _21c=/[{](\d+)[}]/g;dj._replaceN=function(_21d){return dojo.replace(_21d,dj._copyArguments(arguments,1),_21c);};dj._chtGlobalContext={refID:0,markerID:0};dojo.declare("dojox.jtlc.CHT",dj.Language,{domMarkerPrefix:"_CHT_DOM_Marker_",constructor:function(_21e){this.qplus=new dj.qplus(dojo.mixin({},{tags:this.tags},_21e));dojo.mixin(this,_21e);},parse:function(_21f,ns,_220){var _221=this;if(typeof ns==="string"){_220=ns;ns={};}return dojo.when(this._buildTemplates(dj._tokenizeCHT(_21f)),function(v){return _221._buildAST(v,ns||{},_220||"[CHT-Templates]");});},_buildTemplates:function(_222){var _223=this,_224=null,_225=null,_226={},_227={},_228={"template":1,"section":1};function _229(elt){if(elt.markerElement){_225.push(_223.tags.markDom(elt.markerElement));}};dojo.forEach(_222,function(t){if(t.substr(0,2)=="<?"){var elt=new dj._CHTElement(t);if(!_224&&elt.openTag!="template"){throw Error("CHT element encountered outside template: "+t);}if(_224&&elt.openTag=="template"){throw Error("Missing end of previous template at: "+t);}if(elt.closeTag=="template"){_229(_224);_224=_225=null;}else{if(elt.openTag in _228){if(elt.arg in _228||elt.arg in _223.elements||!/^[a-z]\w*$/i.test(elt.arg||"")&&(elt.openTag!="section"||elt.arg)){throw Error("Bad or missing name for CHT "+elt.openTag+": "+t);}if(elt.openTag=="template"){_226[elt.arg]=_224=elt;if(elt.kwarg.marker){elt.markerElement=elt.kwarg.marker;elt.kwarg.async=true;}if(elt.kwarg.async){elt.kwarg.compiled=true;}if(elt.kwarg.macro&&elt.kwarg.compiled){throw Error("Compiled template cannot use macro argument substitution: "+elt.arg);}}else{elt.arg=elt.arg||"";_224.body.push(elt);(_224.sections=_224.sections||{})[elt.arg]={};}_225=elt.body=[];_229(elt);}else{if(elt.closeTag=="section"){if(_225===_224.body){throw Error("Mismatched "+t);}_225=_224.body;}else{if(elt.openTag&&elt.openTag.indexOf(".")>=0){_227[elt.openTag]=false;}_225.push(elt);}}}}else{if(t){var _22a=[],t=t.replace(/\ufffd([\s\S]*?)\ufffd/g,function(_22b,_22c){var s=_223.qplus.parse(_22c);_22a.push(t.charAt(0)=="<"?/^<script/i.test(t)?s:_223.tags.escapeAttribute(s):_223.tags.escapeText(s));return s instanceof _223.tags._do?"":"{"+(_22a.length-1).toString()+"}";});if(!_224){throw Error("HTML content encountered outside template: "+t);}if(t=="{0}"){_225.push(_22a[0]);}else{if(t.charAt(0)!="<"&&/\b(?:[a-zA-Z][a-z]*|[A-Z]+)\b/.test(t.replace(/&[a-z]{3,4};/,""))){_225.push(_223.tags.i18n(t,_22a));}else{if(_22a.length){_225.push(_223.tags.replaceN(t,_22a));}else{if(_225.length&&_225[_225.length-1] instanceof dj.tags._quote){_225[_225.length-1].value+=t;}else{_225.push(dj.tags.quote(t));}}}}}}},this);if(this.loadTemplates){return dojo.when(this.loadTemplates(_227),function(r){return {refs:r,parsed:_226};});}else{return {refs:_227,parsed:_226};}},_buildAST:function(rp,ns,url){for(var _22d in rp.parsed){if(!ns.hasOwnProperty(_22d)){ns[_22d]=new this._userDefinedElement(rp.parsed[_22d],url+"/<?"+_22d+"?>");}}var _22e=dojo.mixin(rp.refs,ns,this.elements),_22f=this;function _230(_231){var _232=[],_233=-1;for(var i=0;i<_231.length;++i){if(_231[i] instanceof dj._CHTElement){if(_233>=0){_231.splice(_233,0,new _22f._appendToOutput(_231.splice(_233,i-_233)));i=_233+1;_233=-1;}var tag=_231[i].openTag||_231[i].closeTag,_234,_235=(_232.length&&(_234=_231[_232[0]]).def_sections||_232.length>1&&(_234=_231[_232[1]]).def_sections)&&_234.def_sections[tag];if(tag=="section"){_231[i]=new _22f._userDefinedSection(_231[i].arg,_230(_231[i].body),_22d);continue;}if(_235&&_231[i].closeTag){throw Error("Closing tags not allowed for sections: "+_231[i].text);}if(!_235&&!(tag in _22e)&&tag!="section"){throw Error("Unknown CHT element: "+_231[i].text);}if(_231[i].openTag){if(_235){if(_231[i].arg&&!_235.allowArgument){throw Error("Argument not allowed here: "+_231[i].text);}if(!_235.allowMultiple&&dojo.some(_234.sections,function(s){return s.openTag==_231[i].openTag;})){throw Error("Section appears more than once: "+_231[i].text);}_231[_232[0]].body=_231.splice(_232[0]+1,i-_232[0]-1);i=_232[0]+1;if(_231[_232[0]]!==_234){_231.splice(_232[0],1);_232.shift();--i;}_234.sections.push(_231[i]);_232.unshift(i);}else{if(_22e[tag].sections){_232.unshift(i);_231[i].def_sections=_22e[tag].sections;_231[i].sections=[];}else{_231[i]=_22e[tag].tag(_22f,_231[i]);}}}else{if(!_234||_234.openTag!=_231[i].closeTag){throw Error("Unbalanced closing tag: "+_231[i].text);}_231[_232[0]].body=_231.splice(_232[0]+1,i-_232[0]-1);i=_232[0]+1;if(_231[_232[0]]!==_234){_231.splice(_232[0],1);_232.shift();--i;}if(_234.body.length&&!("" in _234.def_sections)){var t="";for(var s in _234.def_sections){if(t){t+=", ";}t+="<?"+s+"?>";}throw Error("<?"+_234.openTag+"?> must be followed by "+t);}if(!_234.body.length){delete _234.body;}_231[_232[0]]=_22e[tag].tag(_22f,_234);_231.splice(i--,1);_232.shift();}}else{if(_233<0){_233=i;}}}if(_232.length){throw Error("No closing tag for: "+_231[_232[_231[_232[0]].def_sections?0:1]].text);}if(_233>=0){_231.push(new _22f._appendToOutput(_231.splice(_233,_231.length-_233)));}return _231;};for(var _22d in rp.parsed){if(!ns[_22d].body){ns[_22d].body=_230(rp.parsed[_22d].body);}}return ns;},compileBody:function(tpl){this.sourceUrl=tpl.sourceUrl||tpl.def.sourceUrl;this._chtSections={};this._deferredIndex=0;var _236=this.code.length;this._chtDeferred=this.addLocal();this.code.push(this._chtDeferred+"=new "+this.addGlobal(dj._CHTDeferredAccessor)+"(this);");var _237=this.addLocal(),_238=this.addGlobal(dj._chtGlobalContext);this.code.push(_237+"="+_238+".refID++;");var _239=this.code.length,_23a=this.addLocal();this._chtRefs={refs:_23a,index:_237};this.code.push(_23a+"=[];");this.accumulated("=[];",new dj._ArraySink(this),null,function(){this._chtHTML=this.sink.accumulator;this.compile(tpl);});var _23b=this.addGlobal(this._deferredIndex?dojox.jtlc._CHTIncrementalTemplateInstance:dojox.jtlc._CHTTemplateInstance),_23c=this.popExpression();if(!this._hasRefs){this.code.splice(_239,1);this.optimizers._refLocalOptimize=function(_23d){return dojox.jtlc.replaceWithinJavascript(_23d,this._chtRefs.refs+",","");};}this.code.push("if(!"+_237+")"+_238+".refID=0;");var _23e=this._transition&&(this.compile(this.tags.expr("("+this._transition+")")),this.popExpression());function _23f(_240){return "_split_text:"+_23c+(_240?",_refs:"+_23a+",_refID:"+_237:"")+(_23e?",_transition:"+_23e:"");};this.expressions.push(this._deferredIndex?"this instanceof "+_23b+"?"+this.addGlobal(dojo.mixin)+"(this,{"+_23f(this._hasRefs)+(this._chtMarkerQuery?",_marker_query:"+this._chtMarkerQuery:"")+"}):new "+_23b+"({"+_23f(this._hasRefs)+(this._chtMarkerQuery?",_marker_query:"+this._chtMarkerQuery:"")+",_self:$self,_args:$,_cht_deferred:"+this._chtDeferred+".storage,_max_deferred:"+this._deferredIndex+"})":"new "+_23b+"({"+_23f(this._hasRefs)+"})");if(this._deferredIndex==0){this.code.splice(_236,1);this.optimizers._defLocalOptimize=function(_241){return dojox.jtlc.replaceWithinJavascript(_241,this._chtDeferred+",","");};}},decorate:function(f){f.async=this._deferredIndex>0;f.name=this._templateName;return f;},compileSequence:function(_242){this.accumulated(null,new dj._NullSink(this),this.loop,function(){dojo.forEach(_242,function(v){this.compile(v);this.sink.append();},this);});this.expressions.pop();},replaceLanguage:dojo.replace,_appendToOutput:dojo.extend(function(_243){this.body=_243;dojo.forEach(this.body,function(v){if(v.simplify){v.simplify();}});},{compile:function(_244){dojo.forEach(_244.body,function(v){this.compile(v);if(v instanceof this.tags._do){this.code.push(this.popExpression()+";");}else{this.code.push(this._chtHTML+".push("+this.popExpression()+");");}},this);}}),_userDefinedElement:dojo.extend(function(elt,url){this.kwarg=elt.kwarg||{};if(this.kwarg.compiled&&elt.sections){throw Error("Compiled template "+elt.arg+" should not have sections");}if(elt.sections){this.sections=elt.sections;}this.name=elt.arg;this.sourceUrl=url;},{_tag:dojo.extend(function(cht,elt,def){this.def=def;if(elt.arg){this.arg=cht.qplus.parse(elt.arg);}if(elt.sections){this.sections={};dojo.forEach(elt.sections,function(s){this.sections[s.openTag]=s.body;},this);if(elt.body){this.sections[""]=elt.body;}}},{_notAnExpression:{toString:function(){throw Error("BUG: access to current_input bypasses generator()");}},_argByName:function(_245,_246,_247,_248){if(_245.current_input===this._notAnExpression&&!_248&&!_245.loop.lockedItem){if(_247){_245.current_input=_247;}else{delete _245.current_input;}_245.compile(this.arg);_245.current_input=this._notAnExpression;}else{_246.call(_245,_248);}},compile:function(_249){var _24a,_24b;if(_249.def.kwarg.macro&&_249.arg){_24a=this.hasOwnProperty("current_input")?this.current_input:null;var gen=this.generator;_24b=this.hasOwnProperty("generator")?gen:null;this.generator=function(_24c){_249._argByName(this,gen,_24a,_24c);};this.current_input=_249._notAnExpression;}if(_249.sections){this._chtSections[_249.def.name]=_249.sections;}if(!_249.def.kwarg.macro&&(_249.arg||this.current_input===_249._notAnExpression)){var _24d,_24e;if(_249.arg){this.compile(_249.arg);_24d=this.popExpression();_24e=this.addLocal();if(_24d.length>4){this.code.push(_24e+"="+_24d+";");_24d="("+_24e+")";}else{if(_24d===_24e){_24d="("+_24d+")";}else{this.locals.pop();delete _24e;}}}else{_24d=this.generator();}this.nonAccumulated(function(){this.compileSequence(_249.def.body);},_24d);if(_24e){this.locals.pop();}}else{this.compileSequence(_249.def.body);}if(_249.sections){delete this._chtSections[_249.def.name];}if(_249.def.kwarg.macro&&_249.arg){if(_24b){this.generator=_24b;}else{delete this.generator;}if(_24a){this.current_input=_24a;}else{delete this.current_input;}}}}),_compiledTag:dojo.extend(function(cht,elt,tag){this.name=elt.openTag;this.tag=tag;if(elt.arg){this.arg=cht.qplus.parse(elt.arg);}this.bind=cht.tags.bind;},{compile:function(_24f){if(!("compiledTemplates" in this)){this.compiledTemplates={};}if(!(_24f.name in this.compiledTemplates)){var _250=null;this.compiledTemplates[_24f.name]=function(){return _250.apply(this,arguments);};this.compiledTemplates[_24f.name].async=_24f.tag.def.kwarg.async||false;this.compiledTemplates[_24f.name]=_250=dj.compile(_24f.tag,this.compileArguments.language,dojo.mixin({compiledTemplates:this.compiledTemplates},this.compileArguments.options,{_templateName:_24f.name,_transition:_24f.tag.def.kwarg.transition}));}var fn=this.addGlobal(this.compiledTemplates[_24f.name]),_251=this.compiledTemplates[_24f.name].async;var v,w;if(_251){w=this._beginWait();}if(_24f.arg){this.compile(_24f.arg);}else{this.generator();}v=this.popExpression();if(v=="$[0]"){this.expressions.push(fn+".apply(null,$)");}else{this.expressions.push(fn+".apply(null,"+this.addGlobal(dj._copyArgumentsReplaceFirst)+"($,"+v+"))");}if(_251){this._endWait(w,true);}}}),tag:function(cht,elt){if(this.kwarg.compiled&&elt.openTag){return new cht._appendToOutput([new this._compiledTag(cht,elt,new this._tag(cht,{},this))]);}else{return new this._tag(cht,elt,this);}},compile:function(_252){this._templateName=_252.name;if(_252.kwarg.transition){this._transition=_252.kwarg.transition;}this.compile(_252.tag(this,{}));}}),_userDefinedSection:dojo.extend(function(_253,_254,_255){this.body=_254;this.name=_253;this.tplName=_255;},{compile:function(_256){this.compileSequence((this._chtSections[_256.tplName]||{})[_256.name]||_256.body);}}),_beginWait:function(_257){this.code.push("if(!"+this._chtDeferred+".has("+this._deferredIndex+")){");return _257||this.addLocal();},_endWait:function(_258,_259){this.code.push(this._chtDeferred+".set("+this._deferredIndex+","+_258+"="+this.popExpression()+(this._whenCtx&&this._whenCtx.hasExcept?",true":"")+");}else "+_258+"="+this._chtDeferred+".get("+this._deferredIndex+");");if(!_259){this.code.push("if("+_258+" instanceof "+this.addGlobal(dojo.Deferred)+(this._whenCtx&&this._whenCtx.hasExcept?("||"+_258+" instanceof Error"):"")+")break;");}this._deferredIndex++;this.expressions.push(_258);},elements:{"if":{sections:{"":{allowArgument:true},"elseif":{allowArgument:true,allowMultiple:true},"else":{}},_tag:dojo.extend(function(cht,elt){this.ifTrue=[{condition:elt.arg?cht.qplus.parse(elt.arg):dj.tags.current(),body:elt.body}];dojo.forEach(elt.sections,function(s){if(s.openTag=="elseif"){this.ifTrue.push({condition:s.arg?cht.qplus.parse(s.arg):dj.tags.current(),body:s.body});}else{this.ifFalse=s.body;}},this);},{compile:function(_25a){dojo.forEach(_25a.ifTrue,function(s,i){this.compile(s.condition);this.code.push((i==0?"if(":"}else if(")+this.popExpression()+"){");this.compileSequence(s.body);},this);if(_25a.ifFalse){this.code.push("}else{");this.compileSequence(_25a.ifFalse);}this.code.push("}");}}),tag:function(cht,elt){return new this._tag(cht,elt);}},"foreach":{sections:{"":{allowArgument:true}},tag:function(cht,elt){return dj.tags.one(dj.tags.many(cht.tags.foreachBody(elt.body,elt.arg&&cht.qplus.parse(elt.arg))));}},"group":{sections:{"":{allowArgument:true}},tag:function(cht,elt){if(!!elt.kwarg.key==!!elt.kwarg.count){throw Error("<?group?> should have one of attributes: key=, count=");}return dj.tags.one(dj.tags.many(dj.tags.group(elt.kwarg.key?cht.qplus.parse(elt.kwarg.key,true):dj.tags.expr("Math.floor($#/("+elt.kwarg.count+"))"),cht.tags.genericBody(elt.body),elt.arg?cht.qplus.parse(elt.arg):dj.tags.current())));}},"when":{sections:{"":{allowArgument:true},"else":{},"except":{}},_tag:dojo.extend(function(cht,elt){this.arg=elt.arg?cht.qplus.parse(elt.arg):dj.tags.current();this.ifReady=elt.body;dojo.forEach(elt.sections,function(s){if(s.openTag=="else"){this.ifNotReady=s.body;}else{this.ifFailed=s.body;}},this);},{compile:function(_25b){var _25c;if(_25c=this._whenCtx){delete this._whenCtx;}if(_25b.ifNotReady||_25b.ifFailed){this._whenCtx={flagVar:this.addLocal(),hasExcept:_25b.ifFailed&&true};this.code.push(this._whenCtx.flagVar+"=true;");}this.code.push("do{");this._openWait=this._beginWait(this._whenCtx&&this._whenCtx&&this._whenCtx.flagVar);if(_25b.arg){this.compile(_25b.arg);}else{this.generator();}if(this._openWait){this._endWait(this._openWait);delete this._openWait;}var _25d=this.popExpression(),_25e=this.addLocal();if(_25e!=_25d){this.code.push(_25e+"="+_25d+";");}this.nonAccumulated(function(){this.compileSequence(_25b.ifReady);},"("+_25e+")");this.locals.pop();this.code.push("}while("+(this._whenCtx?this._whenCtx.flagVar+"=":"")+"false);");if(_25b.ifFailed){this.code.push("if("+this._whenCtx.flagVar+" instanceof Error){");this.nonAccumulated(function(){this.compileSequence(_25b.ifFailed);},"("+this._whenCtx.flagVar+")");this.code.push("}");}if(_25b.ifNotReady){this.code.push((_25b.ifFailed?"else ":"")+"if("+this._whenCtx.flagVar+"){");this.compileSequence(_25b.ifNotReady);this.code.push("}");}if(_25c){this._whenCtx=_25c;}else{if(this._whenCtx){delete this._whenCtx;}}}}),tag:function(cht,elt){return new this._tag(cht,elt);}}},string:dojox.jtlc.qplus.prototype.string,queryLanguage:dojox.json.query,_declareTag:dj._declareTag,tags:dojo.delegate(dj.qplus.prototype.tags,{})});})();(function(_25f){var dj=dojox.jtlc;_25f._declareTag("foreachBody",{constructor:function(_260,_261){this.body=_260;if(_261){this.input=_261;}},compile:function(_262){if(_262.input){this.compile(_262.input);}else{this.generator();}this.loop.lockItem(this.popExpression());this.compileSequence(_262.body);}});_25f._declareTag("genericBody",{constructor:function(_263){this.body=_263;},compile:function(_264){this.compileSequence(_264.body);this.generator();}});_25f._declareTag("replaceN",dojo.declare(dj._MultiArgTag,{constructor:function(fmt,_265){this.format=fmt;this.args=_265||[];},formatString:function(_266){return dj.stringLiteral(_266.format);},compileArgs:function(_267){for(var i=_267.args.length-1;i>=0;--i){this.compile(_267.args[i]);}},compile:function(_268){if(!("_pushLiteralOptimizer" in this.optimizers)){this.optimizers._pushLiteralOptimizer=_268.optimize;}if(_268.args.length){this._replaceFunction=this._replaceFunction||this.addGlobal(dj._replaceN);_268.compileArgs.call(this,_268,true);this.expressions.push(this._replaceFunction+"("+_268.formatString.call(this,_268)+","+_268.argumentList.call(this,_268)+")");}else{this.expressions.push(_268.formatString.call(this,_268));}},optimize:function(_269){var acc=this._chtHTML,_26a=new RegExp("[;}{](?:"+acc+"\\.push\\({1,2}\"(?:[^\"\\\\]|\\\\.)*\"\\){1,2};){2,}","g"),_26b=new RegExp(acc+"\\.push\\({1,2}\"((?:[^\"\\\\]|\\\\.)*)\"\\){1,2};","g");return dojox.jtlc.replaceWithinJavascript(_269,_26a,function(seq){return seq.substr(0,1)+acc+".push(\""+seq.substr(1).replace(_26b,"$1")+"\");";});}}));_25f._declareTag("i18n",dojo.declare(_25f.tags._replaceN,{constructor:function(){if(!(this.args instanceof Array)){this.args=[this.args];}},formatString:function(_26c){var d=this.i18nDictionary;return dj.stringLiteral(d&&(_26c.format in d?d[_26c.format]:_26c.format.replace(/^(\s*)(.*?)(\s*)$/,function(_26d,pfx,key,sfx){if(!(key in d)){d[key]=false;}return d[key]?(pfx||"")+d[key]+(sfx||""):"";}))||_26c.format);}}));var _26e=dojo.declare(null,{constructor:function(arg){this.arg=arg;},compile:function(_26f){this["_escape"+_26f.cachePrefix+"Regex"]=this["_escape"+_26f.cachePrefix+"Regex"]||this.addGlobal(_26f.escapeRegex);this["_escape"+_26f.cachePrefix+"Fn"]=this["_escape"+_26f.cachePrefix+"Fn"]||this.addGlobal(_26f.escapeFn);var _270=this["_escape"+_26f.cachePrefix+"Regex"]+","+this["_escape"+_26f.cachePrefix+"Fn"];if(!("_escape"+_26f.cachePrefix+"Optimizer" in this.optimizers)){var _271=new RegExp("String\\((\"(?:\\\\.|[^\\\\\"])*\")\\)\\.replace\\("+_270+"\\)","g");this.optimizers["_escape"+_26f.cachePrefix+"Optimizer"]=function(_272){return dojox.jtlc.replaceWithinJavascript(_272,_271,"$1");};}this.compile(_26f.arg);var _273=this.popExpression();this.expressions.push("String("+_273+").replace("+_270+")");}});function _274(cls){return function(arg){return arg instanceof _25f.tags._raw||arg instanceof _25f.tags._do?arg:new cls(arg);};};_25f._declareTag("escapeAttribute",dojo.declare(_26e,{cachePrefix:"Attr",escapeRegex:/[<>'"&]/g,escapeFn:function(x){return {"<":"&lt;",">":"&gt;","'":"&apos;","\"":"&quot;","&":"&amp;"}[x];}}),_274);_25f._declareTag("escapeText",dojo.declare(_26e,{cachePrefix:"Text",escapeRegex:/[<>&]/g,escapeFn:function(x){return {"<":"&lt;",">":"&gt;","&":"&amp;"}[x];}}),_274);_25f._declareTag("raw",{constructor:function(arg){this.arg=arg;},compile:function(_275){this.compile(_275.arg);}});_25f._declareTag("ref",{constructor:function(arg){this.arg=arg;},compile:function(_276){this.compile(_276.arg);this.code.push(this._chtRefs.refs+".push("+this.popExpression()+");");this._replaceFunction=this._replaceFunction||this.addGlobal(dj._replaceN);this.expressions.push(this._replaceFunction+"(\"dojo.getObject(\\\"_refs.{0}.{1}\\\")\","+this._chtRefs.index+","+this._chtRefs.refs+".length-1)");this._hasRefs=true;}});_25f._declareTag("wait",{constructor:function(arg){this.arg=arg;},compile:function(_277){var w=this._openWait;if(!w){w=this._beginWait();}else{delete this._openWait;}this.compile(_277.arg);this._endWait(w);}});_25f._declareTag("markDom",dojo.declare(_25f.tags._raw,{constructor:function(_278){this.markerElement=_278;},compile:function(_279){if(!this._chtMarkerID){this._chtMarkerID=this.addLocal();this.code.push(this._chtMarkerID+"="+this.addGlobal(dj._chtGlobalContext)+".markerID++;");this._chtMarkerQuery="("+dj.stringLiteral(_279.markerElement+"."+this.domMarkerPrefix)+"+"+this._chtMarkerID+")";}this.expressions.push("("+dj.stringLiteral(dj._replaceN("<{0} style=\"display:none\" class=\"{1}",_279.markerElement,this.domMarkerPrefix))+"+"+this._chtMarkerID+"+"+dj.stringLiteral(dj._replaceN("\"></{0}>",_279.markerElement))+")");}}));})(dojox.jtlc.CHT.prototype);}if(!dojo._hasResource["dojox.jtlc.CHT.instance"]){dojo._hasResource["dojox.jtlc.CHT.instance"]=true;dojo.provide("dojox.jtlc.CHT.instance");function _27a(ns){for(var _27b in ns){ns[_27b]=new cht._userDefinedElement({arg:/\.([^.]*)$/.exec(_27b)[1]});}return ns;};var cht=new dojox.jtlc.CHT({loadTemplates:_27a}),file=dojo.global.arguments[0];var _27c=dojo.getObject;dojo.getObject=function(x){return _27c(x)||function(){};};dojo.when(cht.parse(readFile(file,"utf8")),function(ns){var _27d={};for(var n in ns){if(ns.hasOwnProperty(n)){dojox.jtlc.compile(ns[n],cht,{i18nDictionary:_27d});}}print(dojo.toJson(_27d,true));});}if(dojo.isBrowser&&(document.readyState==="complete"||dojo.config.afterOnLoad)){window.setTimeout(dojo._loadInit,100);}})();
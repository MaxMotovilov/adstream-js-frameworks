/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

(function(){var _1=null;if((_1||(typeof djConfig!="undefined"&&djConfig.scopeMap))&&(typeof window!="undefined")){var _2="",_3="",_4="",_5={},_6={};_1=_1||djConfig.scopeMap;for(var i=0;i<_1.length;i++){var _7=_1[i];_2+="var "+_7[0]+" = {}; "+_7[1]+" = "+_7[0]+";"+_7[1]+"._scopeName = '"+_7[1]+"';";_3+=(i==0?"":",")+_7[0];_4+=(i==0?"":",")+_7[1];_5[_7[0]]=_7[1];_6[_7[1]]=_7[0];}eval(_2+"dojo._scopeArgs = ["+_4+"];");dojo._scopePrefixArgs=_3;dojo._scopePrefix="(function("+_3+"){";dojo._scopeSuffix="})("+_4+")";dojo._scopeMap=_5;dojo._scopeMapRev=_6;}(function(){if(typeof this["loadFirebugConsole"]=="function"){this["loadFirebugConsole"]();}else{this.console=this.console||{};var cn=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];var i=0,tn;while((tn=cn[i++])){if(!console[tn]){(function(){var _8=tn+"";console[_8]=("log" in console)?function(){var a=Array.apply({},arguments);a.unshift(_8+":");console["log"](a.join(" "));}:function(){};console[_8]._fake=true;})();}}}if(typeof dojo=="undefined"){dojo={_scopeName:"dojo",_scopePrefix:"",_scopePrefixArgs:"",_scopeSuffix:"",_scopeMap:{},_scopeMapRev:{}};}var d=dojo;if(typeof dijit=="undefined"){dijit={_scopeName:"dijit"};}if(typeof dojox=="undefined"){dojox={_scopeName:"dojox"};}if(!d._scopeArgs){d._scopeArgs=[dojo,dijit,dojox];}d.global=this;d.config={isDebug:false,debugAtAllCosts:false};var _9=typeof djConfig!="undefined"?djConfig:typeof dojoConfig!="undefined"?dojoConfig:null;if(_9){for(var c in _9){d.config[c]=_9[c];}}dojo.locale=d.config.locale;var _a="$Rev: 24595 $".match(/\d+/);dojo.version={major:0,minor:0,patch:0,flag:"dev",revision:_a?+_a[0]:NaN,toString:function(){with(d.version){return major+"."+minor+"."+patch+flag+" ("+revision+")";}}};if(typeof OpenAjax!="undefined"){OpenAjax.hub.registerLibrary(dojo._scopeName,"http://dojotoolkit.org",d.version.toString());}var _b,_c,_d={};for(var i in {toString:1}){_b=[];break;}dojo._extraNames=_b=_b||["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];_c=_b.length;dojo._mixin=function(_e,_f){var _10,s,i;for(_10 in _f){s=_f[_10];if(!(_10 in _e)||(_e[_10]!==s&&(!(_10 in _d)||_d[_10]!==s))){_e[_10]=s;}}if(_c&&_f){for(i=0;i<_c;++i){_10=_b[i];s=_f[_10];if(!(_10 in _e)||(_e[_10]!==s&&(!(_10 in _d)||_d[_10]!==s))){_e[_10]=s;}}}return _e;};dojo.mixin=function(obj,_11){if(!obj){obj={};}for(var i=1,l=arguments.length;i<l;i++){d._mixin(obj,arguments[i]);}return obj;};dojo._getProp=function(_12,_13,_14){var obj=_14||d.global;for(var i=0,p;obj&&(p=_12[i]);i++){if(i==0&&d._scopeMap[p]){p=d._scopeMap[p];}obj=(p in obj?obj[p]:(_13?obj[p]={}:undefined));}return obj;};dojo.setObject=function(_15,_16,_17){var _18=_15.split("."),p=_18.pop(),obj=d._getProp(_18,true,_17);return obj&&p?(obj[p]=_16):undefined;};dojo.getObject=function(_19,_1a,_1b){return d._getProp(_19.split("."),_1a,_1b);};dojo.exists=function(_1c,obj){return d.getObject(_1c,false,obj)!==undefined;};dojo["eval"]=function(_1d){return d.global.eval?d.global.eval(_1d):eval(_1d);};d.deprecated=d.experimental=function(){};})();(function(){var d=dojo,_1e;d.mixin(d,{_loadedModules:{},_inFlightCount:0,_hasResource:{},_modulePrefixes:{dojo:{name:"dojo",value:"."},doh:{name:"doh",value:"../util/doh"},tests:{name:"tests",value:"tests"}},_moduleHasPrefix:function(_1f){var mp=d._modulePrefixes;return !!(mp[_1f]&&mp[_1f].value);},_getModulePrefix:function(_20){var mp=d._modulePrefixes;if(d._moduleHasPrefix(_20)){return mp[_20].value;}return _20;},_loadedUrls:[],_postLoad:false,_loaders:[],_unloaders:[],_loadNotifying:false});dojo._loadPath=function(_21,_22,cb){var uri=((_21.charAt(0)=="/"||_21.match(/^\w+:/))?"":d.baseUrl)+_21;try{_1e=_22;return !_22?d._loadUri(uri,cb):d._loadUriAndCheck(uri,_22,cb);}catch(e){console.error(e);return false;}finally{_1e=null;}};dojo._loadUri=function(uri,cb){if(d._loadedUrls[uri]){return true;}d._inFlightCount++;var _23=d._getText(uri,true);if(_23){d._loadedUrls[uri]=true;d._loadedUrls.push(uri);if(cb){_23=/^define\(/.test(_23)?_23:"("+_23+")";}else{_23=d._scopePrefix+_23+d._scopeSuffix;}if(!d.isIE){_23+="\r\n//@ sourceURL="+uri;}var _24=d["eval"](_23);if(cb){cb(_24);}}if(--d._inFlightCount==0&&d._postLoad&&d._loaders.length){setTimeout(function(){if(d._inFlightCount==0){d._callLoaded();}},0);}return !!_23;};dojo._loadUriAndCheck=function(uri,_25,cb){var ok=false;try{ok=d._loadUri(uri,cb);}catch(e){console.error("failed loading "+uri+" with error: "+e);}return !!(ok&&d._loadedModules[_25]);};dojo.loaded=function(){d._loadNotifying=true;d._postLoad=true;var mll=d._loaders;d._loaders=[];for(var x=0;x<mll.length;x++){mll[x]();}d._loadNotifying=false;if(d._postLoad&&d._inFlightCount==0&&mll.length){d._callLoaded();}};dojo.unloaded=function(){var mll=d._unloaders;while(mll.length){(mll.pop())();}};d._onto=function(arr,obj,fn){if(!fn){arr.push(obj);}else{if(fn){var _26=(typeof fn=="string")?obj[fn]:fn;arr.push(function(){_26.call(obj);});}}};dojo.ready=dojo.addOnLoad=function(obj,_27){d._onto(d._loaders,obj,_27);if(d._postLoad&&d._inFlightCount==0&&!d._loadNotifying){d._callLoaded();}};var dca=d.config.addOnLoad;if(dca){d.addOnLoad[(dca instanceof Array?"apply":"call")](d,dca);}dojo._modulesLoaded=function(){if(d._postLoad){return;}if(d._inFlightCount>0){console.warn("files still in flight!");return;}d._callLoaded();};dojo._callLoaded=function(){if(typeof setTimeout=="object"||(d.config.useXDomain&&d.isOpera)){setTimeout(d.isAIR?function(){d.loaded();}:d._scopeName+".loaded();",0);}else{d.loaded();}};dojo._getModuleSymbols=function(_28){var _29=_28.split(".");for(var i=_29.length;i>0;i--){var _2a=_29.slice(0,i).join(".");if(i==1&&!d._moduleHasPrefix(_2a)){_29[0]="../"+_29[0];}else{var _2b=d._getModulePrefix(_2a);if(_2b!=_2a){_29.splice(0,i,_2b);break;}}}return _29;};dojo._global_omit_module_check=false;dojo.loadInit=function(_2c){_2c();};dojo._loadModule=dojo.require=function(_2d,_2e){_2e=d._global_omit_module_check||_2e;var _2f=d._loadedModules[_2d];if(_2f){return _2f;}var _30=d._getModuleSymbols(_2d).join("/")+".js";var _31=!_2e?_2d:null;var ok=d._loadPath(_30,_31);if(!ok&&!_2e){throw new Error("Could not load '"+_2d+"'; last tried '"+_30+"'");}if(!_2e&&!d._isXDomain){_2f=d._loadedModules[_2d];if(!_2f){throw new Error("symbol '"+_2d+"' is not defined after loading '"+_30+"'");}}return _2f;};dojo.provide=function(_32){_32=_32+"";return (d._loadedModules[_32]=d.getObject(_32,true));};dojo.platformRequire=function(_33){var _34=_33.common||[];var _35=_34.concat(_33[d._name]||_33["default"]||[]);for(var x=0;x<_35.length;x++){var _36=_35[x];if(_36.constructor==Array){d._loadModule.apply(d,_36);}else{d._loadModule(_36);}}};dojo.requireIf=function(_37,_38){if(_37===true){var _39=[];for(var i=1;i<arguments.length;i++){_39.push(arguments[i]);}d.require.apply(d,_39);}};dojo.requireAfterIf=d.requireIf;dojo.registerModulePath=function(_3a,_3b){d._modulePrefixes[_3a]={name:_3a,value:_3b};};dojo.requireLocalization=function(_3c,_3d,_3e,_3f){d.require("dojo.i18n");d.i18n._requireLocalization.apply(d.hostenv,arguments);};var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");dojo._Url=function(){var n=null,_40=arguments,uri=[_40[0]];for(var i=1;i<_40.length;i++){if(!_40[i]){continue;}var _41=new d._Url(_40[i]+""),_42=new d._Url(uri[0]+"");if(_41.path==""&&!_41.scheme&&!_41.authority&&!_41.query){if(_41.fragment!=n){_42.fragment=_41.fragment;}_41=_42;}else{if(!_41.scheme){_41.scheme=_42.scheme;if(!_41.authority){_41.authority=_42.authority;if(_41.path.charAt(0)!="/"){var _43=_42.path.substring(0,_42.path.lastIndexOf("/")+1)+_41.path;var _44=_43.split("/");for(var j=0;j<_44.length;j++){if(_44[j]=="."){if(j==_44.length-1){_44[j]="";}else{_44.splice(j,1);j--;}}else{if(j>0&&!(j==1&&_44[0]=="")&&_44[j]==".."&&_44[j-1]!=".."){if(j==(_44.length-1)){_44.splice(j,1);_44[j-1]="";}else{_44.splice(j-1,2);j-=2;}}}}_41.path=_44.join("/");}}}}uri=[];if(_41.scheme){uri.push(_41.scheme,":");}if(_41.authority){uri.push("//",_41.authority);}uri.push(_41.path);if(_41.query){uri.push("?",_41.query);}if(_41.fragment){uri.push("#",_41.fragment);}}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n;}};dojo._Url.prototype.toString=function(){return this.uri;};dojo.moduleUrl=function(_45,url){var loc=d._getModuleSymbols(_45).join("/");if(!loc){return null;}if(loc.lastIndexOf("/")!=loc.length-1){loc+="/";}var _46=loc.indexOf(":");if(loc.charAt(0)!="/"&&(_46==-1||_46>loc.indexOf("/"))){loc=d.baseUrl+loc;}return new d._Url(loc,url);};})();if(dojo.config["baseUrl"]){dojo.baseUrl=dojo.config["baseUrl"];}else{dojo.baseUrl="./";}dojo.locale=dojo.locale||String(java.util.Locale.getDefault().toString().replace("_","-").toLowerCase());dojo._name="rhino";dojo.isRhino=true;if(typeof print=="function"){console.debug=print;}if(!("byId" in dojo)){dojo.byId=function(id,doc){if(id&&(typeof id=="string"||id instanceof String)){if(!doc){doc=document;}return doc.getElementById(id);}return id;};}dojo._isLocalUrl=function(uri){var _47=(new java.io.File(uri)).exists();if(!_47){var _48;try{_48=(new java.net.URL(uri)).openStream();_48.close();}finally{if(_48&&_48.close){_48.close();}}}return _47;};dojo._loadUri=function(uri,cb){if(dojo._loadedUrls[uri]){return true;}try{var _49;try{_49=dojo._isLocalUrl(uri);}catch(e){return false;}dojo._loadedUrls[uri]=true;if(cb){var _4a=(_49?_4b:_4c)(uri,"UTF-8");if(!eval("'‏'").length){_4a=String(_4a).replace(/[\u200E\u200F\u202A-\u202E]/g,function(_4d){return "\\u"+_4d.charCodeAt(0).toString(16);});}_4a=/^define\(/.test(_4a)?_4a:"("+_4a+")";cb(eval(_4a));}else{load(uri);}dojo._loadedUrls.push(uri);return true;}catch(e){dojo._loadedUrls[uri]=false;console.debug("rhino load('"+uri+"') failed. Exception: "+e);return false;}};dojo.exit=function(_4e){quit(_4e);};function _4b(_4f,_50){_50=_50||"utf-8";var jf=new java.io.File(_4f);var is=new java.io.FileInputStream(jf);return _51(is,_50);};function _4c(uri,_52){var _53=(new java.net.URL(uri)).openConnection();_52=_52||_53.getContentEncoding()||"utf-8";var is=_53.getInputStream();return _51(is,_52);};function _51(is,_54){var _55=new java.io.BufferedReader(new java.io.InputStreamReader(is,_54));try{var sb=new java.lang.StringBuffer();var _56="";while((_56=_55.readLine())!==null){sb.append(_56);sb.append(java.lang.System.getProperty("line.separator"));}return sb.toString();}finally{_55.close();}};dojo._getText=function(uri,_57){try{var _58=dojo._isLocalUrl(uri);var _59=(_58?_4b:_4c)(uri,"UTF-8");if(_59!==null){_59+="";}return _59;}catch(e){if(_57){return null;}else{throw e;}}};dojo.doc=typeof document!="undefined"?document:null;dojo.body=function(){return document.body;};if(typeof setTimeout=="undefined"||typeof clearTimeout=="undefined"){dojo._timeouts=[];clearTimeout=function(idx){if(!dojo._timeouts[idx]){return;}dojo._timeouts[idx].stop();};setTimeout=function(_5a,_5b){var def={sleepTime:_5b,hasSlept:false,run:function(){if(!this.hasSlept){this.hasSlept=true;java.lang.Thread.currentThread().sleep(this.sleepTime);}try{_5a();}catch(e){console.debug("Error running setTimeout thread:"+e);}}};var _5c=new java.lang.Runnable(def);var _5d=new java.lang.Thread(_5c);_5d.start();return dojo._timeouts.push(_5d)-1;};}if(dojo.config["modulePaths"]){for(var _5e in dojo.config["modulePaths"]){dojo.registerModulePath(_5e,dojo.config["modulePaths"][_5e]);}}if(!dojo._hasResource["dojo._base.lang"]){dojo._hasResource["dojo._base.lang"]=true;dojo.provide("dojo._base.lang");(function(){var d=dojo,_5f=Object.prototype.toString;dojo.isString=function(it){return (typeof it=="string"||it instanceof String);};dojo.isArray=function(it){return it&&(it instanceof Array||typeof it=="array");};dojo.isFunction=function(it){return _5f.call(it)==="[object Function]";};dojo.isObject=function(it){return it!==undefined&&(it===null||typeof it=="object"||d.isArray(it)||d.isFunction(it));};dojo.isArrayLike=function(it){return it&&it!==undefined&&!d.isString(it)&&!d.isFunction(it)&&!(it.tagName&&it.tagName.toLowerCase()=="form")&&(d.isArray(it)||isFinite(it.length));};dojo.isAlien=function(it){return it&&!d.isFunction(it)&&/\{\s*\[native code\]\s*\}/.test(String(it));};dojo.extend=function(_60,_61){for(var i=1,l=arguments.length;i<l;i++){d._mixin(_60.prototype,arguments[i]);}return _60;};dojo._hitchArgs=function(_62,_63){var pre=d._toArray(arguments,2);var _64=d.isString(_63);return function(){var _65=d._toArray(arguments);var f=_64?(_62||d.global)[_63]:_63;return f&&f.apply(_62||this,pre.concat(_65));};};dojo.hitch=function(_66,_67){if(arguments.length>2){return d._hitchArgs.apply(d,arguments);}if(!_67){_67=_66;_66=null;}if(d.isString(_67)){_66=_66||d.global;if(!_66[_67]){throw (["dojo.hitch: scope[\"",_67,"\"] is null (scope=\"",_66,"\")"].join(""));}return function(){return _66[_67].apply(_66,arguments||[]);};}return !_66?_67:function(){return _67.apply(_66,arguments||[]);};};dojo.delegate=dojo._delegate=(function(){function TMP(){};return function(obj,_68){TMP.prototype=obj;var tmp=new TMP();TMP.prototype=null;if(_68){d._mixin(tmp,_68);}return tmp;};})();var _69=function(obj,_6a,_6b){return (_6b||[]).concat(Array.prototype.slice.call(obj,_6a||0));};var _6c=function(obj,_6d,_6e){var arr=_6e||[];for(var x=_6d||0;x<obj.length;x++){arr.push(obj[x]);}return arr;};dojo._toArray=d.isIE?function(obj){return ((obj.item)?_6c:_69).apply(this,arguments);}:_69;dojo.partial=function(_6f){var arr=[null];return d.hitch.apply(d,arr.concat(d._toArray(arguments)));};var _70=d._extraNames,_71=_70.length,_72={};dojo.clone=function(o){if(!o||typeof o!="object"||d.isFunction(o)){return o;}if(o.nodeType&&"cloneNode" in o){return o.cloneNode(true);}if(o instanceof Date){return new Date(o.getTime());}if(o instanceof RegExp){return new RegExp(o);}var r,i,l,s,_73;if(d.isArray(o)){r=[];for(i=0,l=o.length;i<l;++i){if(i in o){r.push(d.clone(o[i]));}}}else{r=o.constructor?new o.constructor():{};}for(_73 in o){s=o[_73];if(!(_73 in r)||(r[_73]!==s&&(!(_73 in _72)||_72[_73]!==s))){r[_73]=d.clone(s);}}if(_71){for(i=0;i<_71;++i){_73=_70[i];s=o[_73];if(!(_73 in r)||(r[_73]!==s&&(!(_73 in _72)||_72[_73]!==s))){r[_73]=s;}}}return r;};dojo.trim=String.prototype.trim?function(str){return str.trim();}:function(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"");};var _74=/\{([^\}]+)\}/g;dojo.replace=function(_75,map,_76){return _75.replace(_76||_74,d.isFunction(map)?map:function(_77,k){return d.getObject(k,false,map);});};})();}if(!dojo._hasResource["dojo._base.array"]){dojo._hasResource["dojo._base.array"]=true;dojo.provide("dojo._base.array");(function(){var _78=function(arr,obj,cb){return [(typeof arr=="string")?arr.split(""):arr,obj||dojo.global,(typeof cb=="string")?new Function("item","index","array",cb):cb];};var _79=function(_7a,arr,_7b,_7c){var _7d=_78(arr,_7c,_7b);arr=_7d[0];for(var i=0,l=arr.length;i<l;++i){var _7e=!!_7d[2].call(_7d[1],arr[i],i,arr);if(_7a^_7e){return _7e;}}return _7a;};dojo.mixin(dojo,{indexOf:function(_7f,_80,_81,_82){var _83=1,end=_7f.length||0,i=0;if(_82){i=end-1;_83=end=-1;}if(_81!=undefined){i=_81;}if((_82&&i>end)||i<end){for(;i!=end;i+=_83){if(_7f[i]==_80){return i;}}}return -1;},lastIndexOf:function(_84,_85,_86){return dojo.indexOf(_84,_85,_86,true);},forEach:function(arr,_87,_88){if(!arr||!arr.length){return;}var _89=_78(arr,_88,_87);arr=_89[0];for(var i=0,l=arr.length;i<l;++i){_89[2].call(_89[1],arr[i],i,arr);}},every:function(arr,_8a,_8b){return _79(true,arr,_8a,_8b);},some:function(arr,_8c,_8d){return _79(false,arr,_8c,_8d);},map:function(arr,_8e,_8f){var _90=_78(arr,_8f,_8e);arr=_90[0];var _91=(arguments[3]?(new arguments[3]()):[]);for(var i=0,l=arr.length;i<l;++i){_91.push(_90[2].call(_90[1],arr[i],i,arr));}return _91;},filter:function(arr,_92,_93){var _94=_78(arr,_93,_92);arr=_94[0];var _95=[];for(var i=0,l=arr.length;i<l;++i){if(_94[2].call(_94[1],arr[i],i,arr)){_95.push(arr[i]);}}return _95;}});})();}if(!dojo._hasResource["dojo._base.declare"]){dojo._hasResource["dojo._base.declare"]=true;dojo.provide("dojo._base.declare");(function(){var d=dojo,mix=d._mixin,op=Object.prototype,_96=op.toString,_97=new Function,_98=0,_99="constructor";function err(msg,cls){throw new Error("declare"+(cls?" "+cls:"")+": "+msg);};function _9a(_9b,_9c){var _9d=[],_9e=[{cls:0,refs:[]}],_9f={},_a0=1,l=_9b.length,i=0,j,lin,_a1,top,_a2,rec,_a3,_a4;for(;i<l;++i){_a1=_9b[i];if(!_a1){err("mixin #"+i+" is unknown. Did you use dojo.require to pull it in?",_9c);}else{if(_96.call(_a1)!="[object Function]"){err("mixin #"+i+" is not a callable constructor.",_9c);}}lin=_a1._meta?_a1._meta.bases:[_a1];top=0;for(j=lin.length-1;j>=0;--j){_a2=lin[j].prototype;if(!_a2.hasOwnProperty("declaredClass")){_a2.declaredClass="uniqName_"+(_98++);}_a3=_a2.declaredClass;if(!_9f.hasOwnProperty(_a3)){_9f[_a3]={count:0,refs:[],cls:lin[j]};++_a0;}rec=_9f[_a3];if(top&&top!==rec){rec.refs.push(top);++top.count;}top=rec;}++top.count;_9e[0].refs.push(top);}while(_9e.length){top=_9e.pop();_9d.push(top.cls);--_a0;while(_a4=top.refs,_a4.length==1){top=_a4[0];if(!top||--top.count){top=0;break;}_9d.push(top.cls);--_a0;}if(top){for(i=0,l=_a4.length;i<l;++i){top=_a4[i];if(!--top.count){_9e.push(top);}}}}if(_a0){err("can't build consistent linearization",_9c);}_a1=_9b[0];_9d[0]=_a1?_a1._meta&&_a1===_9d[_9d.length-_a1._meta.bases.length]?_a1._meta.bases.length:1:0;return _9d;};function _a5(_a6,a,f){var _a7,_a8,_a9,_aa,_ab,_ac,_ad,opf,pos,_ae=this._inherited=this._inherited||{};if(typeof _a6=="string"){_a7=_a6;_a6=a;a=f;}f=0;_aa=_a6.callee;_a7=_a7||_aa.nom;if(!_a7){err("can't deduce a name to call inherited()",this.declaredClass);}_ab=this.constructor._meta;_a9=_ab.bases;pos=_ae.p;if(_a7!=_99){if(_ae.c!==_aa){pos=0;_ac=_a9[0];_ab=_ac._meta;if(_ab.hidden[_a7]!==_aa){_a8=_ab.chains;if(_a8&&typeof _a8[_a7]=="string"){err("calling chained method with inherited: "+_a7,this.declaredClass);}do{_ab=_ac._meta;_ad=_ac.prototype;if(_ab&&(_ad[_a7]===_aa&&_ad.hasOwnProperty(_a7)||_ab.hidden[_a7]===_aa)){break;}}while(_ac=_a9[++pos]);pos=_ac?pos:-1;}}_ac=_a9[++pos];if(_ac){_ad=_ac.prototype;if(_ac._meta&&_ad.hasOwnProperty(_a7)){f=_ad[_a7];}else{opf=op[_a7];do{_ad=_ac.prototype;f=_ad[_a7];if(f&&(_ac._meta?_ad.hasOwnProperty(_a7):f!==opf)){break;}}while(_ac=_a9[++pos]);}}f=_ac&&f||op[_a7];}else{if(_ae.c!==_aa){pos=0;_ab=_a9[0]._meta;if(_ab&&_ab.ctor!==_aa){_a8=_ab.chains;if(!_a8||_a8.constructor!=="manual"){err("calling chained constructor with inherited",this.declaredClass);}while(_ac=_a9[++pos]){_ab=_ac._meta;if(_ab&&_ab.ctor===_aa){break;}}pos=_ac?pos:-1;}}while(_ac=_a9[++pos]){_ab=_ac._meta;f=_ab?_ab.ctor:_ac;if(f){break;}}f=_ac&&f;}_ae.c=f;_ae.p=pos;if(f){return a===true?f:f.apply(this,a||_a6);}};function _af(_b0,_b1){if(typeof _b0=="string"){return this.inherited(_b0,_b1,true);}return this.inherited(_b0,true);};function _b2(cls){var _b3=this.constructor._meta.bases;for(var i=0,l=_b3.length;i<l;++i){if(_b3[i]===cls){return true;}}return this instanceof cls;};function _b4(_b5,_b6){var _b7,i=0,l=d._extraNames.length;for(_b7 in _b6){if(_b7!=_99&&_b6.hasOwnProperty(_b7)){_b5[_b7]=_b6[_b7];}}for(;i<l;++i){_b7=d._extraNames[i];if(_b7!=_99&&_b6.hasOwnProperty(_b7)){_b5[_b7]=_b6[_b7];}}};function _b8(_b9,_ba){var _bb,t,i=0,l=d._extraNames.length;for(_bb in _ba){t=_ba[_bb];if((t!==op[_bb]||!(_bb in op))&&_bb!=_99){if(_96.call(t)=="[object Function]"){t.nom=_bb;}_b9[_bb]=t;}}for(;i<l;++i){_bb=d._extraNames[i];t=_ba[_bb];if((t!==op[_bb]||!(_bb in op))&&_bb!=_99){if(_96.call(t)=="[object Function]"){t.nom=_bb;}_b9[_bb]=t;}}return _b9;};function _bc(_bd){_b8(this.prototype,_bd);return this;};function _be(_bf,_c0){return function(){var a=arguments,_c1=a,a0=a[0],f,i,m,l=_bf.length,_c2;if(!(this instanceof a.callee)){return _c3(a);}if(_c0&&(a0&&a0.preamble||this.preamble)){_c2=new Array(_bf.length);_c2[0]=a;for(i=0;;){a0=a[0];if(a0){f=a0.preamble;if(f){a=f.apply(this,a)||a;}}f=_bf[i].prototype;f=f.hasOwnProperty("preamble")&&f.preamble;if(f){a=f.apply(this,a)||a;}if(++i==l){break;}_c2[i]=a;}}for(i=l-1;i>=0;--i){f=_bf[i];m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,_c2?_c2[i]:a);}}f=this.postscript;if(f){f.apply(this,_c1);}};};function _c4(_c5,_c6){return function(){var a=arguments,t=a,a0=a[0],f;if(!(this instanceof a.callee)){return _c3(a);}if(_c6){if(a0){f=a0.preamble;if(f){t=f.apply(this,t)||t;}}f=this.preamble;if(f){f.apply(this,t);}}if(_c5){_c5.apply(this,a);}f=this.postscript;if(f){f.apply(this,a);}};};function _c7(_c8){return function(){var a=arguments,i=0,f,m;if(!(this instanceof a.callee)){return _c3(a);}for(;f=_c8[i];++i){m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,a);break;}}f=this.postscript;if(f){f.apply(this,a);}};};function _c9(_ca,_cb,_cc){return function(){var b,m,f,i=0,_cd=1;if(_cc){i=_cb.length-1;_cd=-1;}for(;b=_cb[i];i+=_cd){m=b._meta;f=(m?m.hidden:b.prototype)[_ca];if(f){f.apply(this,arguments);}}};};function _ce(_cf){_97.prototype=_cf.prototype;var t=new _97;_97.prototype=null;return t;};function _c3(_d0){var _d1=_d0.callee,t=_ce(_d1);_d1.apply(t,_d0);return t;};d.declare=function(_d2,_d3,_d4){if(typeof _d2!="string"){_d4=_d3;_d3=_d2;_d2="";}_d4=_d4||{};var _d5,i,t,_d6,_d7,_d8,_d9,_da=1,_db=_d3;if(_96.call(_d3)=="[object Array]"){_d8=_9a(_d3,_d2);t=_d8[0];_da=_d8.length-t;_d3=_d8[_da];}else{_d8=[0];if(_d3){if(_96.call(_d3)=="[object Function]"){t=_d3._meta;_d8=_d8.concat(t?t.bases:_d3);}else{err("base class is not a callable constructor.",_d2);}}else{if(_d3!==null){err("unknown base class. Did you use dojo.require to pull it in?",_d2);}}}if(_d3){for(i=_da-1;;--i){_d5=_ce(_d3);if(!i){break;}t=_d8[i];(t._meta?_b4:mix)(_d5,t.prototype);_d6=new Function;_d6.superclass=_d3;_d6.prototype=_d5;_d3=_d5.constructor=_d6;}}else{_d5={};}_b8(_d5,_d4);t=_d4.constructor;if(t!==op.constructor){t.nom=_99;_d5.constructor=t;}for(i=_da-1;i;--i){t=_d8[i]._meta;if(t&&t.chains){_d9=mix(_d9||{},t.chains);}}if(_d5["-chains-"]){_d9=mix(_d9||{},_d5["-chains-"]);}t=!_d9||!_d9.hasOwnProperty(_99);_d8[0]=_d6=(_d9&&_d9.constructor==="manual")?_c7(_d8):(_d8.length==1?_c4(_d4.constructor,t):_be(_d8,t));_d6._meta={bases:_d8,hidden:_d4,chains:_d9,parents:_db,ctor:_d4.constructor};_d6.superclass=_d3&&_d3.prototype;_d6.extend=_bc;_d6.prototype=_d5;_d5.constructor=_d6;_d5.getInherited=_af;_d5.inherited=_a5;_d5.isInstanceOf=_b2;if(_d2){_d5.declaredClass=_d2;d.setObject(_d2,_d6);}if(_d9){for(_d7 in _d9){if(_d5[_d7]&&typeof _d9[_d7]=="string"&&_d7!=_99){t=_d5[_d7]=_c9(_d7,_d8,_d9[_d7]==="after");t.nom=_d7;}}}return _d6;};d.safeMixin=_b8;})();}if(!dojo._hasResource["dojo._base.Deferred"]){dojo._hasResource["dojo._base.Deferred"]=true;dojo.provide("dojo._base.Deferred");(function(){var _dc=function(){};var _dd=Object.freeze||function(){};dojo.Deferred=function(_de){var _df,_e0,_e1,_e2,_e3;var _e4=(this.promise={});function _e5(_e6){if(_e0){throw new Error("This deferred has already been resolved");}_df=_e6;_e0=true;_e7();};function _e7(){var _e8;while(!_e8&&_e3){var _e9=_e3;_e3=_e3.next;if((_e8=(_e9.progress==_dc))){_e0=false;}var _ea=(_e1?_e9.error:_e9.resolved);if(_ea){try{var _eb=_ea(_df);if(_eb&&typeof _eb.then==="function"){_eb.then(dojo.hitch(_e9.deferred,"resolve"),dojo.hitch(_e9.deferred,"reject"));continue;}var _ec=_e8&&_eb===undefined;if(_e8&&!_ec){_e1=_eb instanceof Error;}_e9.deferred[_ec&&_e1?"reject":"resolve"](_ec?_df:_eb);}catch(e){_e9.deferred.reject(e);}}else{if(_e1){_e9.deferred.reject(_df);}else{_e9.deferred.resolve(_df);}}}};this.resolve=this.callback=function(_ed){this.fired=0;this.results=[_ed,null];_e5(_ed);};this.reject=this.errback=function(_ee){_e1=true;this.fired=1;_e5(_ee);this.results=[null,_ee];if(!_ee||_ee.log!==false){(dojo.config.deferredOnError||function(x){console.error(x);})(_ee);}};this.progress=function(_ef){var _f0=_e3;while(_f0){var _f1=_f0.progress;_f1&&_f1(_ef);_f0=_f0.next;}};this.addCallbacks=function(_f2,_f3){this.then(_f2,_f3,_dc);return this;};this.then=_e4.then=function(_f4,_f5,_f6){var _f7=_f6==_dc?this:new dojo.Deferred(_e4.cancel);var _f8={resolved:_f4,error:_f5,progress:_f6,deferred:_f7};if(_e3){_e2=_e2.next=_f8;}else{_e3=_e2=_f8;}if(_e0){_e7();}return _f7.promise;};var _f9=this;this.cancel=_e4.cancel=function(){if(!_e0){var _fa=_de&&_de(_f9);if(!_e0){if(!(_fa instanceof Error)){_fa=new Error(_fa);}_fa.log=false;_f9.reject(_fa);}}};_dd(_e4);};dojo.extend(dojo.Deferred,{addCallback:function(_fb){return this.addCallbacks(dojo.hitch.apply(dojo,arguments));},addErrback:function(_fc){return this.addCallbacks(null,dojo.hitch.apply(dojo,arguments));},addBoth:function(_fd){var _fe=dojo.hitch.apply(dojo,arguments);return this.addCallbacks(_fe,_fe);},fired:-1});})();dojo.when=function(_ff,_100,_101,_102){if(_ff&&typeof _ff.then==="function"){return _ff.then(_100,_101,_102);}return _100(_ff);};}if(!dojo._hasResource["dojo._base.json"]){dojo._hasResource["dojo._base.json"]=true;dojo.provide("dojo._base.json");dojo.fromJson=function(json){return eval("("+json+")");};dojo._escapeString=function(str){return ("\""+str.replace(/(["\\])/g,"\\$1")+"\"").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r");};dojo.toJsonIndentStr="\t";dojo.toJson=function(it,_103,_104){if(it===undefined){return "undefined";}var _105=typeof it;if(_105=="number"||_105=="boolean"){return it+"";}if(it===null){return "null";}if(dojo.isString(it)){return dojo._escapeString(it);}var _106=arguments.callee;var _107;_104=_104||"";var _108=_103?_104+dojo.toJsonIndentStr:"";var tf=it.__json__||it.json;if(dojo.isFunction(tf)){_107=tf.call(it);if(it!==_107){return _106(_107,_103,_108);}}if(it.nodeType&&it.cloneNode){throw new Error("Can't serialize DOM nodes");}var sep=_103?" ":"";var _109=_103?"\n":"";if(dojo.isArray(it)){var res=dojo.map(it,function(obj){var val=_106(obj,_103,_108);if(typeof val!="string"){val="undefined";}return _109+_108+val;});return "["+res.join(","+sep)+_109+_104+"]";}if(_105=="function"){return null;}var _10a=[],key;for(key in it){var _10b,val;if(typeof key=="number"){_10b="\""+key+"\"";}else{if(typeof key=="string"){_10b=dojo._escapeString(key);}else{continue;}}val=_106(it[key],_103,_108);if(typeof val!="string"){continue;}_10a.push(_109+_108+_10b+":"+sep+val);}return "{"+_10a.join(","+sep)+_109+_104+"}";};}if(!dojo._hasResource["dojo._base.Color"]){dojo._hasResource["dojo._base.Color"]=true;dojo.provide("dojo._base.Color");(function(){var d=dojo;dojo.Color=function(_10c){if(_10c){this.setColor(_10c);}};dojo.Color.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:d.config.transparentColor||[255,255,255]};dojo.extend(dojo.Color,{r:255,g:255,b:255,a:1,_set:function(r,g,b,a){var t=this;t.r=r;t.g=g;t.b=b;t.a=a;},setColor:function(_10d){if(d.isString(_10d)){d.colorFromString(_10d,this);}else{if(d.isArray(_10d)){d.colorFromArray(_10d,this);}else{this._set(_10d.r,_10d.g,_10d.b,_10d.a);if(!(_10d instanceof d.Color)){this.sanitize();}}}return this;},sanitize:function(){return this;},toRgb:function(){var t=this;return [t.r,t.g,t.b];},toRgba:function(){var t=this;return [t.r,t.g,t.b,t.a];},toHex:function(){var arr=d.map(["r","g","b"],function(x){var s=this[x].toString(16);return s.length<2?"0"+s:s;},this);return "#"+arr.join("");},toCss:function(_10e){var t=this,rgb=t.r+", "+t.g+", "+t.b;return (_10e?"rgba("+rgb+", "+t.a:"rgb("+rgb)+")";},toString:function(){return this.toCss(true);}});dojo.blendColors=function(_10f,end,_110,obj){var t=obj||new d.Color();d.forEach(["r","g","b","a"],function(x){t[x]=_10f[x]+(end[x]-_10f[x])*_110;if(x!="a"){t[x]=Math.round(t[x]);}});return t.sanitize();};dojo.colorFromRgb=function(_111,obj){var m=_111.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return m&&dojo.colorFromArray(m[1].split(/\s*,\s*/),obj);};dojo.colorFromHex=function(_112,obj){var t=obj||new d.Color(),bits=(_112.length==4)?4:8,mask=(1<<bits)-1;_112=Number("0x"+_112.substr(1));if(isNaN(_112)){return null;}d.forEach(["b","g","r"],function(x){var c=_112&mask;_112>>=bits;t[x]=bits==4?17*c:c;});t.a=1;return t;};dojo.colorFromArray=function(a,obj){var t=obj||new d.Color();t._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));if(isNaN(t.a)){t.a=1;}return t.sanitize();};dojo.colorFromString=function(str,obj){var a=d.Color.named[str];return a&&d.colorFromArray(a,obj)||d.colorFromRgb(str,obj)||d.colorFromHex(str,obj);};})();}if(!dojo._hasResource["dojo._base"]){dojo._hasResource["dojo._base"]=true;dojo.provide("dojo._base");}if(!dojo._hasResource["dojox.jtlc.CHT.scanner"]){dojo._hasResource["dojox.jtlc.CHT.scanner"]=true;dojo.provide("dojox.jtlc.CHT.scanner");dojox.jtlc._beginsWith=function(a,b){return a.substr(0,b.length)==b;};dojox.jtlc._hasPrefix=function(s,pfxs,map){for(var i=0;i<pfxs.length;++i){if(dojox.jtlc._beginsWith(s,map?map(pfxs[i]):pfxs[i])){return pfxs[i];}}return null;};dojox.jtlc._tokenizeCHT=function(_113){var dj=dojox.jtlc,_114=[{prefix:"<!--",suffix:"-->",allow:["-->"],extra:"￼"},{prefix:"<?",suffix:"?>",allow:["\"","'","?>","<!--"],markup:true,extra:"￿"},{prefix:"<",suffix:">",allow:["\"","'","{{",">","<!--"],extra:"￾"},{prefix:"{{",suffix:"}}",allow:["\"","'","(","[","{","}}"],substitution:true,extra:"�"},{prefix:"{",suffix:"}",allow:["\"","'","(","[","{","}"]},{prefix:"(",suffix:")",allow:["\"","'","(","[","{",")"]},{prefix:"[",suffix:"]",allow:["\"","'","(","[","{","]"]},{prefix:"\"",suffix:"\"",allow:["\"","\\"],inSubstitution:true},{prefix:"\"",suffix:"\"",allow:["\"","\\","{{"],inSubstitution:false},{prefix:"'",suffix:"'",allow:["'","\\"],inSubstitution:true},{prefix:"'",suffix:"'",allow:["'","\\","{{"],inSubstitution:false},{prefix:"\\",escape:true}],_115={suffix:"</script",allow:["\"","'","{{","</script"]},_116=[{allow:["<!--","<?","<","{{"]}],_117=0,_118="",_119=false,_11a=_113.replace(/(?:<(?:[?]\s*)?\/?[a-z_]\w*|<!--|-->|[?]?>|[{][{]?|[}][}]?|["'\[\]()\\\ufeff])/ig,function(s,pos,src){if(s==="﻿"){return "";}if(_116[0].escape){_116.shift();if(pos==lp+1){return s;}}var pfx=dj._hasPrefix(s.toLowerCase(),_116[0].allow),lp=_117;_117=pos+s.length;if(pfx){if(pfx==_116[0].suffix){var top=_116.shift();if(top.substitution){_119=false;}if(top!==_115){if(!top.markup&&s.charAt(s.length-1)==">"&&_118=="script"){_116.unshift(_115);return s;}return (top.substitution?"":s)+(top.extra||"");}}if(pfx=dj._hasPrefix(pfx,_114,function(b){if("inSubstitution" in b&&b.inSubstitution!=_119){return "￿";}else{return b.prefix;}})){if(pfx.escape){return s;}if(s.charAt(0)=="<"){_118=/^<(\/?[a-z_]*)/i.exec(s)[1].toLowerCase();}_116.unshift(pfx);if(pfx.substitution){_119=true;}return (_118!="/script"&&pfx.extra||"")+(pfx.substitution?"":s);}}return s;}).split(/(?:\ufffc[\s\S]*?\ufffc|\ufffe|\s*\uffff\s*)/);if(_116.length>1){throw Error("Unbalanced delimiters -- expected "+dj.stringLiteral(_116[0].suffix));}return _11a;};dojox.jtlc._CHTElement=function(text){this.text=text;if(/^<[?]\s*\/([a-z_]\w*(?:\s*[.]\s*[a-z_]\w*)*)[\s\S]*?[?]>$/i.exec(text)){this.closeTag=RegExp.$1.split(/\s*[.]\s*/).join(".");}else{if(/^<[?]\s*([a-z_]\w*(?:\s*[.]\s*[a-z_]\w*)*)([\s\S]*?)\s*[?]>$/i.exec(text)){var body=RegExp.$2;this.openTag=RegExp.$1.split(/\s*[.]\s*/).join(".");this.kwarg={};if(/^\s+(?![a-z]\w*=)(["']?)((?:\\.|[^\\])*?)\1(?=\s|$)/i.exec(body)){this.arg=RegExp.$2;body=body.substr(RegExp.lastMatch.length);}while(body.length&&/^\s+([a-z_]\w*)=/i.exec(body)){body=body.substr(RegExp.lastMatch.length);var name=RegExp.$1;if(!/^(["']?)((?:\\.|[^\\])*?)\1(?=\s|$)/.exec(body)){break;}body=body.substr(RegExp.lastMatch.length);this.kwarg[name]=RegExp.$2;}if(body.length){throw Error("Invalid CHT tag: "+text);}}else{throw Error("Invalid CHT tag: "+text);}}};}if(!dojo._hasResource["dojox.jtlc.CHT.instance"]){dojo._hasResource["dojox.jtlc.CHT.instance"]=true;dojo.provide("dojox.jtlc.CHT.instance");}if(!dojo._hasResource["dojox.json.query"]){dojo._hasResource["dojox.json.query"]=true;dojo.provide("dojox.json.query");(function(){dojox.json._slice=function(obj,_11b,end,step){var len=obj.length,_11c=[];end=end||len;_11b=(_11b<0)?Math.max(0,_11b+len):Math.min(len,_11b);end=(end<0)?Math.max(0,end+len):Math.min(len,end);for(var i=_11b;i<end;i+=step){_11c.push(obj[i]);}return _11c;};dojox.json._find=function e(obj,name){var _11d=[];function walk(obj){if(name){if(name===true&&!(obj instanceof Array)){_11d.push(obj);}else{if(obj[name]){_11d.push(obj[name]);}}}for(var i in obj){var val=obj[i];if(!name){_11d.push(val);}else{if(val&&typeof val=="object"){walk(val);}}}};if(name instanceof Array){if(name.length==1){return obj[name[0]];}for(var i=0;i<name.length;i++){_11d.push(obj[name[i]]);}}else{walk(obj);}return _11d;};dojox.json._distinctFilter=function(_11e,_11f){var _120=[];var _121={};for(var i=0,l=_11e.length;i<l;++i){var _122=_11e[i];if(_11f(_122,i,_11e)){if((typeof _122=="object")&&_122){if(!_122.__included){_122.__included=true;_120.push(_122);}}else{if(!_121[_122+typeof _122]){_121[_122+typeof _122]=true;_120.push(_122);}}}}for(i=0,l=_120.length;i<l;++i){if(_120[i]){delete _120[i].__included;}}return _120;};dojox.json.query=function(_123,obj){var _124=0;var str=[];_123=_123.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(t){_124+=t=="["?1:t=="]"?-1:0;return (t=="]"&&_124>0)?"`]":(t.charAt(0)=="\""||t.charAt(0)=="'")?"`"+(str.push(t)-1):t;});var _125="";function call(name){_125=name+"("+_125;};function _126(t,a,b,c,d,e,f,g){return str[g].match(/[\*\?]/)||f=="~"?"/^"+str[g].substring(1,str[g].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+(f=="~"?"$/i":"$/")+".test("+a+")":t;};_123.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw new Error("Unsafe function call");});_123=_123.replace(/([^=]=)([^=])/g,"$1=$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(t){return t.charAt(0)=="."?t:t=="@"?"$obj":(t.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+t;}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(t,a,b){var oper=t.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/);if(oper){var _127="";if(t.match(/^\./)){call("dojox.json._find");_127=",true)";}call(oper[1].match(/\=/)?"dojo.map":oper[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter");return _127+",function($obj){return "+oper[2]+"})";}oper=t.match(/^\[\s*([\/\\].*)\]/);if(oper){return ".concat().sort(function(a,b){"+oper[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(t,a,b){return "var av= "+b.replace(/\$obj/,"a")+",bv= "+b.replace(/\$obj/,"b")+";if(av>bv||bv==null){return "+(a=="/"?1:-1)+";}\n"+"if(bv>av||av==null){return "+(a=="/"?-1:1)+";}\n";})+"return 0;})";}oper=t.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/);if(oper){call("dojox.json._slice");return ","+(oper[1]||0)+","+(oper[2]||0)+","+(oper[3]||1)+")";}if(t.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)){call("dojox.json._find");return (t.charAt(1)=="."?",'"+b+"'":t.match(/,/)?","+t:"")+")";}return t;}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,_126).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(t,a,b,c,d,e,f,g){return _126(t,c,d,e,f,g,b,a);});_123=_125+(_123.charAt(0)=="$"?"":"$")+_123.replace(/`([0-9]+|\])/g,function(t,a){return a=="]"?"]":str[a];});var _128=eval("1&&function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj=$;return "+_123+"}");for(var i=0;i<arguments.length-1;i++){arguments[i]=arguments[i+1];}return obj?_128.apply(this,arguments):_128;};})();}if(!dojo._hasResource["dojox.jtlc.prettyPrint"]){dojo._hasResource["dojox.jtlc.prettyPrint"]=true;dojo.provide("dojox.jtlc.prettyPrint");dojox.jtlc.prettyPrint=function(js){var _129={"/*":{suffix:"*/",allow:"|*/"},"//":{suffix:"\n",allow:"|\n"},"\"":{suffix:"\"",allow:"|\""},"'":{suffix:"'",allow:"|'"},"for(":{suffix:")",allow:"|(|)"},"(":{suffix:")",allow:"|(|)"}},_12a=[{allow:"|/*|*/|//|\"|'|;|{|}|\n|for("}],_12b="\t";return ("\n"+js).replace(/(?:\/\*|\*\/|\/\/|[;{}]\s*|["')\n]|\\.|(?:for)?\()/g,function(_12c,_12d,src){var next=_12d+_12c.length,_12e=/\s+$/.exec(_12c);if(_12e&&_12e[0]!=_12c){_12c=_12c.substr(_12c,_12c.length-_12e[0].length);}if(_12c.substr(0,1)=="\\"||_12a[0].allow.indexOf("|"+_12c)<0){return src.substring(_12d,next);}if(_12a[0].suffix===_12c){_12a.shift();}else{if(_12c in _129){_12a.unshift(_129[_12c]);}}if(_12c=="\n"){return _12c+_12b;}if("{};".indexOf(_12c)<0){return _12c;}var _12f="",_130="\n"+_12b;if(_12c=="{"){_12b+="\t";_130+="\t";}else{if(_12c=="}"){_12b=_12b.substr(0,_12b.length-1);if("};".indexOf(src.substr(_12d-1,1))<0){_12f="\n"+_12b+"\t";}if(");,".indexOf(src.substr(next,1))>=0){_130="";}else{_130="\n"+_12b;}}}return _12f+_12c+_130;}).replace(/\t(\}|$)/g,"$1");};}if(!dojo._hasResource["dojox.jtlc.compile"]){dojo._hasResource["dojox.jtlc.compile"]=true;dojo.provide("dojox.jtlc.compile");if(dojo.config.isDebug||dojo.config.jtlcIsReadable){dojo.require("dojox.jtlc.prettyPrint");}dojox.jtlc._varNameLetters="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";dojox.jtlc._varName=function(n){var r=dojox.jtlc._varNameLetters.charAt(n%52);n=Math.floor(n/52);while(n>0){r+=dojox.jtlc._varNameLetters.charAt(n%62);n=Math.floor(n/62);}return r;};dojox.jtlc.stringLiteral=function(s){return "\""+s.toString().replace(/[\\"\r\n\t]/g,function(x){return {"\\":"\\\\","\"":"\\\"","\n":"\\n","\t":"\\t","\r":""}[x];})+"\"";};dojox.jtlc.arrayAppend=function(dst,src){src.unshift(0);src.unshift(dst.length);dst.splice.apply(dst,src);};dojox.jtlc._replaceWithinJavascriptAll=function(s,_131,repl){return s.replace(/((?:.|\n)*?)((["']).*?[^\\]?\2|$)/g,function(_132,code,_133){return code.replace(_131,repl)+_133;});};dojox.jtlc._replaceWithinJavascriptOnce=function(s,_134,repl){var once=false;return s.replace(/((?:.|\n)*?)((["']).*?[^\\]?\2|$)/g,function(_135,code,_136){if(once){return code+_136;}var v=code.replace(_134,repl);if(v!=code){once=true;}return v+_136;});};dojox.jtlc.replaceWithinJavascript=function(s,_137,repl){return _137 instanceof RegExp&&_137.global?dojox.jtlc._replaceWithinJavascriptAll(s,_137,repl):dojox.jtlc._replaceWithinJavascriptOnce(s,_137,repl);};dojox.jtlc._eval=function(x){return eval(x);};dojox.jtlc._optimizeExtraBrackets=function(body){var _138;while((_138=dojox.jtlc.replaceWithinJavascript(body,/([^a-z0-9_]|^)\(((?:_|[a-z])[a-z0-9]*)\)/ig,"$1$2"))!=body){body=_138;}return body;};dojox.jtlc.compile=function(tpl,lang,_139){var _13a={globals:{names:[],values:[]},locals:[],max_local:0,code:["var $=arguments"],expressions:[],optimizers:dojo.config.isDebug||dojo.config.jtlcIsReadable?{"_optimizeExtraBrackets":dojox.jtlc._optimizeExtraBrackets}:{}};if(_139){_13a=dojo.mixin({},_139,_13a);}_13a=dojo.delegate(lang,_13a);_13a.compileArguments={language:lang,options:_139};_13a.compileBody(tpl);while(_13a.locals.length<_13a.max_local){_13a.addLocal();}if(_13a.max_local){_13a.code[0]+=","+_13a.locals.join(",");}_13a.code[0]+=";";_13a.code.push("return "+_13a.popExpression()+";");var body=_13a.code.join("");body=_13a.optimize(body);if((dojo.config.isDebug||dojo.config.jtlcIsReadable)&&!dojo.isIE){body=dojox.jtlc.prettyPrint(body);}return _13a.decorate(_13a.makeClosure(body).apply(null,_13a.globals.values));};dojo.declare("dojox.jtlc.Language",null,{singletonQuery:{failOnNoResults:false,failOnManyResults:false},elideNulls:false,failOnDuplicateKeys:false,constructor:function(_13b){if(_13b){dojo.mixin(this,_13b);for(var i in _13b){if(_13b.hasOwnProperty(i)&&i in this.constructor.prototype){this[i]=dojo.mixin({},this.constructor.prototype[i],this[i]);}}}},compileBody:function(tpl){return this.compile(tpl);},compile:function(tpl){var t=typeof (tpl);if(t in this){this[t](tpl);}else{throw Error("Unexpected "+t+" value in template: "+tpl.toString());}},optimize:function(body){for(var i in this.optimizers){body=this.optimizers[i].call(this,body);}return body;},addGlobal:function(_13c){for(var i=0;i<this.globals.values.length;++i){if(this.globals.values[i]===_13c){return this.globals.names[i];}}var name="_"+dojox.jtlc._varName(this.globals.names.length);this.globals.names.push(name);this.globals.values.push(_13c);return name;},addLocal:function(){var name=dojox.jtlc._varName(this.locals.length);this.locals.push(name);if(this.locals.length>this.max_local){this.max_local=this.locals.length;}return name;},popExpression:function(){var expr=this.expressions.pop();if(this.locals.length&&this.locals[this.locals.length-1]===expr){this.locals.pop();}return expr;},decorate:function(f){return f;},makeClosure:dojo.isIE?function(_13d){return new Function(this.globals.names,"function $self(){"+_13d+"} return $self;");}:new Function("inner_body","return dojox.jtlc._eval( \"(function(\" + this.globals.names.join(\",\") + \"){function $self(){\" + inner_body + \"} return $self;})\" +\t\t\t\t\t\t  (this.sourceUrl ? \"\\r\\n//@ sourceURL=\" + this.sourceUrl : \"\") );"),current_input:"$[0]",accumulated:function(init,sink,loop,_13e){var _13f=this.sink,_140=this.loop;if(_13f!==sink){this.sink=sink;if(init){this.code.push(this.sink.accumulator+init);}}if(loop!==_140){if(loop){this.loop=loop;}else{delete this.loop;}}var _141=this.hasOwnProperty("current_input")?this.current_input:null;if(_140&&loop!==_140&&_140.lockedItem){this.current_input="("+_140.item()+")";}_13e.call(this);if(_141!==(this.hasOwnProperty("current_input")?this.current_input:null)){if(_141){this.current_input=_141;}else{delete this.current_input;}}if(loop!==_140){if(_140){this.loop=_140;}else{delete this.loop;}}if(_13f!==sink){this.expressions.push(this.sink.accumulator);if(_13f){this.sink=_13f;}else{delete this.sink;}}},nonAccumulated:function(_142,_143){var _144=this.loop;if(this.loop){delete this.loop;}var _145=this.hasOwnProperty("current_input")?this.current_input:null;if(_143){this.current_input=_143;}else{if(_144&&_144.lockedItem){this.current_input="("+_144.item()+")";}}_142.call(this);if(_145!==(this.hasOwnProperty("current_input")?this.current_input:null)){if(_145){this.current_input=_145;}else{delete this.current_input;}}if(_144){this.loop=_144;}},generator:function(expr){if(!expr){expr=this.current_input;}if(this.loop){if(!this.loop.started()){this.loop.begin(expr);}this.expressions.push(this.loop.item());}else{this.expressions.push(expr);}},object:function(tpl){if(tpl===null){this.nullValue();}else{if("compile" in tpl){tpl.compile.call(this,tpl);}else{if(tpl.constructor===Array){this.array(tpl);}else{if(tpl.constructor!==Object){this.unknownObject(tpl);}else{this.dictionary(tpl);}}}}},dictionary:function(tpl){this.accumulated("={};",new dojox.jtlc._DictionarySink(this),null,function(){for(var i in tpl){if(tpl.hasOwnProperty(i)){this.sink.key=dojox.jtlc.stringLiteral(i);this.compile(tpl[i]);this.sink.append();}}});},array:function(tpl){this.accumulated("=[];",new dojox.jtlc._ArraySink(this),new dojox.jtlc._Loop(this),function(){for(var i=0;i<tpl.length;++i){if(tpl.hasOwnProperty(i)){this.compile(tpl[i]);this.sink.append();}}});},unknownObject:function(tpl){throw Error("Unexpected object in the template: "+tpl.toString());},nullValue:function(){throw Error("Unexpected null value in the template");}});dojo.declare("dojox.jtlc._Sink",null,{constructor:function(_146){this.compiler=_146;this.loops_to_close=[];},closeLoops:function(){while(this.loops_to_close.length>0){this.loops_to_close.pop().end();}}});dojo.declare("dojox.jtlc._DictionarySink",dojox.jtlc._Sink,{constructor:function(){this.accumulator=this.compiler.addLocal();},append:function(){if(this.compiler.elideNulls||this.compiler.failOnDuplicateKeys){this.compiler._dictionaryAppend=this.compiler._dictionaryAppend||this.compiler.addGlobal(new Function("d","k","v",(this.compiler.failOnDuplicateKeys?"if( k in d ) throw Error( 'Duplicate key ' + dojox.jtlc.stringLiteral(k) );":"")+(this.compiler.elideNulls?"if( v !== null )":"")+"d[k]=v;"));this.compiler.code.push(this.compiler._dictionaryAppend+"("+this.accumulator+","+this.key+","+this.compiler.popExpression()+");");}else{this.compiler.code.push(this.accumulator+"["+this.key+"]="+this.compiler.popExpression()+";");}this.closeLoops();}});dojo.declare("dojox.jtlc._ArraySink",dojox.jtlc._Sink,{constructor:function(){this.accumulator=this.compiler.addLocal();},append:function(){if(!("_arrayOptimizer" in this.compiler.optimizers)){this.compiler.optimizers._arrayOptimizer=this.optimize;}if(this.compiler.elideNulls){this.compiler._arrayAppend=this.compiler._arrayAppend||this.compiler.addGlobal(function(a,v){if(v){a.push(v);}});this.compiler.code.push(this.compiler._arrayAppend+"("+this.accumulator+","+this.compiler.popExpression()+");");}else{this.compiler.code.push(this.accumulator+".push("+this.compiler.popExpression()+");");}this.closeLoops();},optimize:function(body){var _147=this;return dojox.jtlc.replaceWithinJavascript(body,/for\(([a-zA-Z][a-zA-Z0-9]*)=0;\1<([a-zA-Z][a-zA-Z0-9]*).length;\+\+\1\){([a-zA-Z][a-zA-Z0-9]*)\.push\(\2\[\1\]\);}/g,function(_148,_149,src,dst){var g=_147.addGlobal(dojox.jtlc.arrayAppend);return g+"("+dst+","+src+")";});}});dojo.declare("dojox.jtlc._Loop",null,{constructor:function(_14a){this.compiler=_14a;},begin:function(init){if(this._items){throw Error("Internal error: loop initialized twice");}this._items=this.compiler.addLocal();this._i=this.compiler.addLocal();this.compiler.code.push((init===this._items?"":this._items+"="+init+";")+"for("+this._i+"=0;"+this._i+"<"+this._items+".length;++"+this._i+"){");if(this.compiler.sink){this.compiler.sink.loops_to_close.push(this);}},item:function(){if(!this._items){throw Error("Internal error: loop not initialized");}return this.lockedItem||this._items+"["+this._i+"]";},lockItem:function(item){if(!this._items){throw Error("_Loop.lockItem() called out of sequence");}var _14b=this.item();if(item!=_14b&&"("+item+")"!=_14b){this.lockedItemVar=this.lockedItemVar||this.compiler.addLocal();if(this.lockedItemVar!=item){this.compiler.code.push(this.lockedItemVar+"="+item+";");}this.lockedItem="("+this.lockedItemVar+")";}else{this.lockedItem=item;}},count:function(){if(!this._items){throw Error("Internal error: loop not initialized");}return "("+this._i+")";},end:function(){if(!this._items){throw Error("Internal error: loop not initialized");}delete this._items;delete this._i;this.compiler.code.push("}");if(this.lockedItemVar){this.compiler.locals.pop();}this.compiler.locals.pop();this.compiler.locals.pop();},started:function(){return !!this._items;}});}if(!dojo._hasResource["dojox.jtlc.tags"]){dojo._hasResource["dojox.jtlc.tags"]=true;dojo.provide("dojox.jtlc.tags");dojo.require("dojox.jtlc.compile");dojox.jtlc._copyArguments=function(args,_14c){return Array.prototype.slice.call(args,_14c||0);};dojox.jtlc.tags={};dojox.jtlc._declareTag=function(name,_14d,_14e){var cls=typeof _14d==="function"?_14d:dojo.declare(null,_14d);this.tags["_"+name]=cls;this.tags[name]=_14e?_14e(cls):function(){var t=dojo.delegate(cls.prototype);cls.apply(t,arguments);return t;};};dojox.jtlc._declareTag("many",{constructor:function(tpl){if(arguments.length!=1){throw Error("many() requires exactly one argument");}this.template=tpl;},compile:function(self){if(!this.sink){throw Error("Cannot use many() outside the context of an array or an object literal");}if(this.loop){this.compile(self.template);}else{this.accumulated(null,this.sink,new dojox.jtlc._Loop(this),function(){this.compile(self.template);});}}});dojox.jtlc._declareTag("one",{constructor:function(tpl){if(arguments.length!=1){throw Error("one() requires exactly one argument");}this.template=tpl;},compile:function(self){if(!this.loop){this.compile(self.template);}else{this.nonAccumulated(function(){this.compile(self.template);});}}});dojox.jtlc._declareTag("quote",{constructor:function(_14f){if(arguments.length!=1){throw Error("quote() requires exactly one argument");}this.value=_14f;},compile:function(self){switch(typeof self.value){case "boolean":case "number":this.expressions.push(self.value);break;case "string":this.expressions.push(dojox.jtlc.stringLiteral(self.value.toString()));break;default:this.expressions.push(this.addGlobal(self.value));}}});dojox.jtlc._declareTag("current",{compile:function(){this.generator();}});dojox.jtlc._declareTag("arg",{constructor:function(_150){if(arguments.length!=1){throw Error("arg() requires exactly one argument");}this.index=_150;},compile:function(self){this.expressions.push("$["+self.index.toString()+"]");}});dojox.jtlc._declareTag("acc",{constructor:function(tpl){if(arguments.length!=1){throw Error("tpl() requires exactly one argument");}this.arg=tpl;},compile:function(self){this.compile(self.arg);var _151=this.popExpression(),t=this.addLocal();if(t!=_151){this.code.push(t+"="+_151+";");}this.expressions.push(t);}});dojox.jtlc._declareTag("replace",{constructor:function(_152,arg){if(typeof _152!=="string"){throw Error("replace() expects formatting string, not "+_152.toString());}this.format=_152;if(arg){this.arg=arg;}},compile:function(self){this._replaceFunction=this._replaceFunction||this.addGlobal(this.replaceLanguage);if(self.arg){this.compile(self.arg);}else{this.generator();}this.expressions.push(this._replaceFunction+"("+dojox.jtlc.stringLiteral(self.format)+","+this.popExpression()+")");}});dojox.jtlc._declareTag("each",{constructor:function(_153,_154){this.inner=_153;this.outer=_154;},compile:function(self){if(!this.loop){throw Error("each() is never a singleton, wrap it in many() or []");}if(this.loop.started()){throw Error("each() used in a wrong context");}this.compile(self.outer);if(!this.loop.started()){throw Error("All arguments of each() must be generators");}this.loop.lockItem(this.popExpression());this.accumulated(null,this.sink,new dojox.jtlc._Loop(this),function(){this.compile(self.inner);});}},function(cls){return function(){if(arguments.length==0){throw Error("each() requires at least one argument");}else{if(arguments.length==1){return new cls(arguments[0],dojox.jtlc.tags.current());}else{var last=arguments[arguments.length-1];for(var i=arguments.length-2;i>=0;--i){last=new cls(arguments[i],last);}return last;}}};});dojo.declare("dojox.jtlc._MultiArgTag",null,{constructor:function(){if(arguments.length>1){this.args=dojox.jtlc._copyArguments(arguments,1);}else{this.args=[dojox.jtlc.tags.current()];}},argumentList:function(self){var n=self.args.length,r=[];while(n--){r.push(this.popExpression());}return r.join(",");},compileArgs:function(self,_155){this.nonAccumulated(function(){for(var i=self.args.length-1;i>=(_155?1:0);--i){this.compile(self.args[i]);}});if(_155){this.compile(self.args[0]);}}});dojox.jtlc._declareTag("expr",dojo.declare(dojox.jtlc._MultiArgTag,{constructor:function(expr){if(typeof expr!=="string"){throw Error("expr() expects a string, not "+expr.toString());}this.expr=dojo.trim(expr);if(this.expr==dojox.jtlc.replaceWithinJavascript(this.expr,/\$/g,"")&&/^[a-z_]/.test(this.expr)){this.expr="$."+this.expr;}},saveExpression:function(self,refs,i){var expr=this.expressions[this.expressions.length-1];refs[i]=expr.length>4?"("+expr+")":expr;},compile:function(self){var refs={},_156=false,expr=self.expr;dojox.jtlc.replaceWithinJavascript(self.expr,/\$[0-9#]?/g,function(s){if(!(s in refs)){refs[s]=1;}else{++refs[s];}_156=_156||s in {"$":1,"$#":1};});if(!_156&&this.loop&&!this.loop.started()){throw Error("Expression "+dojox.jtlc.stringLiteral(self.expr)+" cannot be used as a generator");}if("$#" in refs&&!this.loop){throw Error("$# cannot be used in singleton expressions");}var _157=this.expressions.length;if("$0" in refs){refs["$0"]=this.current_input;}this.nonAccumulated(function(){for(var i in refs){if(!(i in {"$":1,"$#":1,"$0":1})){var n=parseInt(i.charAt(1));if(self.args.length<=parseInt(n)){throw Error("Expression "+dojox.jtlc.stringLiteral(self.expr)+" refers to argument "+i+" that was not supplied");}this.compile(self.args[n]);self.saveExpression.call(this,self,refs,i);}}});if(this.loop&&!this.loop.started()||"$" in refs){this.compile(self.args[0]);if(!("$" in refs)){this.popExpression();}else{self.saveExpression.call(this,self,refs,"$");}}if("$#" in refs){refs["$#"]=this.loop.count();}while(this.expressions.length>_157){this.popExpression();}this.expressions.push(dojox.jtlc.replaceWithinJavascript(self.expr,/\$[0-9#]?/g,function(s){return refs[s];}));}}));dojo.declare("dojox.jtlc._ArrayOrGenerator",null,{constructor:function(tpl){this.template=tpl||dojox.jtlc.tags.current();},compileImpl:function(self,_158){var _159=false;if(this.loop&&!this.loop.started()){var _15a=this.loop;this.loop=dojo.delegate(this.loop,{begin:function(init){_15a.begin(_158+"("+init+")");}});_159=true;}this.nonAccumulated(function(){this.compile(self.template);});if(_159){this.generator(this.popExpression());}else{this.expressions.push(_158+"("+this.popExpression()+")");}}});dojox.jtlc._getValues=function(d){if(d instanceof Array){return d;}var res=[];for(var i in d){if(d.hasOwnProperty(i)){res.push(d[i]);}}return res;};dojox.jtlc._declareTag("from",dojo.declare(dojox.jtlc._ArrayOrGenerator,{compile:function(self){self.compileImpl.call(this,self,this._valueGenerator=this._valueGenerator||this.addGlobal(dojox.jtlc._getValues));}}));dojox.jtlc._getDictionaryKeys=function(d){var res=[];for(var i in d){if(d.hasOwnProperty(i)){res.push(i);}}return res;};dojox.jtlc._declareTag("keys",dojo.declare(dojox.jtlc._ArrayOrGenerator,{compile:function(self){self.compileImpl.call(this,self,this._keyGenerator=this._keyGenerator||this.addGlobal(dojox.jtlc._getDictionaryKeys));}}));dojox.jtlc._declareTag("setkey",{constructor:function(key,arg){if(typeof key==="undefined"){throw Error("setkey() requires at least one argument");}this.key=key;this.arg=arg||dojox.jtlc.tags.current();},compile:function(self){this.compile(self.arg);if(!this.sink||!this.sink.key){throw Error("setkey() should only be used within an object literal");}var _15b=this.popExpression(),t=this.addLocal();if(t!=_15b){this.code.push(t+"="+_15b+";");}this.nonAccumulated(function(){this.compile(self.key);},t);this.sink.key=this.popExpression();this.expressions.push(t);}});dojox.jtlc._declareTag("bind",dojo.declare(dojox.jtlc._MultiArgTag,{constructor:function(fn){if(typeof fn!=="function"){throw Error("First argument of bind() must be a function");}this.fn=fn;},compile:function(self){var fn=this.addGlobal(self.fn);self.compileArgs.call(this,self,true);this.expressions.push(fn+"("+self.argumentList.call(this,self)+")");}}));dojo.declare("dojox.jtlc._LastSink",dojox.jtlc._Sink,{constructor:function(){this.accumulator=this.compiler.addLocal();},append:function(){this.compiler.code.push(this.accumulator+"="+this.compiler.popExpression()+";");this.closeLoops();}});dojox.jtlc._declareTag("last",{constructor:function(tpl){this.arg=tpl||dojox.jtlc.tags.current();},compile:function(self){this.accumulated(null,new dojox.jtlc._LastSink(this),new dojox.jtlc._Loop(this),function(){this.compile(self.arg);this.sink.append();});}});dojox.jtlc._declareTag("defined",{constructor:function(tpl){this.arg=tpl||dojox.jtlc.tags.current();},compile:function(self){if(!this.loop||this.loop.started()){throw Error("defined() is never a singleton, wrap it in many() or []");}this.compile(self.arg);var _15c=this.popExpression(),t=this.addLocal();if(t!=_15c){this.code.push(t+"="+_15c+";");}this.code.push("if(typeof "+t+"===\"undefined\""+")continue;");this.expressions.push(t);}});dojox.jtlc._declareTag("query",dojo.declare(dojox.jtlc._MultiArgTag,{constructor:function(_15d){if(arguments.length<1){throw Error("query() requires at least 1 argument");}this.query=_15d;},callQuery:function(self){return this.addGlobal(this.queryLanguage(self.query))+"("+self.argumentList.call(this,self)+")";},compile:function(self){self.compileArgs.call(this,self);if(this.loop&&!this.loop.started()){this.generator(self.callQuery.call(this,self));}else{this.expressions.push(self.callQuery.call(this,self));}}}));dojo.declare("dojox.jtlc._GroupLoop",dojox.jtlc._Loop,{"-chains-":{begin:"after",end:"before"},constructor:function(_15e,key,_15f){this.key=typeof key==="object"&&key.constructor===Array?key:[key];this.nextItem=false;this.first_in_group=_15f;},item:function(){if(!this._items){throw Error("Internal error: loop not initialized");}return this.lockedItem||this._items+"["+this._i+(this.nextItem?"+1":"")+"]";},count:function(){return "("+(this.lockedItem?this.first_in_group:this._i+(this.nextItem?"+1":""))+")";},begin:function(){this.compiler.code.push("if("+this._i+"<"+this._items+".length-1){");for(var i=this.key.length-1;i>=0;--i){this.compiler.compile(this.key[i]);this.nextItem=true;this.compiler.compile(this.key[i]);this.nextItem=false;}this.compiler.code.push("if(");for(var i=0;i<this.key.length;++i){if(i){this.compiler.code.push("&&");}this.compiler.code.push(this.compiler.popExpression()+"=="+this.compiler.popExpression());}this.compiler.code.push(") continue;}");},end:function(){this.compiler.code.push(this.first_in_group+"="+this._i+"+1;");},lockItem:function(item){if(item!=this.item()){var _160=this.addLocal();this.compiler.code.push(_160+"="+this._i+";");this.compiler.code.push("for("+this._i+"="+this.first_in_group+";"+this._i+"<="+_160+";++"+this._i+")");this.compiler.code.push(this.item()+"="+item+";");this.compiler.code.push(this._i+"="+_160+";");this.locals.pop();}this.inherited(arguments,[this._items+".slice("+this.first_in_group+","+this._i+"+1)"]);}});dojox.jtlc._declareTag("group",{constructor:function(key,body,_161){this.key=key;this.body=body;if(_161){this.query=_161;}},compile:function(self){if(!("_groupOptimizer" in this.optimizers)){this.optimizers._groupOptimizer=self.optimize;}if(!this.loop){throw Error("group() is never a singleton, wrap it in many() or []");}var _162=this.addLocal();this.code.push(_162+"=0;");this.loop=new dojox.jtlc._GroupLoop(this,self.key,_162);if(self.query){this.compile(self.query);}else{this.generator();}this.loop.lockItem(this.popExpression());this.compile(self.body);},optimize:function(body){return dojox.jtlc.replaceWithinJavascript(body,/\(([a-z][a-z0-9]*)\.slice\(([a-z][a-z0-9]*),([a-z][a-z0-9]*)\+1\)\)(\.length|\[0\])/ig,function(_163,a,from,to,op){return op==".length"?"("+to+"-"+from+"+1)":a+"["+from+"]";});}});dojo.declare("dojox.jtlc._IotaLoop",dojox.jtlc._Loop,{"-chains-":{end:"after"},constructor:function(_164,_165){this._localVarCount=0;this._setParameter(_165.start,"_i",true);this._setParameter(_165.step,"_step");this._setParameter(_165.stop,"_stop");},_setParameter:function(to,name,_166){if(_166||typeof to==="string"&&to.length>4){this[name]=this.compiler.addLocal();this._localVarCount++;if(this[name]!==to){this.compiler.code.push(this[name]+"="+to+";");}}else{this[name]=to;}},_stopCondition:function(){return typeof this._step==="string"?"("+this._step+"<0?"+this._i+">"+this._stop+":"+this._i+"<"+this._stop+")":this._step<0?this._i+">"+this._stop:this._i+"<"+this._stop;},begin:function(){if(this._items){throw Error("Internal error: loop initialized twice");}this._items=true;this._count=this.compiler.addLocal();this.compiler.code.push("for("+this._count+"=0;"+this._stopCondition()+";++"+this._count+","+this._i+"+="+this._step+"){");if(this.compiler.sink){this.compiler.sink.loops_to_close.push(this);}},item:function(){if(!this._items){throw Error("Internal error: loop not initialized");}return "("+(this.lockedItem||this._i)+")";},count:function(){if(!this._items){throw Error("Internal error: loop not initialized");}return "("+this._count+")";},end:function(){while(--this._localVarCount){this.compiler.locals.pop();}}});dojox.jtlc._declareTag("iota",{constructor:function(){if(arguments.length==0||arguments.length>3){throw Error("iota() expects at least one and at most three arguments");}this.stop=arguments[arguments.length-1];if(arguments.length>1){this.start=arguments[0];}if(arguments.length>2){this.step=arguments[1];}},defaultParams:{start:0,step:1},iotaParams:function(self){var _167=dojo.delegate(self.defaultParams),_168=this;function _169(what){switch(typeof self[what]){case "number":_167[what]=self[what];case "undefined":return false;}_168.compile(self[what]);return true;};this.nonAccumulated(function(){var _16a=_169("start"),_16b=_169("step"),_16c=_169("stop");if(_16c){_167.stop=this.popExpression();}if(_16b){_167.step=this.popExpression();}if(_16a){_167.start=this.popExpression();}});return _167;},compile:function(self){if(!this.loop){this.compile([self]);return;}if(this.loop.started()){throw Error("iota() used in a wrong context");}this.loop=new dojox.jtlc._IotaLoop(this,self.iotaParams.call(this,self));this.generator();}});}if(!dojo._hasResource["dojox.jtlc.JXL"]){dojo._hasResource["dojox.jtlc.JXL"]=true;dojo.provide("dojox.jtlc.JXL");dojo.require("dojox.json.query");dojo.require("dojox.jtlc.tags");dojo.require("dojox.jtlc.compile");dojo.declare("dojox.jtlc.JXL",dojox.jtlc.Language,{replaceLanguage:dojo.replace,queryLanguage:dojox.json.query,string:function(_16d){this.compile(this.loop&&!this.loop.started()?dojox.jtlc.tags.query(_16d):dojox.jtlc.tags.expr(_16d));},number:function(_16e){this.compile(dojox.jtlc.tags.quote(_16e));},"boolean":function(_16f){this.compile(dojox.jtlc.tags.quote(_16f));},"function":function(fn){this.compile(dojox.jtlc.tags.bind(fn));},unknownObject:function(obj){this.compile(dojox.jtlc.tags.quote(obj));},nullObject:function(obj){this.expressions.push("null");}});}if(!dojo._hasResource["dojox.jtlc.qplus"]){dojo._hasResource["dojox.jtlc.qplus"]=true;dojo.provide("dojox.jtlc.qplus");dojo.require("dojox.jtlc.JXL");(function(){var dj=dojox.jtlc,d=dojo;function _170(str){if(/^\s*-?\d+(\.\d*)?([eE]-?\d+)?\s*$/.exec(str)){return RegExp.$2||RegExp.$3?parseFloat(str):parseInt(str);}if(/^\s*(true|false)\s*$/.exec(str)){return RegExp.$1==="true";}return str;};d.declare("dojox.jtlc.qplus",dj.JXL,{string:function(_171){this.compile(this.loop&&!this.loop.started()?this.tags.query(_171):this.tags.expr(_171));},_exprBrackets:{"[":{close:"]",allow:"[]({\"'"},"(":{close:")",allow:"[(){\"'"},"{":{close:"}",allow:"[({}\"'"},"\"":{close:"\"",allow:"\""},"'":{close:"'",allow:"'"}},_singleScanRegex:/(?:[\[\](){}"']|\\.|\|\|?)/g,_multipleScanRegex:/(?:[\[\](){}"',]|\\.|\|\|?)/g,_initScanStack:{close:"",allow:"[](){}\"'|,"},parse:function(_172,_173){var _174={",":"￿","|":"￾"},_175=[this._initScanStack],_176=this._exprBrackets,prep=_172.replace(_173?this._multipleScanRegex:this._singleScanRegex,function(c){if(c[0]=="\\"){return c[1];}if(_175[0].allow.indexOf(c)>=0){if(c==_175[0].close){_175.shift();}else{if(c in _176){_175.unshift(_176[c]);}else{if(c in _174){return _174[c];}}}}return c;});if(_175.length>1){throw Error("Unbalanced delimiters -- expected "+dj.stringLiteral(_175[0].close));}if(_173){return d.map(prep.split(_174[","]),function(p){return this._parseList(p.split(_174["|"]));},this);}else{return this._parseList(prep.split(_174["|"]));}},_parseList:function(list){var _177;while(list.length){var item=list.shift();if(/^\s*([a-z_]\w*(?:\s*[.]\s*[a-z_]\w*)*)\s*([:](?:.|\n)*)?$/i.exec(item)&&(_177||RegExp.$2)){_177=RegExp.$2?this._makeTag(RegExp.$1,this._parseOwnArg(RegExp.$2.substr(1)),_177):this._makeTag(RegExp.$1,_177);}else{if(_177){throw Error("Tag is not specified in '"+item+"'");}else{_177=item;}}}return _177;},_parseOwnArg:function(str){if(/^\[\s*(.*?)\s*\]$/.exec(str)){try{var _178={",":"￿"},_179=[this._initScanStack],_17a=this._exprBrackets,prep=RegExp.$1.replace(this._multipleScanRegex,function(c){if(c[0]=="\\"){return c[1];}if(_179[0].allow.indexOf(c)>=0){if(c==_179[0].close){_179.shift();}else{if(c in _17a){_179.unshift(_17a[c]);}else{if(c in _178){return _178[c];}else{if(_179.length==1&&c=="]"){throw true;}}}}}return c;}),args=prep.split(/\s*\uffff\s*/);if(_179.length==1){return d.map(args,_170);}}catch(e){if(e instanceof Error){throw e;}}}else{return _170(str);}return str;},_makeTag:function(tag,arg1,arg2){var args=[],_17b=true;if(arg1){if(arg2){args.push(arg2);}args.push(arg1);}if(args[args.length-1] instanceof Array){if(args.length>1){throw Error(tag+":["+args[1]+"] can only be used as the leftmost element");}_17b=false;args=args[0];}tag=tag.split(/\s*[.]\s*/);if(tag.length==1){var t;if((t=this.tags[tag[0]])||(t=dj.tags[tag[0]])){if(_17b){args.reverse();}return t.apply(null,args);}else{if(t=this.filters[tag[0]]){args.unshift(t);if(typeof t==="function"){return dojox.jtlc.tags.bind.apply(null,args);}else{if(typeof t==="string"){return dj.tags.expr.apply(null,args);}else{throw Error("Filter '"+tag[0]+"' is neither string nor function");}}}}}var _17c=dojo.getObject(tag.join("."));if(typeof _17c==="function"){var _17d=tag.length>1&&dojo.getObject(tag.slice(0,tag.length-1).join("."));if(typeof _17d==="function"){if(_17d===String){args.unshift("$.toString()."+tag[tag.length-1]);}else{if(_17d===Array||_17d===Object){args.unshift("$."+tag[tag.length-1]);}else{args.unshift(tag.slice(0,tag.length-1).join(".")+"($)."+tag[tag.length-1]);}}}else{args.unshift(tag.join(".")+"($)");}return dojox.jtlc.tags.expr.apply(null,args);}throw Error("Unknown filter or tag: '"+tag.join(".")+"'");},tags:{},_declareTag:dj._declareTag,filters:{lower:"$.toString().toLowerCase()",upper:"$.toString().toUpperCase()"}});})();(function(djqp){var dj=dojox.jtlc;djqp._declareTag("expr",dojo.declare(dj.tags._expr,{constructor:function(){for(var i=Math.max(1,arguments.length-1);i<10;++i){this.args.push(dojox.jtlc.tags.arg(i));}}}));djqp._declareTag("do",dojo.declare(djqp.tags._expr,{constructor:function(){if(/^\{((?:.|\n)*?);?\s*\}$/.exec(this.expr)){this.expr=RegExp.$1;}this.expr="(function(){"+this.expr+";return $;})()";this.simplify=arguments.length<=1?this._simplify:this._cant_simplify;},_simplify:function(){this.expr=this.expr.replace(/;return \$;\}\)\(\)$/,"})()");},_cant_simplify:function(){}}));djqp._declareTag("query",dojo.declare(dj.tags._query,{constructor:function(){if(arguments.length<=2&&this.query.match(/[$][1-9]/)){this.dynamicArgs=true;}},callQuery:function(self){if(!self.dynamicArgs){return dj.tags._query.prototype.callQuery.call(this,self);}if(this.loop){this.nonAccumulated(function(){this.compile(self.args[0]);});}else{this.compile(self.args[0]);}var v=this.popExpression(),t=this.addLocal();this.code.push(t+"="+this.addGlobal(dj._copyArguments)+"($);");this.code.push(t+"[0]="+v+";");return this.addGlobal(this.queryLanguage(self.query))+".apply(null,"+t+")";}}));})(dojox.jtlc.qplus.prototype);}if(!dojo._hasResource["dojox.jtlc.CHT"]){dojo._hasResource["dojox.jtlc.CHT"]=true;dojo.provide("dojox.jtlc.CHT");dojo.require("dojox.jtlc.CHT.scanner");dojo.require("dojox.jtlc.CHT.instance");dojo.require("dojox.jtlc.qplus");(function(){var dj=dojox.jtlc;dojo.declare("dojox.jtlc._NullSink",dj._Sink,{append:function(){this.closeLoops();}});dj._copyArgumentsReplaceFirst=function(args,_17e){args=dj._copyArguments(args);args[0]=_17e;return args;};var _17f=/[{](\d+)[}]/g;dj._replaceN=function(fmt){return dojo.replace(fmt,dj._copyArguments(arguments,1),_17f);};dj._chtGlobalContext={refID:0,markerID:0};dojo.declare("dojox.jtlc.CHT",dj.Language,{domMarkerPrefix:"_CHT_DOM_Marker_",constructor:function(_180){this.qplus=new dj.qplus(dojo.mixin({},{tags:this.tags},_180));dojo.mixin(this,_180);},parse:function(_181,ns,url){var _182=this;if(typeof ns==="string"){url=ns;ns={};}return dojo.when(this._buildTemplates(dj._tokenizeCHT(_181)),function(v){return _182._buildAST(v,ns||{},url||"[CHT-Templates]");});},_buildTemplates:function(_183){var _184=this,_185=null,body=null,_186={},refs={},tos={"template":1,"section":1};function _187(elt){if(elt.markerElement){body.push(_184.tags.markDom(elt.markerElement));}};dojo.forEach(_183,function(t){if(t.substr(0,2)=="<?"){var elt=new dj._CHTElement(t);if(!_185&&elt.openTag!="template"){throw Error("CHT element encountered outside template: "+t);}if(_185&&elt.openTag=="template"){throw Error("Missing end of previous template at: "+t);}if(elt.closeTag=="template"){_187(_185);_185=body=null;}else{if(elt.openTag in tos){if(elt.arg in tos||elt.arg in _184.elements||!/^[a-z]\w*$/i.test(elt.arg||"")&&(elt.openTag!="section"||elt.arg)){throw Error("Bad or missing name for CHT "+elt.openTag+": "+t);}if(elt.openTag=="template"){_186[elt.arg]=_185=elt;if(elt.kwarg.marker){elt.markerElement=elt.kwarg.marker;elt.kwarg.async=true;}if(elt.kwarg.async){elt.kwarg.compiled=true;}if(elt.kwarg.macro&&elt.kwarg.compiled){throw Error("Compiled template cannot use macro argument substitution: "+elt.arg);}}else{elt.arg=elt.arg||"";_185.body.push(elt);(_185.sections=_185.sections||{})[elt.arg]={};}body=elt.body=[];_187(elt);}else{if(elt.closeTag=="section"){if(body===_185.body){throw Error("Mismatched "+t);}body=_185.body;}else{if(elt.openTag&&elt.openTag.indexOf(".")>=0){refs[elt.openTag]=false;}body.push(elt);}}}}else{if(t){var _188=[],t=t.replace(/\ufffd([\s\S]*?)\ufffd/g,function(_189,_18a){var s=_184.qplus.parse(_18a);_188.push(t.charAt(0)=="<"?/^<script/i.test(t)?s:_184.tags.escapeAttribute(s):_184.tags.escapeText(s));return s instanceof _184.tags._do?"":"{"+(_188.length-1).toString()+"}";});if(!_185){throw Error("HTML content encountered outside template: "+t);}if(t=="{0}"){body.push(_188[0]);}else{if(t.charAt(0)!="<"&&/\b(?:[a-zA-Z][a-z]*|[A-Z]+)\b/.test(t.replace(/&[a-z]{3,4};/,""))){body.push(_184.tags.i18n(t,_188));}else{if(_188.length){body.push(_184.tags.replaceN(t,_188));}else{if(body.length&&body[body.length-1] instanceof dj.tags._quote){body[body.length-1].value+=t;}else{body.push(dj.tags.quote(t));}}}}}}},this);if(this.loadTemplates){return dojo.when(this.loadTemplates(refs),function(r){return {refs:r,parsed:_186};});}else{return {refs:refs,parsed:_186};}},_buildAST:function(rp,ns,url){for(var _18b in rp.parsed){if(!ns.hasOwnProperty(_18b)){ns[_18b]=new this._userDefinedElement(rp.parsed[_18b],url+"/<?"+_18b+"?>");}}var refs=dojo.mixin(rp.refs,ns,this.elements),_18c=this;function _18d(body){var _18e=[],_18f=-1;for(var i=0;i<body.length;++i){if(body[i] instanceof dj._CHTElement){if(_18f>=0){body.splice(_18f,0,new _18c._appendToOutput(body.splice(_18f,i-_18f)));i=_18f+1;_18f=-1;}var tag=body[i].openTag||body[i].closeTag,_190,_191=(_18e.length&&(_190=body[_18e[0]]).def_sections||_18e.length>1&&(_190=body[_18e[1]]).def_sections)&&_190.def_sections[tag];if(tag=="section"){body[i]=new _18c._userDefinedSection(body[i].arg,_18d(body[i].body),_18b);continue;}if(_191&&body[i].closeTag){throw Error("Closing tags not allowed for sections: "+body[i].text);}if(!_191&&!(tag in refs)&&tag!="section"){throw Error("Unknown CHT element: "+body[i].text);}if(body[i].openTag){if(_191){if(body[i].arg&&!_191.allowArgument){throw Error("Argument not allowed here: "+body[i].text);}if(!_191.allowMultiple&&dojo.some(_190.sections,function(s){return s.openTag==body[i].openTag;})){throw Error("Section appears more than once: "+body[i].text);}body[_18e[0]].body=body.splice(_18e[0]+1,i-_18e[0]-1);i=_18e[0]+1;if(body[_18e[0]]!==_190){body.splice(_18e[0],1);_18e.shift();--i;}_190.sections.push(body[i]);_18e.unshift(i);}else{if(refs[tag].sections){_18e.unshift(i);body[i].def_sections=refs[tag].sections;body[i].sections=[];}else{body[i]=refs[tag].tag(_18c,body[i]);}}}else{if(!_190||_190.openTag!=body[i].closeTag){throw Error("Unbalanced closing tag: "+body[i].text);}body[_18e[0]].body=body.splice(_18e[0]+1,i-_18e[0]-1);i=_18e[0]+1;if(body[_18e[0]]!==_190){body.splice(_18e[0],1);_18e.shift();--i;}if(_190.body.length&&!("" in _190.def_sections)){var t="";for(var s in _190.def_sections){if(t){t+=", ";}t+="<?"+s+"?>";}throw Error("<?"+_190.openTag+"?> must be followed by "+t);}if(!_190.body.length){delete _190.body;}body[_18e[0]]=refs[tag].tag(_18c,_190);body.splice(i--,1);_18e.shift();}}else{if(_18f<0){_18f=i;}}}if(_18e.length){throw Error("No closing tag for: "+body[_18e[body[_18e[0]].def_sections?0:1]].text);}if(_18f>=0){body.push(new _18c._appendToOutput(body.splice(_18f,body.length-_18f)));}return body;};for(var _18b in rp.parsed){if(!ns[_18b].body){ns[_18b].body=_18d(rp.parsed[_18b].body);}}return ns;},compileBody:function(tpl){this.sourceUrl=tpl.sourceUrl||tpl.def.sourceUrl;this._chtSections={};this._deferredIndex=0;var _192=this.code.length;this._chtDeferred=this.addLocal();this.code.push(this._chtDeferred+"=new "+this.addGlobal(dj._CHTDeferredAccessor)+"(this);");var _193=this.addLocal(),gctx=this.addGlobal(dj._chtGlobalContext);this.code.push(_193+"="+gctx+".refID++;");var _194=this.code.length,refs=this.addLocal();this._chtRefs={refs:refs,index:_193};this.code.push(refs+"=[];");this.accumulated("=[];",new dj._ArraySink(this),null,function(){this._chtHTML=this.sink.accumulator;this.compile(tpl);});var cons=this.addGlobal(this._deferredIndex?dojox.jtlc._CHTIncrementalTemplateInstance:dojox.jtlc._CHTTemplateInstance),_195=this.popExpression();if(!this._hasRefs){this.code.splice(_194,1);this.optimizers._refLocalOptimize=function(body){return dojox.jtlc.replaceWithinJavascript(body,this._chtRefs.refs+",","");};}this.code.push("if(!"+_193+")"+gctx+".refID=0;");var _196=this._transition&&(this.compile(this.tags.expr("("+this._transition+")")),this.popExpression());function _197(_198){return "_split_text:"+_195+(_198?",_refs:"+refs+",_refID:"+_193:"")+(_196?",_transition:"+_196:"");};this.expressions.push(this._deferredIndex?"this instanceof "+cons+"?"+this.addGlobal(dojo.mixin)+"(this,{"+_197(this._hasRefs)+(this._chtMarkerQuery?",_marker_query:"+this._chtMarkerQuery:"")+"}):new "+cons+"({"+_197(this._hasRefs)+(this._chtMarkerQuery?",_marker_query:"+this._chtMarkerQuery:"")+",_self:$self,_args:$,_cht_deferred:"+this._chtDeferred+".storage,_max_deferred:"+this._deferredIndex+"})":"new "+cons+"({"+_197(this._hasRefs)+"})");if(this._deferredIndex==0){this.code.splice(_192,1);this.optimizers._defLocalOptimize=function(body){return dojox.jtlc.replaceWithinJavascript(body,this._chtDeferred+",","");};}},decorate:function(f){f.async=this._deferredIndex>0;f.name=this._templateName;return f;},compileSequence:function(body){this.accumulated(null,new dj._NullSink(this),this.loop,function(){dojo.forEach(body,function(v){this.compile(v);this.sink.append();},this);});this.expressions.pop();},replaceLanguage:dojo.replace,_appendToOutput:dojo.extend(function(body){this.body=body;dojo.forEach(this.body,function(v){if(v.simplify){v.simplify();}});},{compile:function(self){dojo.forEach(self.body,function(v){this.compile(v);if(v instanceof this.tags._do){this.code.push(this.popExpression()+";");}else{this.code.push(this._chtHTML+".push("+this.popExpression()+");");}},this);}}),_userDefinedElement:dojo.extend(function(elt,url){this.kwarg=elt.kwarg||{};if(this.kwarg.compiled&&elt.sections){throw Error("Compiled template "+elt.arg+" should not have sections");}if(elt.sections){this.sections=elt.sections;}this.name=elt.arg;this.sourceUrl=url;},{_tag:dojo.extend(function(cht,elt,def){this.def=def;if(elt.arg){this.arg=cht.qplus.parse(elt.arg);}if(elt.sections){this.sections={};dojo.forEach(elt.sections,function(s){this.sections[s.openTag]=s.body;},this);if(elt.body){this.sections[""]=elt.body;}}},{_notAnExpression:{toString:function(){throw Error("BUG: access to current_input bypasses generator()");}},_argByName:function(_199,_19a,_19b,expr){if(_199.current_input===this._notAnExpression&&!expr&&!_199.loop.lockedItem){if(_19b){_199.current_input=_19b;}else{delete _199.current_input;}_199.compile(this.arg);_199.current_input=this._notAnExpression;}else{_19a.call(_199,expr);}},compile:function(self){var _19c,_19d;if(self.def.kwarg.macro&&self.arg){_19c=this.hasOwnProperty("current_input")?this.current_input:null;var gen=this.generator;_19d=this.hasOwnProperty("generator")?gen:null;this.generator=function(expr){self._argByName(this,gen,_19c,expr);};this.current_input=self._notAnExpression;}if(self.sections){this._chtSections[self.def.name]=self.sections;}if(!self.def.kwarg.macro&&(self.arg||this.current_input===self._notAnExpression)){var _19e,_19f;if(self.arg){this.compile(self.arg);_19e=this.popExpression();if(_19e.length>4){_19f=this.addLocal();this.code.push(_19f+"="+_19e+";");_19e="("+_19f+")";}}else{_19e=this.generator();}this.nonAccumulated(function(){this.compileSequence(self.def.body);},_19e);if(_19f){this.locals.pop();}}else{this.compileSequence(self.def.body);}if(self.sections){delete this._chtSections[self.def.name];}if(self.def.kwarg.macro&&self.arg){if(_19d){this.generator=_19d;}else{delete this.generator;}if(_19c){this.current_input=_19c;}else{delete this.current_input;}}}}),_compiledTag:dojo.extend(function(cht,elt,tag){this.name=elt.openTag;this.tag=tag;if(elt.arg){this.arg=cht.qplus.parse(elt.arg);}this.bind=cht.tags.bind;},{compile:function(self){if(!("compiledTemplates" in this)){this.compiledTemplates={};}if(!(self.name in this.compiledTemplates)){var _1a0=null;this.compiledTemplates[self.name]=function(){return _1a0.apply(this,arguments);};this.compiledTemplates[self.name].async=self.tag.def.kwarg.async||false;this.compiledTemplates[self.name]=_1a0=dj.compile(self.tag,this.compileArguments.language,dojo.mixin({compiledTemplates:this.compiledTemplates},this.compileArguments.options,{_templateName:self.name,_transition:self.tag.def.kwarg.transition}));}var fn=this.addGlobal(this.compiledTemplates[self.name]),_1a1=this.compiledTemplates[self.name].async;var v,w;if(_1a1){w=this._beginWait();}if(self.arg){this.compile(self.arg);}else{this.generator();}v=this.popExpression();if(v=="$[0]"){this.expressions.push(fn+".apply(null,$)");}else{this.expressions.push(fn+".apply(null,"+this.addGlobal(dj._copyArgumentsReplaceFirst)+"($,"+v+"))");}if(_1a1){this._endWait(w,true);}}}),tag:function(cht,elt){if(this.kwarg.compiled&&elt.openTag){return new cht._appendToOutput([new this._compiledTag(cht,elt,new this._tag(cht,{},this))]);}else{return new this._tag(cht,elt,this);}},compile:function(self){this._templateName=self.name;if(self.kwarg.transition){this._transition=self.kwarg.transition;}this.compile(self.tag(this,{}));}}),_userDefinedSection:dojo.extend(function(name,body,_1a2){this.body=body;this.name=name;this.tplName=_1a2;},{compile:function(self){this.compileSequence((this._chtSections[self.tplName]||{})[self.name]||self.body);}}),_beginWait:function(){this.code.push("if(!"+this._chtDeferred+".has("+this._deferredIndex+")){");return this.addLocal();},_endWait:function(_1a3,_1a4){this.code.push(this._chtDeferred+".set("+this._deferredIndex+","+_1a3+"="+this.popExpression()+");}else "+_1a3+"="+this._chtDeferred+".get("+this._deferredIndex+");");if(!_1a4){this.code.push("if("+_1a3+" instanceof "+this.addGlobal(dojo.Deferred)+")break;");}this._deferredIndex++;this.expressions.push(_1a3);},elements:{"if":{sections:{"":{allowArgument:true},"elseif":{allowArgument:true,allowMultiple:true},"else":{}},_tag:dojo.extend(function(cht,elt){this.ifTrue=[{condition:elt.arg?cht.qplus.parse(elt.arg):dj.tags.current(),body:elt.body}];dojo.forEach(elt.sections,function(s){if(s.openTag=="elseif"){this.ifTrue.push({condition:s.arg?cht.qplus.parse(s.arg):dj.tags.current(),body:s.body});}else{this.ifFalse=s.body;}},this);},{compile:function(self){dojo.forEach(self.ifTrue,function(s,i){this.compile(s.condition);this.code.push((i==0?"if(":"}else if(")+this.popExpression()+"){");this.compileSequence(s.body);},this);if(self.ifFalse){this.code.push("}else{");this.compileSequence(self.ifFalse);}this.code.push("}");}}),tag:function(cht,elt){return new this._tag(cht,elt);}},"foreach":{sections:{"":{allowArgument:true}},tag:function(cht,elt){return dj.tags.one(dj.tags.many(cht.tags.foreachBody(elt.body,elt.arg&&cht.qplus.parse(elt.arg))));}},"group":{sections:{"":{allowArgument:true}},tag:function(cht,elt){if(!!elt.kwarg.key==!!elt.kwarg.count){throw Error("<?group?> should have one of attributes: key=, count=");}return dj.tags.one(dj.tags.many(dj.tags.group(elt.kwarg.key?cht.qplus.parse(elt.kwarg.key,true):dj.tags.expr("Math.floor($#/("+elt.kwarg.count+"))"),cht.tags.genericBody(elt.body),elt.arg?cht.qplus.parse(elt.arg):dj.tags.current())));}},"when":{sections:{"":{allowArgument:true},"else":{}},_tag:dojo.extend(function(cht,elt){this.arg=elt.arg?cht.qplus.parse(elt.arg):dj.tags.current();this.ifReady=elt.body;if(elt.sections.length){this.ifNotReady=elt.sections[0].body;}},{compile:function(self){var flag;if(self.ifNotReady){flag=this.addLocal();this.code.push(flag+"=true;");}this.code.push("do{");this._openWait=this._beginWait();if(self.arg){this.compile(self.arg);}else{this.generator();}if(this._openWait){this._endWait(this._openWait);delete this._openWait;}var _1a5=this.popExpression(),lock=this.addLocal();if(lock!=_1a5){this.code.push(lock+"="+_1a5+";");}this.nonAccumulated(function(){this.compileSequence(self.ifReady);},"("+lock+")");this.locals.pop();this.code.push("}while("+(self.ifNotReady?flag+"=":"")+"false);");if(self.ifNotReady){this.code.push("if("+flag+"){");this.compileSequence(self.ifNotReady);this.code.push("}");this.locals.pop();}}}),tag:function(cht,elt){return new this._tag(cht,elt);}}},string:dojox.jtlc.qplus.prototype.string,queryLanguage:dojox.json.query,_declareTag:dj._declareTag,tags:dojo.delegate(dj.qplus.prototype.tags,{})});})();(function(djcp){var dj=dojox.jtlc;djcp._declareTag("foreachBody",{constructor:function(body,_1a6){this.body=body;if(_1a6){this.input=_1a6;}},compile:function(self){if(self.input){this.compile(self.input);}else{this.generator();}this.loop.lockItem(this.popExpression());this.compileSequence(self.body);}});djcp._declareTag("genericBody",{constructor:function(body){this.body=body;},compile:function(self){this.compileSequence(self.body);this.generator();}});djcp._declareTag("replaceN",dojo.declare(dj._MultiArgTag,{constructor:function(fmt,args){this.format=fmt;this.args=args||[];},formatString:function(self){return dj.stringLiteral(self.format);},compileArgs:function(self){for(var i=self.args.length-1;i>=0;--i){this.compile(self.args[i]);}},compile:function(self){if(!("_pushLiteralOptimizer" in this.optimizers)){this.optimizers._pushLiteralOptimizer=self.optimize;}if(self.args.length){this._replaceFunction=this._replaceFunction||this.addGlobal(dj._replaceN);self.compileArgs.call(this,self,true);this.expressions.push(this._replaceFunction+"("+self.formatString.call(this,self)+","+self.argumentList.call(this,self)+")");}else{this.expressions.push(self.formatString.call(this,self));}},optimize:function(body){var acc=this._chtHTML,_1a7=new RegExp("[;}{](?:"+acc+"\\.push\\({1,2}\"(?:[^\"\\\\]|\\\\.)*\"\\){1,2};){2,}","g"),_1a8=new RegExp(acc+"\\.push\\({1,2}\"((?:[^\"\\\\]|\\\\.)*)\"\\){1,2};","g");return dojox.jtlc.replaceWithinJavascript(body,_1a7,function(seq){return seq.substr(0,1)+acc+".push(\""+seq.substr(1).replace(_1a8,"$1")+"\");";});}}));djcp._declareTag("i18n",dojo.declare(djcp.tags._replaceN,{constructor:function(){if(!(this.args instanceof Array)){this.args=[this.args];}},formatString:function(self){var d=this.i18nDictionary;return dj.stringLiteral(d&&(self.format in d?d[self.format]:self.format.replace(/^(\s*)(.*?)(\s*)$/,function(_1a9,pfx,key,sfx){if(!(key in d)){d[key]=false;}return d[key]?(pfx||"")+d[key]+(sfx||""):"";}))||self.format);}}));var _1aa=dojo.declare(null,{constructor:function(arg){this.arg=arg;},compile:function(self){this["_escape"+self.cachePrefix+"Regex"]=this["_escape"+self.cachePrefix+"Regex"]||this.addGlobal(self.escapeRegex);this["_escape"+self.cachePrefix+"Fn"]=this["_escape"+self.cachePrefix+"Fn"]||this.addGlobal(self.escapeFn);var _1ab=this["_escape"+self.cachePrefix+"Regex"]+","+this["_escape"+self.cachePrefix+"Fn"];if(!("_escape"+self.cachePrefix+"Optimizer" in this.optimizers)){var _1ac=new RegExp("String\\((\"(?:\\\\.|[^\\\\\"])*\")\\)\\.replace\\("+_1ab+"\\)","g");this.optimizers["_escape"+self.cachePrefix+"Optimizer"]=function(body){return dojox.jtlc.replaceWithinJavascript(body,_1ac,"$1");};}this.compile(self.arg);var what=this.popExpression();this.expressions.push("String("+what+").replace("+_1ab+")");}});function _1ad(cls){return function(arg){return arg instanceof djcp.tags._raw||arg instanceof djcp.tags._do?arg:new cls(arg);};};djcp._declareTag("escapeAttribute",dojo.declare(_1aa,{cachePrefix:"Attr",escapeRegex:/[<>'"&]/g,escapeFn:function(x){return {"<":"&lt;",">":"&gt;","'":"&apos;","\"":"&quot;","&":"&amp;"}[x];}}),_1ad);djcp._declareTag("escapeText",dojo.declare(_1aa,{cachePrefix:"Text",escapeRegex:/[<>&]/g,escapeFn:function(x){return {"<":"&lt;",">":"&gt;","&":"&amp;"}[x];}}),_1ad);djcp._declareTag("raw",{constructor:function(arg){this.arg=arg;},compile:function(self){this.compile(self.arg);}});djcp._declareTag("ref",{constructor:function(arg){this.arg=arg;},compile:function(self){this.compile(self.arg);this.code.push(this._chtRefs.refs+".push("+this.popExpression()+");");this._replaceFunction=this._replaceFunction||this.addGlobal(dj._replaceN);this.expressions.push(this._replaceFunction+"(\"dojo.getObject(\\\"_refs.{0}.{1}\\\")\","+this._chtRefs.index+","+this._chtRefs.refs+".length-1)");this._hasRefs=true;}});djcp._declareTag("wait",{constructor:function(arg){this.arg=arg;},compile:function(self){var w=this._openWait;if(!w){w=this._beginWait();}else{delete this._openWait;}this.compile(self.arg);this._endWait(w);}});djcp._declareTag("markDom",dojo.declare(djcp.tags._raw,{constructor:function(_1ae){this.markerElement=_1ae;},compile:function(self){if(!this._chtMarkerID){this._chtMarkerID=this.addLocal();this.code.push(this._chtMarkerID+"="+this.addGlobal(dj._chtGlobalContext)+".markerID++;");this._chtMarkerQuery="("+dj.stringLiteral(self.markerElement+"."+this.domMarkerPrefix)+"+"+this._chtMarkerID+")";}this.expressions.push("("+dj.stringLiteral(dj._replaceN("<{0} style=\"display:none\" class=\"{1}",self.markerElement,this.domMarkerPrefix))+"+"+this._chtMarkerID+"+"+dj.stringLiteral(dj._replaceN("\"></{0}>",self.markerElement))+")");}}));})(dojox.jtlc.CHT.prototype);}dojo.require("dojox.jtlc.CHT");function _1af(ns){for(var tpl in ns){ns[tpl]=new cht._userDefinedElement({arg:/\.([^.]*)$/.exec(tpl)[1]});}return ns;};var cht=new dojox.jtlc.CHT({loadTemplates:_1af}),file=dojo.global.arguments[0];var _1b0=dojo.getObject;dojo.getObject=function(x){return _1b0(x)||function(){};};dojo.when(cht.parse(readFile(file)),function(ns){var dict={};for(var n in ns){if(ns.hasOwnProperty(n)){dojox.jtlc.compile(ns[n],cht,{i18nDictionary:dict});}}print(dojo.toJson(dict,true));});if(dojo.isBrowser&&(document.readyState==="complete"||dojo.config.afterOnLoad)){window.setTimeout(dojo._loadInit,100);}})();